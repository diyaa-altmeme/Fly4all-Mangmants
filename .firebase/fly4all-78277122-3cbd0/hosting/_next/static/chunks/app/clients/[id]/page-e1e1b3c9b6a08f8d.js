(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3345],{6679:(e,s,t)=>{"use strict";t.d(s,{b:()=>c});var r=t(95155),a=t(12115),l=t(30563),n=t(92273),i=t(87270),d=t(3998);function c(e){var s;let{columns:t,data:c}=e,[o,m]=a.useState([]),[u,x]=a.useState([]),f=(0,l.N4)({data:c,columns:t,getCoreRowModel:(0,n.HT)(),getPaginationRowModel:(0,n.kW)(),onSortingChange:m,getSortedRowModel:(0,n.h5)(),onColumnFiltersChange:x,getFilteredRowModel:(0,n.hM)(),state:{sorting:o,columnFilters:u}});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:f.getHeaderGroups().map(e=>(0,r.jsx)(i.Hj,{children:e.headers.map(e=>(0,r.jsx)(i.nd,{className:"whitespace-nowrap font-bold text-center",children:e.isPlaceholder?null:(0,l.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(i.BF,{children:(null==(s=f.getRowModel().rows)?void 0:s.length)?f.getRowModel().rows.map(e=>(0,r.jsx)(i.Hj,{children:e.getVisibleCells().map(e=>(0,r.jsx)(i.nA,{className:"whitespace-nowrap text-center",children:(0,l.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(i.Hj,{children:(0,r.jsx)(i.nA,{colSpan:t.length,className:"h-24 text-center",children:"لا يوجد مستخدمون لعرضهم."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4 gap-2",children:[(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>f.previousPage(),disabled:!f.getCanPreviousPage(),children:"السابق"}),(0,r.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>f.nextPage(),disabled:!f.getCanNextPage(),children:"التالي"})]})]})}},13406:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var r=t(95155),a=t(12115),l=t(25667),n=t(64269);let i=l.bL,d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});d.displayName=l.B8.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});c.displayName=l.l9.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});o.displayName=l.UC.displayName},18332:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>d,TN:()=>o,XL:()=>c});var r=t(95155),a=t(12115),l=t(83101),n=t(64269);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:a}),t),...l})});d.displayName="Alert";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});c.displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...a})});o.displayName="AlertDescription"},20243:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(95155),a=t(64269);function l(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",s),...t})}},31120:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var r=t(95155),a=t(12115),l=t(64269);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});n.displayName="Textarea"},41052:(e,s,t)=>{"use strict";t.d(s,{C5:()=>g,MJ:()=>h,Rr:()=>j,eI:()=>f,lR:()=>p,lV:()=>c,zB:()=>m});var r=t(95155),a=t(12115),l=t(32467),n=t(22544),i=t(64269),d=t(76444);let c=n.Op,o=a.createContext({}),m=e=>{let{...s}=e;return(0,r.jsx)(o.Provider,{value:{name:s.name},children:(0,r.jsx)(n.xI,{...s})})},u=()=>{let e=a.useContext(o),s=a.useContext(x),{getFieldState:t,formState:r}=(0,n.xW)(),l=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},x=a.createContext({}),f=a.forwardRef((e,s)=>{let{className:t,...l}=e,n=a.useId();return(0,r.jsx)(x.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",t),...l})})});f.displayName="FormItem";let p=a.forwardRef((e,s)=>{let{className:t,...a}=e,{error:l,formItemId:n}=u();return(0,r.jsx)(d.J,{ref:s,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...a})});p.displayName="FormLabel";let h=a.forwardRef((e,s)=>{let{...t}=e,{error:a,formItemId:n,formDescriptionId:i,formMessageId:d}=u();return(0,r.jsx)(l.DX,{ref:s,id:n,"aria-describedby":a?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!a,...t})});h.displayName="FormControl";let j=a.forwardRef((e,s)=>{let{className:t,...a}=e,{formDescriptionId:l}=u();return(0,r.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});j.displayName="FormDescription";let g=a.forwardRef((e,s)=>{var t;let{className:a,children:l,...n}=e,{error:d,formMessageId:c}=u(),o=d?String(null!=(t=null==d?void 0:d.message)?t:""):l;return o?(0,r.jsx)("p",{ref:s,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",a),...n,children:o}):null});g.displayName="FormMessage"},44846:(e,s,t)=>{"use strict";t.d(s,{d:()=>i});var r=t(95155),a=t(12115),l=t(27599),n=t(64269);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.bL,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:(0,r.jsx)(l.zi,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 rtl:data-[state=checked]:-translate-x-4 rtl:data-[state=unchecked]:-translate-x-0")})})});i.displayName=l.bL.displayName},58002:(e,s,t)=>{Promise.resolve().then(t.bind(t,92880))},86948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>m});var r=t(95155),a=t(12115),l=t(64269);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-4 sm:p-6 text-right",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,l.cn)("text-lg sm:text-xl font-bold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-4 sm:p-6 pt-0",t),...a})});o.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-4 sm:p-6 pt-0",t),...a})});m.displayName="CardFooter"},87270:(e,s,t)=>{"use strict";t.d(s,{A0:()=>i,BF:()=>d,Gg:()=>c,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>m});var r=t(95155),a=t(12115),l=t(64269);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...a})})});n.displayName="Table";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...a})});i.displayName="TableHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...a})});d.displayName="TableBody";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})});c.displayName="TableFooter";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});o.displayName="TableRow";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-right align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});m.displayName="TableHead";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});u.displayName="TableCell",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption"},92880:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>er});var r=t(95155),a=t(12115),l=t(30926);let n=(0,l.createServerReference)("400c0115434cd29d4eca4428f9840cb7a074049ed1",l.callServer,void 0,l.findSourceMapURL,"getClientById"),i=(0,l.createServerReference)("40441d5aaea8d5d093d6fa7844f284cd19f7057790",l.callServer,void 0,l.findSourceMapURL,"getClientTransactions");var d=t(20063),c=t(18332),o=t(7545),m=t(86948),u=t(85897),x=t(11647),f=t(59729),p=t(44575),h=t(27314),j=t(50346),g=t(88964),v=t(36204),N=t(28127),b=t(12941),y=t(5225),w=t(18527),R=t(792),C=t(40671),k=t(64269),A=t(3998),S=t(52619),F=t.n(S),T=t(13406),M=t(6679),E=t(19056),B=t(19456),U=t(14223);let P=e=>new Intl.NumberFormat("en-US").format(e),I=e=>[{accessorKey:"date",header:"التاريخ",cell:e=>{let{row:s}=e,t=(0,E.H)(s.original.date);return(0,B.f)(t)?(0,U.GP)(t,"yyyy-MM-dd"):"-"}},{accessorKey:"type",header:"النوع",cell:e=>{let{row:s}=e;return(0,r.jsx)(x.E,{variant:"outline",children:s.original.type})}},{accessorKey:"invoiceNumber",header:"رقم الفاتورة"},{accessorKey:"description",header:"البيان",cell:e=>{let{row:s}=e,t=s.original.description;return"string"==typeof t?(0,r.jsx)("span",{className:"text-xs",children:t}):(0,r.jsx)("span",{className:"text-xs",children:t.title})}},{accessorKey:"debit",header:"مدين",cell:e=>{let{row:s}=e;return(0,r.jsx)("span",{className:"font-mono text-red-600",children:P(s.original.debit)})}},{accessorKey:"credit",header:"دائن",cell:e=>{let{row:s}=e;return(0,r.jsx)("span",{className:"font-mono text-green-600",children:P(s.original.credit)})}}].filter(s=>e.includes(s.id||s.accessorKey)),L=e=>{let{transaction:s}=e,t=s.debit>0,a=t?s.debit:s.credit,l=s.type.includes("حجز")||s.type.includes("فيزا")?b.A:y.A,n=(0,E.H)(s.date),i=(0,B.f)(n)?(0,U.GP)(n,"yyyy-MM-dd"):"-";return(0,r.jsx)(m.Zp,{className:"shadow-sm",children:(0,r.jsxs)(m.Wu,{className:"p-4 flex items-center gap-4",children:[(0,r.jsx)("div",{className:(0,k.cn)("p-3 rounded-full",t?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"),children:(0,r.jsx)(l,{className:(0,k.cn)("h-6 w-6",t?"text-red-500":"text-green-500")})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("p",{className:"font-bold",children:s.type}),(0,r.jsxs)("p",{className:(0,k.cn)("font-mono text-lg font-bold",t?"text-red-600":"text-green-600"),children:[P(a)," ",s.currency]})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:["string"==typeof s.description?(0,r.jsx)("p",{children:s.description}):(0,r.jsx)("p",{children:s.description.title}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{children:i}),s.invoiceNumber&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2",children:"|"}),(0,r.jsxs)("span",{children:["فاتورة: ",s.invoiceNumber]})]})]})]})]})]})})};var H=t(9567),K=t(23451),_=t(51834),D=t(15894),X=t(92033),z=t(73180),Z=t(22544),G=t(54879),V=t(66942),W=t(41052),$=t(65142),O=t(98634);let J=G.Ik({avatarUrl:G.Yj().url("الرابط غير صحيح").optional().or(G.eu(""))});function q(e){let{client:s,onAvatarChanged:t,children:l}=e,[n,i]=(0,a.useState)(!1),{toast:c}=(0,D.dj)(),o=(0,d.useRouter)(),m=(0,Z.mN)({resolver:(0,V.u)(J),defaultValues:{avatarUrl:s.avatarUrl||""}}),{isSubmitting:u}=m.formState,x=async e=>{let r=await (0,O.z)(s.id,{avatarUrl:e.avatarUrl});r.success?(c({title:"تم تحديث الصورة الرمزية بنجاح"}),t(),o.refresh(),i(!1)):c({title:"خطأ",description:r.error,variant:"destructive"})};return(0,r.jsxs)(_.lG,{open:n,onOpenChange:i,children:[(0,r.jsx)(_.zM,{asChild:!0,children:l}),(0,r.jsx)(_.Cf,{className:"sm:max-w-md",children:(0,r.jsx)(W.lV,{...m,children:(0,r.jsxs)("form",{onSubmit:m.handleSubmit(x),children:[(0,r.jsxs)(_.c7,{children:[(0,r.jsx)(_.L3,{children:"تغيير الصورة الرمزية"}),(0,r.jsx)(_.rr,{children:"الصق رابطًا جديدًا لصورة رمزية. سيتم عرضها في ملفك الشخصي."})]}),(0,r.jsx)("div",{className:"py-4 grid gap-4",children:(0,r.jsx)(W.zB,{control:m.control,name:"avatarUrl",render:e=>{let{field:s}=e;return(0,r.jsxs)(W.eI,{children:[(0,r.jsx)(W.lR,{children:"رابط الصورة الجديد"}),(0,r.jsx)(W.MJ,{children:(0,r.jsx)($.p,{placeholder:"https://example.com/image.png",...s})}),(0,r.jsx)(W.C5,{})]})}})}),(0,r.jsx)(_.Es,{children:(0,r.jsxs)(A.$,{type:"submit",disabled:u,children:[u&&(0,r.jsx)(X.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,r.jsx)(z.A,{className:"me-2 h-4 w-4"}),"حفظ الصورة"]})})]})})})]})}let Y=e=>{let{title:s,value:t,icon:a,colorClass:l,subValue:n}=e;return(0,r.jsxs)("div",{className:(0,k.cn)("p-4 rounded-lg flex items-center gap-4 bg-muted/50",l),children:[(0,r.jsx)("div",{className:"p-3 bg-background/50 rounded-full",children:(0,r.jsx)(a,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold",children:s}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:t}),n&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})},Q=e=>{let{client:s,onUpdate:t}=e,{user:a}=(0,K.A)(),l="company"===s.type?"supplier"===s.relationType?f.A:p.A:h.A;return(0,r.jsx)(m.Zp,{children:(0,r.jsxs)(m.aR,{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6",children:[(0,r.jsx)(q,{client:s,onAvatarChanged:t,children:(0,r.jsxs)(u.eu,{className:"h-24 w-24 border-4 shrink-0 shadow-md cursor-pointer hover:opacity-80 transition-opacity",children:[(0,r.jsx)(u.BK,{src:s.avatarUrl,alt:s.name}),(0,r.jsx)(u.q5,{className:"text-3xl",children:(0,r.jsx)(j.A,{className:"h-16 w-16 text-muted-foreground"})})]})}),(0,r.jsxs)("div",{className:"flex-grow w-full text-center sm:text-right",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:justify-between gap-2",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(m.ZB,{className:"text-2xl md:text-3xl",children:s.name}),(0,r.jsxs)(m.BT,{className:"mt-1 flex gap-2 justify-center sm:justify-start",children:[(0,r.jsxs)(x.E,{variant:"outline",children:[(0,r.jsx)(l,{className:"me-1.5 h-3 w-3"}),"supplier"===s.relationType?"مورد":"عميل"," (","company"===s.type?"شركة":"فرد",")"]}),s.code&&(0,r.jsxs)(x.E,{variant:"secondary",children:["المعرف: ",s.code]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 self-center sm:self-start mt-2 sm:mt-0 w-full sm:w-auto",children:[!(a&&!("role"in a))&&(0,r.jsx)(H.A,{isEditing:!0,initialData:s,onClientUpdated:t,children:(0,r.jsxs)(A.$,{variant:"outline",className:"w-full",children:[(0,r.jsx)(g.A,{className:"me-2 h-4 w-4"}),"تعديل"]})}),(0,r.jsx)(A.$,{asChild:!0,className:"w-full",children:(0,r.jsxs)(F(),{href:"/reports/account-statement?accountId=".concat(s.id),children:["عرض كشف الحساب ",(0,r.jsx)(v.A,{className:"ms-2 h-4 w-4"})]})})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-x-4 gap-y-1 mt-3 text-sm text-muted-foreground",children:[s.createdAt&&(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.A,{className:"h-4 w-4"})," انضم في: ",(0,U.GP)((0,E.H)(s.createdAt),"yyyy-MM-dd")]}),s.createdBy&&(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"})," أضيف بواسطة: ",s.createdBy]})]})]})]})})},ee=e=>{let{transactions:s}=e,t=s.filter(e=>"حجز طيران"===e.type||"طلب فيزا"===e.type),a=s.filter(e=>"حجز طيران"!==e.type&&"طلب فيزا"!==e.type),l=I(["date","type","description","debit","credit"]),n=I(["date","invoiceNumber","description","debit","credit"]);return(0,r.jsxs)(m.Zp,{children:[(0,r.jsx)(m.aR,{className:"flex flex-row justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(m.ZB,{children:"سجل المعاملات"}),(0,r.jsx)(m.BT,{children:"آخر الحركات المالية المتعلقة بحسابك."})]})}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)(T.tU,{defaultValue:"bookings",children:[(0,r.jsxs)(T.j7,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(T.Xi,{value:"bookings",children:[(0,r.jsx)(b.A,{className:"me-2 h-4 w-4"}),"الحجوزات والطلبات"]}),(0,r.jsxs)(T.Xi,{value:"vouchers",children:[(0,r.jsx)(y.A,{className:"me-2 h-4 w-4"}),"السندات المالية"]})]}),(0,r.jsxs)(T.av,{value:"bookings",className:"mt-4",children:[(0,r.jsxs)("div",{className:"md:hidden space-y-3",children:[t.map(e=>(0,r.jsx)(L,{transaction:e},e.id)),0===t.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"لا توجد حجوزات"})]}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(M.b,{columns:l,data:t})})]}),(0,r.jsxs)(T.av,{value:"vouchers",className:"mt-4",children:[(0,r.jsxs)("div",{className:"md:hidden space-y-3",children:[a.map(e=>(0,r.jsx)(L,{transaction:e},e.id)),0===a.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground p-8",children:"لا توجد سندات"})]}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(M.b,{columns:n,data:a})})]})]})})]})};function es(e){let{client:s,transactions:t,onUpdate:a}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(Q,{client:s,onUpdate:a}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(Y,{title:"إجمالي المبيعات",value:"".concat(t.totalSales.toLocaleString()," ").concat(t.currency),icon:b.A,colorClass:"bg-blue-100 text-blue-600"}),(0,r.jsx)(Y,{title:"المبلغ المدفوع",value:"".concat(t.paidAmount.toLocaleString()," ").concat(t.currency),icon:w.A,colorClass:"bg-green-100 text-green-600"}),(0,r.jsx)(Y,{title:"الرصيد المتبقي",value:"".concat(t.dueAmount.toLocaleString()," ").concat(t.currency),icon:R.A,colorClass:"bg-yellow-100 text-yellow-600"}),(0,r.jsx)(Y,{title:"صافي الربح",value:"".concat(t.totalProfit.toLocaleString()," ").concat(t.currency),icon:C.A,colorClass:"bg-purple-100 text-purple-600"})]}),(0,r.jsx)(ee,{transactions:t.transactions})]})}var et=t(20243);function er(){let e=(0,d.useParams)(),s=Array.isArray(e.id)?e.id[0]:e.id,{user:t}=(0,K.A)(),l=(0,d.useRouter)(),[m,u]=a.useState(!0),[x,f]=a.useState(null),[p,h]=a.useState(null),j=a.useCallback(async()=>{if(s){u(!0),h(null);try{let[e,t]=await Promise.all([n(s),i(s)]);if(!e)return void(0,d.notFound)();if(!t)throw Error("فشل تحميل معاملات العميل.");f({client:e,transactions:t})}catch(e){h(e.message||"فشل في تحميل بيانات العميل")}finally{u(!1)}}},[s]);return(a.useEffect(()=>{if(void 0!==t){if(t&&!("role"in t)&&t.id!==s)return void l.push("/clients/".concat(t.id));j()}},[s,t,l,j]),m||void 0===t)?(0,r.jsxs)("div",{className:"space-y-6 p-4",children:[(0,r.jsx)(et.E,{className:"h-40 w-full rounded-xl"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(et.E,{className:"h-24 w-full rounded-xl"}),(0,r.jsx)(et.E,{className:"h-24 w-full rounded-xl"}),(0,r.jsx)(et.E,{className:"h-24 w-full rounded-xl"}),(0,r.jsx)(et.E,{className:"h-24 w-full rounded-xl"})]}),(0,r.jsx)(et.E,{className:"h-96 w-full rounded-xl"})]}):p||!x?(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)(c.Fc,{variant:"destructive",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)(c.XL,{children:"حدث خطأ!"}),(0,r.jsx)(c.TN,{children:p||"لم يتم العثور على العميل."})]})}):(0,r.jsx)(es,{client:x.client,transactions:x.transactions,onUpdate:j})}}},e=>{e.O(0,[9135,7210,4909,9625,315,5111,4127,9967,1374,783,4223,8994,2619,43,13,563,7881,9170,4762,7737,8441,1255,7358],()=>e(e.s=58002)),_N_E=e.O()}]);