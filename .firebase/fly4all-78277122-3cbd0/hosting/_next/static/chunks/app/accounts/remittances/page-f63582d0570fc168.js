(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7801],{6259:(e,s,t)=>{"use strict";t.d(s,{M5:()=>h,SQ:()=>j,_2:()=>f,lv:()=>u,mB:()=>p,nV:()=>x,rI:()=>o,ty:()=>m});var a=t(95155),l=t(12115),r=t(47971),n=t(63263),i=t(72251),d=t(75797),c=t(64269);let o=r.bL,m=r.l9;r.YJ,r.ZL;let u=r.Pb;r.z6;let x=l.forwardRef((e,s)=>{let{className:t,inset:l,children:i,...d}=e;return(0,a.jsxs)(r.ZP,{ref:s,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-md px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...d,children:[(0,a.jsx)(n.A,{className:"mr-auto h-4 w-4"}),i]})});x.displayName=r.ZP.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.G5,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});h.displayName=r.G5.displayName;let j=l.forwardRef((e,s)=>{let{className:t,sideOffset:l=4,...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:s,sideOffset:l,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});j.displayName=r.UC.displayName;let f=l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(r.q7,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...n})});f.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,checked:n,...d}=e;return(0,a.jsxs)(r.H_,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...d,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(r.hN,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName,l.forwardRef((e,s)=>{let{className:t,inset:l,...n}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pr-8",t),...n})}).displayName=r.JU.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...l})});p.displayName=r.wv.displayName},13406:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var a=t(95155),l=t(12115),r=t(25667),n=t(64269);let i=r.bL,d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});d.displayName=r.B8.displayName;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});c.displayName=r.l9.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});o.displayName=r.UC.displayName},27406:(e,s,t)=>{Promise.resolve().then(t.bind(t,45200))},30940:(e,s,t)=>{"use strict";t.d(s,{X:()=>l});var a=t(30926);let l=(0,a.createServerReference)("40bd3493b6cd183a3f75aa7b2dffe9f325b07a2b9d",a.callServer,void 0,a.findSourceMapURL,"updateSettings")},31120:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var a=t(95155),l=t(12115),r=t(64269);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});n.displayName="Textarea"},40625:(e,s,t)=>{"use strict";t.d(s,{Q:()=>l});var a=t(30926);let l=(0,a.createServerReference)("408c79ddd0d0a9122724301d14534a0975eed69018",a.callServer,void 0,a.findSourceMapURL,"addRemittance")},41052:(e,s,t)=>{"use strict";t.d(s,{C5:()=>v,MJ:()=>f,Rr:()=>p,eI:()=>h,lR:()=>j,lV:()=>c,zB:()=>m});var a=t(95155),l=t(12115),r=t(32467),n=t(22544),i=t(64269),d=t(76444);let c=n.Op,o=l.createContext({}),m=e=>{let{...s}=e;return(0,a.jsx)(o.Provider,{value:{name:s.name},children:(0,a.jsx)(n.xI,{...s})})},u=()=>{let e=l.useContext(o),s=l.useContext(x),{getFieldState:t,formState:a}=(0,n.xW)(),r=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},x=l.createContext({}),h=l.forwardRef((e,s)=>{let{className:t,...r}=e,n=l.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",t),...r})})});h.displayName="FormItem";let j=l.forwardRef((e,s)=>{let{className:t,...l}=e,{error:r,formItemId:n}=u();return(0,a.jsx)(d.J,{ref:s,className:(0,i.cn)(r&&"text-destructive",t),htmlFor:n,...l})});j.displayName="FormLabel";let f=l.forwardRef((e,s)=>{let{...t}=e,{error:l,formItemId:n,formDescriptionId:i,formMessageId:d}=u();return(0,a.jsx)(r.DX,{ref:s,id:n,"aria-describedby":l?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!l,...t})});f.displayName="FormControl";let p=l.forwardRef((e,s)=>{let{className:t,...l}=e,{formDescriptionId:r}=u();return(0,a.jsx)("p",{ref:s,id:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});p.displayName="FormDescription";let v=l.forwardRef((e,s)=>{var t;let{className:l,children:r,...n}=e,{error:d,formMessageId:c}=u(),o=d?String(null!=(t=null==d?void 0:d.message)?t:""):r;return o?(0,a.jsx)("p",{ref:s,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",l),...n,children:o}):null});v.displayName="FormMessage"},45200:(e,s,t)=>{"use strict";t.d(s,{default:()=>ee});var a=t(95155),l=t(12115),r=t(86948),n=t(3998),i=t(22452),d=t(87270),c=t(11647),o=t(14223),m=t(6259),u=t(90967),x=t(19201),h=t(18527),j=t(28263),f=t(88964),p=t(64269),v=t(51834),g=t(15894),b=t(92033),N=t(30926);let y=(0,N.createServerReference)("60266b614460f4fd778e8111e66e4c8bff9744db3e",N.callServer,void 0,N.findSourceMapURL,"auditRemittance");var w=t(31120),C=t(76444);function A(e){let{remittance:s,onSuccess:t}=e,[r,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(!1),{toast:u}=(0,g.dj)(),h=async()=>{m(!0);let e=await y(s.id,d);e.success?(u({title:"تم تدقيق الحوالة بنجاح"}),t(),i(!1)):u({title:"خطأ",description:e.error,variant:"destructive"}),m(!1)};return(0,a.jsxs)(v.lG,{open:r,onOpenChange:i,children:[(0,a.jsx)(v.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(x.A,{className:"me-2 h-4 w-4"})," تدقيق"]})}),(0,a.jsxs)(v.Cf,{children:[(0,a.jsxs)(v.c7,{children:[(0,a.jsx)(v.L3,{children:"تدقيق الحوالة"}),(0,a.jsx)(v.rr,{children:"تأكيد صحة بيانات الحوالة قبل إرسالها للاستلام."})]}),(0,a.jsx)("div",{className:"py-4 space-y-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(C.J,{htmlFor:"audit-notes",children:"ملاحظات التدقيق (اختياري)"}),(0,a.jsx)(w.T,{id:"audit-notes",value:d,onChange:e=>c(e.target.value)})]})}),(0,a.jsx)(v.Es,{children:(0,a.jsxs)(n.$,{onClick:h,disabled:o,children:[o&&(0,a.jsx)(b.A,{className:"me-2 h-4 w-4 animate-spin"}),"تأكيد التدقيق"]})})]})]})}let I=(0,N.createServerReference)("60c7ace3c7601560697ba8ea1632ea71447c0b65ec",N.callServer,void 0,N.findSourceMapURL,"receiveRemittance");var S=t(11186),R=t(80187);function U(e){let{remittance:s,onSuccess:t}=e,[r,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)(s.boxId),[o,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)([]),{toast:j}=(0,g.dj)();(0,l.useEffect)(()=>{r&&(0,R.c)().then(x)},[r]);let f=async()=>{if(!d)return void j({title:"الرجاء اختيار الصندوق",variant:"destructive"});m(!0);let e=await I(s,d);e.success?(j({title:"تم استلام الحوالة وتسجيل سند القبض بنجاح"}),t(),i(!1)):j({title:"خطأ",description:e.error,variant:"destructive"}),m(!1)};return(0,a.jsxs)(v.lG,{open:r,onOpenChange:i,children:[(0,a.jsx)(v.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{size:"sm",children:[(0,a.jsx)(h.A,{className:"me-2 h-4 w-4"})," تأكيد الاستلام"]})}),(0,a.jsxs)(v.Cf,{children:[(0,a.jsxs)(v.c7,{children:[(0,a.jsx)(v.L3,{children:"تأكيد استلام الحوالة"}),(0,a.jsx)(v.rr,{children:'سيؤدي هذا الإجراء إلى تغيير حالة الحوالة إلى "مستلمة" وإنشاء سند قبض تلقائي بالمبلغ في الصندوق المحدد.'})]}),(0,a.jsx)("div",{className:"py-4 space-y-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(C.J,{children:"الصندوق"}),(0,a.jsxs)(S.l6,{value:d,onValueChange:c,children:[(0,a.jsx)(S.bq,{children:(0,a.jsx)(S.yv,{placeholder:"اختر صندوقًا..."})}),(0,a.jsx)(S.gC,{children:u.map(e=>(0,a.jsx)(S.eb,{value:e.id,children:e.name},e.id))})]})]})}),(0,a.jsx)(v.Es,{children:(0,a.jsxs)(n.$,{onClick:f,disabled:o||!d,children:[o&&(0,a.jsx)(b.A,{className:"me-2 h-4 w-4 animate-spin"}),"تأكيد الاستلام"]})})]})]})}var M=t(5470),J=t(81450);let _={pending_audit:{label:"بانتظار التدقيق",icon:u.A,className:"bg-yellow-100 text-yellow-800"},pending_reception:{label:"بانتظار الاستلام",icon:x.A,className:"bg-blue-100 text-blue-800"},received:{label:"مستلمة",icon:h.A,className:"bg-green-100 text-green-800"}};function z(e){let{remittances:s,onSuccess:t}=e,{data:r,loaded:i}=(0,M.Z)(),u=(0,l.useMemo)(()=>{var e;return new Map(null==r||null==(e=r.users)?void 0:e.map(e=>[e.uid,e.name]))},[null==r?void 0:r.users]),x=(0,l.useMemo)(()=>{var e;return new Map(null==r||null==(e=r.boxes)?void 0:e.map(e=>[e.id,e.name]))},[null==r?void 0:r.boxes]);return i?(0,a.jsx)("div",{className:"border rounded-lg overflow-x-auto",children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"التاريخ"}),(0,a.jsx)(d.nd,{children:"الشركة"}),(0,a.jsx)(d.nd,{children:"المكتب"}),(0,a.jsx)(d.nd,{children:"المبلغ (USD)"}),(0,a.jsx)(d.nd,{children:"المبلغ (IQD)"}),(0,a.jsx)(d.nd,{children:"الصندوق"}),(0,a.jsx)(d.nd,{children:"الحالة"}),(0,a.jsx)(d.nd,{children:"الإجراءات"})]})}),(0,a.jsx)(d.BF,{children:0===s.length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:8,className:"h-24 text-center",children:"لا توجد حوالات لعرضها."})}):s.map(e=>{var s,l;let r=_[e.status],i=u.get(e.assignedToUid)||"غير معروف",h=x.get(e.boxId)||"غير معروف";return(0,a.jsxs)(d.Hj,{children:[(0,a.jsxs)(d.nA,{children:[(0,a.jsx)("div",{className:"font-medium",children:e.createdAt?(0,o.GP)(new Date(e.createdAt),"yyyy-MM-dd"):"-"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["بواسطة: ",e.createdBy]})]}),(0,a.jsx)(d.nA,{children:e.companyName}),(0,a.jsx)(d.nA,{children:e.officeName}),(0,a.jsx)(d.nA,{className:"font-mono text-right",children:null==(s=e.totalAmountUsd)?void 0:s.toLocaleString()}),(0,a.jsx)(d.nA,{className:"font-mono text-right",children:null==(l=e.totalAmountIqd)?void 0:l.toLocaleString()}),(0,a.jsxs)(d.nA,{children:[(0,a.jsx)("div",{children:h}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["المخول: ",i]})]}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)(c.E,{variant:"outline",className:(0,p.cn)("gap-1.5",r.className),children:[(0,a.jsx)(r.icon,{className:"h-3 w-3"}),r.label]})}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)(m.rI,{children:[(0,a.jsx)(m.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(m.SQ,{children:["pending_audit"===e.status&&(0,a.jsx)(m._2,{asChild:!0,children:(0,a.jsx)(A,{remittance:e,onSuccess:t})}),"pending_reception"===e.status&&(0,a.jsx)(m._2,{asChild:!0,children:(0,a.jsx)(U,{remittance:e,onSuccess:t})}),"received"!==e.status&&(0,a.jsx)(J.A,{isEditing:!0,initialData:e,onSaveSuccess:t,children:(0,a.jsxs)(m._2,{onSelect:e=>e.preventDefault(),children:[(0,a.jsx)(f.A,{className:"me-2 h-4 w-4"})," تعديل"]})}),(0,a.jsx)(m._2,{className:"text-destructive focus:text-destructive",children:"حذف"})]})]})})]},e.id)})})]})}):(0,a.jsx)("div",{className:"text-center p-8",children:"جاري تحميل البيانات..."})}var B=t(65142),q=t(13630),T=t(45444),D=t(30940),k=t(60013),V=t(13406);let F=e=>{let{items:s,onItemsChange:t,placeholder:l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[s.map((e,l)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(B.p,{value:e,onChange:e=>t((0,k.jM)(s,s=>{s[l]=e.target.value}))}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-destructive",onClick:()=>t(s.filter((e,s)=>s!==l)),children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})]},l)),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>t([...s,""]),children:[(0,a.jsx)(i.A,{className:"me-2 h-4 w-4"})," إضافة ",l]})]})};function E(e){let{initialSettings:s,onSuccess:t}=e,[r,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),{toast:o}=(0,g.dj)(),[m,u]=(0,l.useState)(s);(0,l.useEffect)(()=>{r&&u(s)},[r,s]);let x=async()=>{m&&(c(!0),(await (0,D.X)({remittanceSettings:m})).success?(o({title:"تم حفظ الإعدادات"}),t(),i(!1)):o({title:"خطأ",description:"Failed to save settings.",variant:"destructive"}),c(!1))};return(0,a.jsxs)(v.lG,{open:r,onOpenChange:i,children:[(0,a.jsx)(v.zM,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",children:[(0,a.jsx)(T.A,{className:"me-2 h-4 w-4"})," الإعدادات"]})}),(0,a.jsxs)(v.Cf,{className:"max-w-3xl",children:[(0,a.jsxs)(v.c7,{children:[(0,a.jsx)(v.L3,{children:"إعدادات الحوالات"}),(0,a.jsx)(v.rr,{children:"إدارة المكاتب وطرق التحويل وأعمدة توزيع المبالغ المخصصة."})]}),m?(0,a.jsxs)(V.tU,{defaultValue:"offices",className:"w-full",children:[(0,a.jsxs)(V.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(V.Xi,{value:"offices",children:"المكاتب"}),(0,a.jsx)(V.Xi,{value:"methods",children:"طرق التحويل"}),(0,a.jsx)(V.Xi,{value:"dist_usd",children:"توزيع USD"}),(0,a.jsx)(V.Xi,{value:"dist_iqd",children:"توزيع IQD"})]}),(0,a.jsx)(V.av,{value:"offices",children:(0,a.jsx)(F,{items:m.offices,onItemsChange:e=>u(s=>s?{...s,offices:e.filter(Boolean)}:null),placeholder:"مكتب"})}),(0,a.jsx)(V.av,{value:"methods",children:(0,a.jsx)(F,{items:m.methods,onItemsChange:e=>u(s=>s?{...s,methods:e.filter(Boolean)}:null),placeholder:"طريقة"})}),(0,a.jsx)(V.av,{value:"dist_usd",children:(0,a.jsx)(F,{items:(m.distributionColumnsUsd||[]).map(e=>e.label),onItemsChange:e=>u(s=>s?{...s,distributionColumnsUsd:e.filter(Boolean).map((e,s)=>({id:"usd_col_".concat(s),label:e}))}:null),placeholder:"حقل"})}),(0,a.jsx)(V.av,{value:"dist_iqd",children:(0,a.jsx)(F,{items:(m.distributionColumnsIqd||[]).map(e=>e.label),onItemsChange:e=>u(s=>s?{...s,distributionColumnsIqd:e.filter(Boolean).map((e,s)=>({id:"iqd_col_".concat(s),label:e}))}:null),placeholder:"حقل"})})]}):(0,a.jsx)("div",{className:"flex justify-center p-8",children:(0,a.jsx)(b.A,{className:"animate-spin"})}),(0,a.jsx)(v.Es,{children:(0,a.jsxs)(n.$,{onClick:x,disabled:d||!m,children:[d&&(0,a.jsx)(b.A,{className:"me-2 h-4 w-4 animate-spin"}),"حفظ الإعدادات"]})})]})]})}var L=t(60805),Z=t(73180);let $=(0,N.createServerReference)("404a94dfe04fe7c955d488cb56135349bb06d8e5d6",N.callServer,void 0,N.findSourceMapURL,"analyzeRemittanceText");var H=t(22544),Y=t(54879),Q=t(66942),O=t(41052),X=t(40625),G=t(23451),P=t(23639);let W=Y.Ik({companyName:Y.Yj().min(1,"اسم الشركة مطلوب"),officeName:Y.Yj().min(1,"اسم المكتب مطلوب"),method:Y.Yj().min(1,"طريقة التحويل مطلوبة"),assignedToUid:Y.Yj().min(1,"المخول بالاستلام مطلوب"),boxId:Y.Yj().min(1,"الصندوق المستلم مطلوب"),totalAmountUsd:Y.au.number().default(0),totalAmountIqd:Y.au.number().default(0),notes:Y.Yj().optional()});function K(e){let{remittanceSettings:s,onRemittanceAdded:t}=e,[i,d]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1),[m,u]=(0,l.useState)(""),{toast:x}=(0,g.dj)(),{data:h}=(0,M.Z)(),{user:j}=(0,G.A)(),f=l.useMemo(()=>((null==h?void 0:h.users)||[]).map(e=>({value:e.uid,label:e.name})),[null==h?void 0:h.users]),p=(0,H.mN)({resolver:(0,Q.u)(W),defaultValues:{totalAmountUsd:void 0,totalAmountIqd:void 0}});l.useEffect(()=>{i&&j&&"role"in j&&j.boxId&&p.setValue("boxId",j.boxId)},[i,j,p]);let v=async()=>{if(!m.trim())return void x({title:"الرجاء إدخال نص الحوالة.",variant:"destructive"});o(!0),d(null);try{let e=await $({messageText:m});d(e),p.reset({companyName:e.companyName,method:e.method,notes:e.notes,totalAmountUsd:"dollar"===e.currency?e.amount:void 0,totalAmountIqd:"dinar"===e.currency?e.amount:void 0,officeName:"",assignedToUid:"",boxId:j&&"role"in j?j.boxId:""})}catch(e){x({title:"خطأ في التحليل",description:e.message,variant:"destructive"})}finally{o(!1)}},N=async e=>{let s=await (0,X.Q)({...e,distribution:{},totalAmountUsd:e.totalAmountUsd||0,totalAmountIqd:e.totalAmountIqd||0});s.success&&s.newRemittance?(x({title:"تمت إضافة الحوالة بنجاح"}),t(s.newRemittance),d(null),u(""),p.reset()):x({title:"خطأ",description:s.error,variant:"destructive"})};return(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-primary"}),"الإدخال الذكي للحوالات"]}),(0,a.jsx)(r.BT,{children:"أدخل نص الحوالة كما تكتبه في واتساب، وسيقوم النظام بتحليله."})]}),(0,a.jsxs)(r.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(C.J,{htmlFor:"remittance-text",children:"نص الحوالة"}),(0,a.jsx)(w.T,{id:"remittance-text",placeholder:"مثال: فيوجر فلاي 720.000 ماستر",rows:4,value:m,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)(n.$,{onClick:v,disabled:c||!m.trim(),className:"w-full",children:[c?(0,a.jsx)(b.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,a.jsx)(L.A,{className:"me-2 h-4 w-4"}),"تحليل النص"]}),i&&(0,a.jsx)(O.lV,{...p,children:(0,a.jsxs)("form",{onSubmit:p.handleSubmit(N),className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[(0,a.jsx)(O.zB,{control:p.control,name:"companyName",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"الشركة"}),(0,a.jsx)(O.MJ,{children:(0,a.jsx)(P.j,{searchAction:"all",value:s.value,onValueChange:s.onChange})}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(O.zB,{control:p.control,name:"totalAmountUsd",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"المبلغ (USD)"}),(0,a.jsx)(O.MJ,{children:(0,a.jsx)(B.p,{type:"number",...s,value:s.value||""})}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsx)(O.zB,{control:p.control,name:"totalAmountIqd",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"المبلغ (IQD)"}),(0,a.jsx)(O.MJ,{children:(0,a.jsx)(B.p,{type:"number",...s,value:s.value||""})}),(0,a.jsx)(O.C5,{})]})}})]}),(0,a.jsx)(O.zB,{control:p.control,name:"method",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"الطريقة"}),(0,a.jsx)(O.MJ,{children:(0,a.jsx)(B.p,{...s})}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsx)(O.zB,{control:p.control,name:"officeName",render:e=>{let{field:t}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"المكتب"}),(0,a.jsxs)(S.l6,{onValueChange:t.onChange,value:t.value,children:[(0,a.jsx)(O.MJ,{children:(0,a.jsx)(S.bq,{children:(0,a.jsx)(S.yv,{placeholder:"اختر المكتب..."})})}),(0,a.jsx)(S.gC,{children:s.offices.map(e=>(0,a.jsx)(S.eb,{value:e,children:e},e))})]}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsx)(O.zB,{control:p.control,name:"assignedToUid",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"المخول بالاستلام"}),(0,a.jsxs)(S.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(O.MJ,{children:(0,a.jsx)(S.bq,{children:(0,a.jsx)(S.yv,{placeholder:"اختر موظفًا..."})})}),(0,a.jsx)(S.gC,{children:f.map(e=>(0,a.jsx)(S.eb,{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsx)(O.zB,{control:p.control,name:"boxId",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"الصندوق المستلم"}),(0,a.jsxs)(S.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(O.MJ,{children:(0,a.jsx)(S.bq,{children:(0,a.jsx)(S.yv,{placeholder:"اختر صندوقًا..."})})}),(0,a.jsx)(S.gC,{children:((null==h?void 0:h.boxes)||[]).map(e=>(0,a.jsx)(S.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsx)(O.zB,{control:p.control,name:"notes",render:e=>{let{field:s}=e;return(0,a.jsxs)(O.eI,{children:[(0,a.jsx)(C.J,{children:"ملاحظات"}),(0,a.jsx)(O.MJ,{children:(0,a.jsx)(w.T,{...s})}),(0,a.jsx)(O.C5,{})]})}}),(0,a.jsxs)(n.$,{type:"submit",disabled:p.formState.isSubmitting,className:"w-full",children:[p.formState.isSubmitting?(0,a.jsx)(b.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,a.jsx)(Z.A,{className:"me-2 h-4 w-4"}),"حفظ الحوالة"]})]})})]})]})}function ee(e){var s;let{initialRemittances:t,onDataChange:d}=e,[c,o]=(0,l.useState)(t),{data:m,loaded:u}=(0,M.Z)(),x=null==m||null==(s=m.settings)?void 0:s.remittanceSettings;(0,l.useEffect)(()=>{o(t)},[t]);let h=e=>{o((0,k.jM)(s=>{s.unshift(e)})),d()};return u&&x?(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-[1fr,500px] gap-6 items-start",children:[(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ZB,{children:"سجل الحوالات"}),(0,a.jsx)(r.BT,{children:"آخر الحوالات التي تم تسجيلها في النظام."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E,{initialSettings:x,onSuccess:d}),(0,a.jsx)(J.A,{onRemittanceAdded:h,children:(0,a.jsxs)(n.$,{children:[(0,a.jsx)(i.A,{className:"me-2 h-4 w-4"}),"إضافة يدوية"]})})]})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)(z,{remittances:c,onSuccess:d})})]})}),(0,a.jsx)("div",{className:"xl:sticky top-20",children:(0,a.jsx)(K,{remittanceSettings:x,onRemittanceAdded:h})})]}):(0,a.jsx)("div",{children:"جاري تحميل الإعدادات..."})}},81450:(e,s,t)=>{"use strict";t.d(s,{A:()=>_});var a=t(95155),l=t(12115),r=t(51834),n=t(22544),i=t(66942),d=t(54879),c=t(3998),o=t(76444),m=t(31120),u=t(11186),x=t(92033),h=t(27314),j=t(94972),f=t(44381),p=t(73180),v=t(15894),g=t(23639),b=t(30926);let N=(0,b.createServerReference)("60c7862a4ca16493782c4d556b1c72f9ee8d90ed17",b.callServer,void 0,b.findSourceMapURL,"updateRemittance");var y=t(40625),w=t(41052),C=t(97916),A=t(64269),I=t(5470),S=t(23451);let R=d.Ik({companyName:d.Yj().min(1,"اسم الشركة مطلوب"),officeName:d.Yj().min(1,"اسم المكتب مطلوب"),method:d.Yj().min(1,"طريقة التحويل مطلوبة"),assignedToUid:d.Yj().min(1,"المخول بالاستلام مطلوب"),boxId:d.Yj().min(1,"الصندوق المستلم مطلوب"),totalAmountUsd:d.au.number().min(0).default(0),totalAmountIqd:d.au.number().min(0).default(0),distributions:d.g1(d.au.number().min(0)),notes:d.Yj().optional()}).refine(e=>e.totalAmountUsd>0||e.totalAmountIqd>0,{message:"يجب إدخال مبلغ للحوالة إما بالدولار أو بالدينار.",path:["totalAmountUsd"]}),U=e=>{let{currency:s,className:t,...l}=e;return(0,a.jsx)(C.O,{currency:s,className:(0,A.cn)("text-right",t),currencyClassName:(0,A.cn)("USD"===s?"bg-accent text-accent-foreground":"bg-primary text-primary-foreground"),...l})};function M(e){var s,t,d;let{settings:b,onSaveSuccess:C,isEditing:A=!1,initialData:M}=e,{toast:J}=(0,v.dj)(),{data:_,loaded:z}=(0,I.Z)(),{user:B}=(0,S.A)(),q=(0,n.mN)({resolver:(0,i.u)(R),defaultValues:A&&M?{...M,distributions:M.distribution||{}}:{totalAmountUsd:0,totalAmountIqd:0,distributions:{},boxId:B&&"role"in B?B.boxId:""}}),{register:T,formState:{errors:D,isSubmitting:k},setValue:V}=q,F=(0,l.useMemo)(()=>((null==_?void 0:_.users)||[]).map(e=>({value:e.uid,label:e.name})),[null==_?void 0:_.users]),E=(0,l.useMemo)(()=>{var e,s;let t=q.watch("boxId");return(null==_||null==(s=_.boxes)||null==(e=s.find(e=>e.id===t))?void 0:e.name)||"غير محدد"},[q,null==_?void 0:_.boxes]);(0,l.useEffect)(()=>{A&&M?q.reset({...M,distributions:M.distribution||{}}):B&&"role"in B&&B.boxId&&q.setValue("boxId",B.boxId)},[B,q,A,M]);let L=async e=>{let s={companyName:e.companyName,officeName:e.officeName,method:e.method,assignedToUid:e.assignedToUid,boxId:e.boxId,totalAmountUsd:e.totalAmountUsd||0,totalAmountIqd:e.totalAmountIqd||0,distribution:e.distributions,notes:e.notes||""};if(A&&M){let e=await N(M.id,s);e.success?(J({title:"تم تحديث الحوالة بنجاح"}),C({...M,...s})):J({title:"خطأ",description:e.error,variant:"destructive"})}else{let e=await (0,y.Q)(s);e.success&&e.newRemittance?(J({title:"تمت إضافة الحوالة بنجاح"}),C(e.newRemittance),q.reset()):J({title:"خطأ",description:e.error,variant:"destructive"})}};return z&&_?(0,a.jsx)(w.lV,{...q,children:(0,a.jsxs)("form",{onSubmit:q.handleSubmit(L),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-x-6 gap-y-4",children:[(0,a.jsx)(w.zB,{control:q.control,name:"companyName",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"الشركة المرسلة"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(g.j,{searchAction:"all",value:s.value,onValueChange:s.onChange,placeholder:"ابحث عن شركة..."})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:q.control,name:"officeName",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"المكتب"}),(0,a.jsxs)(u.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"اختر المكتب..."})})}),(0,a.jsx)(u.gC,{children:b.offices.map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:q.control,name:"method",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"طريقة التحويل"}),(0,a.jsxs)(u.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"اختر الطريقة..."})})}),(0,a.jsx)(u.gC,{children:b.methods.map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))})]}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:q.control,name:"assignedToUid",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"المخول بالاستلام"}),(0,a.jsxs)(u.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"اختر موظفًا..."})})}),(0,a.jsx)(u.gC,{children:F.map(e=>(0,a.jsx)(u.eb,{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)(w.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"space-y-4 bg-muted/50 p-4 rounded-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"توزيع مبالغ الحوالة"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"الإجمالي (USD)"}),(0,a.jsx)(n.xI,{control:q.control,name:"totalAmountUsd",render:e=>{let{field:s}=e;return(0,a.jsx)(U,{currency:"USD",...s,onValueChange:s.onChange})}}),(0,a.jsx)(w.C5,{children:null==(s=D.totalAmountUsd)?void 0:s.message})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"الإجمالي (IQD)"}),(0,a.jsx)(n.xI,{control:q.control,name:"totalAmountIqd",render:e=>{let{field:s}=e;return(0,a.jsx)(U,{currency:"IQD",...s,onValueChange:s.onChange})}})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[null==(t=b.distributionColumnsUsd)?void 0:t.map(e=>(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(o.J,{children:[e.label," (USD)"]}),(0,a.jsx)(n.xI,{control:q.control,name:"distributions.".concat(e.id,"_usd"),render:e=>{let{field:s}=e;return(0,a.jsx)(U,{currency:"USD",...s,onValueChange:s.onChange})}})]},e.id)),null==(d=b.distributionColumnsIqd)?void 0:d.map(e=>(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)(o.J,{children:[e.label," (IQD)"]}),(0,a.jsx)(n.xI,{control:q.control,name:"distributions.".concat(e.id,"_iqd"),render:e=>{let{field:s}=e;return(0,a.jsx)(U,{currency:"IQD",...s,onValueChange:s.onChange})}})]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(o.J,{children:"ملاحظات"}),(0,a.jsx)(m.T,{...T("notes")})]}),(0,a.jsxs)(r.Es,{className:"pt-4 flex-col sm:flex-row gap-2 justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"})," ",(0,a.jsxs)("span",{children:["المستخدم: ",(null==B?void 0:B.name)||"..."]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"})," ",(0,a.jsxs)("span",{children:["الصندوق: ",E]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"})," ",(0,a.jsx)("span",{children:"رقم الفاتورة: (تلقائي)"})]})]}),(0,a.jsxs)(c.$,{type:"submit",disabled:k,children:[k&&(0,a.jsx)(x.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,a.jsx)(p.A,{className:"me-2 h-4 w-4"}),A?"حفظ التعديلات":"حفظ الحوالة"]})]})]})}):(0,a.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin"})})}var J=t(19056);function _(e){var s;let{onSaveSuccess:t,children:n,isEditing:i=!1,initialData:d}=e,[c,o]=(0,l.useState)(!1),{data:m,loaded:u,fetchData:h}=(0,I.Z)(),j=null==m||null==(s=m.settings)?void 0:s.remittanceSettings;(0,l.useEffect)(()=>{c&&!u&&h()},[c,u,h]);let f=(0,l.useMemo)(()=>{if(d)return{...d,createdAt:d.createdAt?(0,J.H)(d.createdAt):new Date,updatedAt:d.updatedAt?(0,J.H)(d.updatedAt):new Date,auditedAt:d.auditedAt?(0,J.H)(d.auditedAt):void 0,receivedAt:d.receivedAt?(0,J.H)(d.receivedAt):void 0}},[d]);return(0,a.jsxs)(r.lG,{open:c,onOpenChange:o,children:[(0,a.jsx)(r.zM,{asChild:!0,children:n}),(0,a.jsxs)(r.Cf,{className:"sm:max-w-4xl p-0",children:[(0,a.jsxs)(r.c7,{className:"bg-primary text-primary-foreground p-4 rounded-t-lg",children:[(0,a.jsx)(r.L3,{children:i?"تعديل بيانات الحوالة":"إضافة حوالة جديدة"}),(0,a.jsx)(r.rr,{className:"text-primary-foreground/80",children:i?"قم بتحديث تفاصيل الحوالة.":"أدخل جميع تفاصيل الحوالة هنا. سيتم حفظها وانتظار التدقيق."})]}),(0,a.jsx)("div",{className:"max-h-[80vh] overflow-y-auto p-6",children:u&&j?(0,a.jsx)(M,{settings:j,onSaveSuccess:e=>{t(e),o(!1)},isEditing:i,initialData:f}):(0,a.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin"})})})]})]})}},86948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>m});var a=t(95155),l=t(12115),r=t(64269);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-4 sm:p-6 text-right",t),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-lg sm:text-xl font-bold leading-none tracking-tight",t),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-4 sm:p-6 pt-0",t),...l})});o.displayName="CardContent";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-4 sm:p-6 pt-0",t),...l})});m.displayName="CardFooter"},87270:(e,s,t)=>{"use strict";t.d(s,{A0:()=>i,BF:()=>d,Gg:()=>c,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>m});var a=t(95155),l=t(12115),r=t(64269);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",t),...l})})});n.displayName="Table";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",t),...l})});i.displayName="TableHeader";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...l})});d.displayName="TableBody";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})});c.displayName="TableFooter";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});o.displayName="TableRow";let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-right align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});m.displayName="TableHead";let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});u.displayName="TableCell",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption"},97916:(e,s,t)=>{"use strict";t.d(s,{O:()=>d});var a=t(95155),l=t(12115),r=t(65142),n=t(64269);let i=e=>{if("string"!=typeof e||""===e.trim())return;let s=parseFloat(e.replace(/,/g,""));return isNaN(s)?void 0:s},d=l.forwardRef((e,s)=>{let{value:t,onValueChange:d,className:c,allowNegative:o=!1,currency:m,currencyClassName:u,direction:x="rtl",...h}=e,j=e=>{if(null==e||""===e)return"";let s="string"==typeof e?i(e):e;return void 0===s?String(e):new Intl.NumberFormat("en-US").format(s)},[f,p]=l.useState(j(t));l.useEffect(()=>{p(j(t))},[t]);let v={...h,ref:s,type:"text",inputMode:"decimal",placeholder:"0.00",value:f||"",onChange:e=>{let s=e.target.value.replace(/,/g,"");if((o?/^-?\d*\.?\d*$/:/^\d*\.?\d*$/).test(s)||""===s){let e=i(s);p(void 0!==e?j(e):s),d&&d(e)}}};return m?(0,a.jsxs)("div",{className:(0,n.cn)("relative flex items-center w-full",c),children:[(0,a.jsx)(r.p,{...v,className:(0,n.cn)("z-10 text-right w-full","rtl"===x?"rounded-l-none rounded-r-lg border-l-0":"rounded-r-none rounded-l-lg border-r-0")}),(0,a.jsx)("div",{className:(0,n.cn)("p-2 bg-muted border h-full flex items-center",u,"rtl"===x?"rounded-l-lg":"rounded-r-lg"),children:(0,a.jsx)("span",{className:"text-xs font-semibold",children:m})})]}):(0,a.jsx)(r.p,{...v,className:(0,n.cn)("text-right",c)})});d.displayName="NumericInput"}},e=>{e.O(0,[9135,7210,4909,9625,315,5111,4127,9967,1374,783,4223,8994,43,84,13,5672,7959,4762,2500,8441,1255,7358],()=>e(e.s=27406)),_N_E=e.O()}]);