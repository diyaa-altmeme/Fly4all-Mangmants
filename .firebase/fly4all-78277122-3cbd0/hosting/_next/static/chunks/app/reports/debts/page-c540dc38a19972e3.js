(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2707],{6259:(e,t,a)=>{"use strict";a.d(t,{M5:()=>x,SQ:()=>p,_2:()=>g,lv:()=>m,mB:()=>h,nV:()=>f,rI:()=>c,ty:()=>u});var s=a(95155),r=a(12115),l=a(47971),n=a(63263),i=a(72251),d=a(75797),o=a(64269);let c=l.bL,u=l.l9;l.YJ,l.ZL;let m=l.Pb;l.z6;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,children:i,...d}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-md px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...d,children:[(0,s.jsx)(n.A,{className:"mr-auto h-4 w-4"}),i]})});f.displayName=l.ZP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});x.displayName=l.G5.displayName;let p=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});p.displayName=l.UC.displayName;let g=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});g.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...d}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pr-8",a),...n})}).displayName=l.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});h.displayName=l.wv.displayName},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>g,gC:()=>p,l6:()=>c,yv:()=>u});var s=a(95155),r=a(12115),l=a(47887),n=a(59007),i=a(42614),d=a(72251),o=a(64269);let c=l.bL;l.YJ;let u=l.WT,m=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let g=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});g.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var s=a(95155);a(12115);var r=a(83101),l=a(64269);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("span",{className:(0,l.cn)(n({variant:a}),t),...r})}},18332:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>d,TN:()=>c,XL:()=>o});var s=a(95155),r=a(12115),l=a(83101),n=a(64269);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:r}),a),...l})});d.displayName="Alert";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});o.displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});c.displayName="AlertDescription"},20243:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(95155),r=a(64269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},24896:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(95155),r=a(93037),l=a(34486);function n(){return(0,s.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:(0,s.jsx)(l.P.div,{animate:{y:[0,-10,0],rotate:[0,5,0,-5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:(0,s.jsx)(r.A,{className:"h-16 w-16 text-primary"})})})}},31868:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(95155),r=a(12115),l=a(20063),n=a(18332),i=a(7545),d=a(23451),o=a(24896);function c(e){let{children:t,requiredPermission:a}=e,{user:c,loading:u,hasPermission:m}=(0,d.A)(),f=(0,l.useRouter)(),[x,p]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(!u){if(!c)return void f.replace("/auth/login");a&&!m(a)?p(!1):p(!0)}},[c,u,a,m,f]),u||!x)?u||x||!c?(0,s.jsx)(o.A,{}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)(n.Fc,{variant:"destructive",className:"max-w-md",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)(n.XL,{children:"وصول مرفوض!"}),(0,s.jsx)(n.TN,{children:"ليس لديك الصلاحية المطلوبة للوصول إلى هذه الصفحة. يرجى التواصل مع مدير النظام."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},53774:(e,t,a)=>{"use strict";a.d(t,{T:()=>m});var s=a(95155),r=a(17878),l=a(63263),n=a(51190),i=a(39285),d=a(64269),o=a(3998),c=a(11186),u=a(20063);function m(e){let{table:t,className:a,totalRows:m}=e,f=(0,u.useRouter)(),x=(0,u.usePathname)(),p=(0,u.useSearchParams)(),g=void 0!==m,h=t.getState().pagination.pageIndex,b=t.getState().pagination.pageSize,j=g?Math.ceil(m/b):t.getPageCount(),N=g?h>0:t.getCanPreviousPage();g||t.getCanNextPage();let v=g?e=>{let t=new URLSearchParams(p.toString());t.set("page",(e+1).toString()),f.push("".concat(x,"?").concat(t.toString()))}:t.setPageIndex;return(0,s.jsxs)("div",{className:(0,d.cn)("flex flex-col-reverse items-center justify-between gap-4 sm:flex-row sm:gap-6 lg:gap-8",a),children:[(0,s.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," من"," ",g?m:t.getFilteredRowModel().rows.length," صفوف مختارة."]}),(0,s.jsxs)("div",{className:"flex flex-col-reverse items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"صفوف لكل صفحة"}),(0,s.jsxs)(c.l6,{value:"".concat(b),onValueChange:e=>{var a;a=Number(e),g?(e=>{let t=new URLSearchParams(p.toString());t.set("limit",e.toString()),t.set("page","1"),f.push("".concat(x,"?").concat(t.toString()))})(a):t.setPageSize(a)},children:[(0,s.jsx)(c.bq,{className:"h-8 w-[70px]",children:(0,s.jsx)(c.yv,{placeholder:b})}),(0,s.jsx)(c.gC,{side:"top",children:[5,10,15,20,30,50].map(e=>(0,s.jsx)(c.eb,{value:"".concat(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["صفحة ",h+1," من"," ",j]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsxs)(o.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>v(0),disabled:!N,children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(r.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(o.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(l.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(o.$,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(n.A,{className:"h-4 w-4"})]}),(0,s.jsxs)(o.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(i.A,{className:"h-4 w-4"})]})]})]})]})}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},66934:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var s=a(95155),r=a(12115),l=a(30926);let n=(0,l.createServerReference)("00eaf4ca1bba0811cb1b58225d617ed49fc805c0d1",l.callServer,void 0,l.findSourceMapURL,"getDebtsReportData");var i=a(20243),d=a(18332),o=a(7545),c=a(86948),u=a(3998),m=a(11186),f=a(65142),x=a(87270),p=a(64269),g=a(15894),h=a(90043),b=a(20146),j=a(5225),N=a(94107),v=a(90109),y=a(6259),w=a(85897),C=a(76444),S=a(30563),R=a(92273),D=a(53774),T=a(52619),k=a.n(T),A=a(14223),I=a(19056),P=a(11647),U=a(73457);let F=e=>.01>Math.abs(e)?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(Math.abs(e)),_=e=>{let{title:t,usd:a,iqd:r,className:l}=e;return(0,s.jsxs)("div",{className:(0,p.cn)("p-4 bg-muted rounded-lg text-center",l),children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground font-bold",children:t}),(0,s.jsxs)("p",{className:"font-bold font-mono text-lg",children:[F(a)," USD"]}),(0,s.jsxs)("p",{className:"font-bold font-mono text-lg",children:[F(r)," IQD"]})]})};function M(e){let{initialData:t}=e,[a,l]=(0,r.useState)(""),[n,i]=(0,r.useState)("all"),[d,o]=(0,r.useState)("all"),[T,M]=(0,r.useState)(!1),[L,Q]=r.useState([]),z=(0,r.useMemo)(()=>[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,s.jsxs)(u.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["اسم الحساب",(0,s.jsx)(h.A,{className:"ms-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(w.eu,{className:"h-9 w-9",children:[(0,s.jsx)(w.BK,{src:"https://placehold.co/40x40.png?text=".concat(t.original.name.substring(0,1)),"data-ai-hint":"logo"}),(0,s.jsx)(w.q5,{children:t.original.name.substring(0,1)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:t.original.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:t.original.phone})]})]})}},{accessorKey:"accountType",header:"النوع",cell:e=>{let{row:t}=e,a=t.original.accountType;return"both"===a?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(P.E,{variant:"secondary",children:"عميل ومورد"})}):"supplier"===a?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(P.E,{variant:"outline",children:"مورد"})}):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(P.E,{children:"عميل"})})}},{id:"balanceUSD",header:e=>{let{column:t}=e;return(0,s.jsxs)(u.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["الرصيد (USD)",(0,s.jsx)(h.A,{className:"ms-2 h-4 w-4"})]})},accessorFn:e=>e.balanceUSD||0,cell:e=>{let{row:t}=e,a=t.original.balanceUSD||0,r="supplier"===t.original.accountType&&a>0||"client"===t.original.accountType&&a<0,l="client"===t.original.accountType&&a>0||"supplier"===t.original.accountType&&a<0,n="text-foreground";return r&&(n="text-green-600"),l&&(n="text-red-600"),(0,s.jsx)("div",{className:(0,p.cn)("text-center font-mono font-bold",n),children:F(a)})}},{id:"balanceIQD",header:e=>{let{column:t}=e;return(0,s.jsxs)(u.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["الرصيد (IQD)",(0,s.jsx)(h.A,{className:"ms-2 h-4 w-4"})]})},accessorFn:e=>e.balanceIQD||0,cell:e=>{let{row:t}=e,a=t.original.balanceIQD||0,r="supplier"===t.original.accountType&&a>0||"client"===t.original.accountType&&a<0,l="client"===t.original.accountType&&a>0||"supplier"===t.original.accountType&&a<0,n="text-foreground";return r&&(n="text-green-600"),l&&(n="text-red-600"),(0,s.jsx)("div",{className:(0,p.cn)("text-center font-mono font-bold",n),children:F(a)})}},{id:"lastTransaction",header:"آخر حركة",accessorFn:e=>e.lastTransaction,cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-center",children:t.original.lastTransaction?(0,A.GP)((0,I.H)(t.original.lastTransaction),"yyyy-MM-dd"):"-"})}},{id:"actions",header:()=>(0,s.jsx)("div",{className:"text-center",children:"الإجراءات"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)(y.rI,{children:[(0,s.jsx)(y.ty,{asChild:!0,children:(0,s.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(b.A,{})})}),(0,s.jsxs)(y.SQ,{align:"end",children:[(0,s.jsx)(y._2,{asChild:!0,children:(0,s.jsxs)(k(),{href:"/reports/account-statement?accountId=".concat(t.original.id),children:[(0,s.jsx)(j.A,{className:"me-2 h-4 w-4"}),"كشف حساب"]})}),(0,s.jsxs)(y._2,{disabled:!0,children:[(0,s.jsx)(N.A,{className:"me-2 h-4 w-4"}),"تسديد/دفع"]})]})]})})}}],[]),{toast:q}=(0,g.dj)(),H=(0,r.useMemo)(()=>t?t.filter(e=>{var t;if("all"!==n&&e.accountType!==n)return!1;if("all"!==d){let t=e.balanceUSD||0,a="client"===e.accountType&&t<0||"supplier"===e.accountType&&t>0,s="client"===e.accountType&&t>0||"supplier"===e.accountType&&t<0;if("debit"===d&&!a||"credit"===d&&!s)return!1}return(!T||0!==(e.balanceUSD||0)||0!==(e.balanceIQD||0))&&(!a||!!(e.name.toLowerCase().includes(a.toLowerCase())||(null==(t=e.phone)?void 0:t.includes(a))))}):[],[t,a,n,d,T]),E=(0,S.N4)({data:H,columns:z,state:{sorting:L},onSortingChange:Q,getCoreRowModel:(0,R.HT)(),getPaginationRowModel:(0,R.kW)(),getSortedRowModel:(0,R.h5)(),getFilteredRowModel:(0,R.hM)()}),V=(0,r.useMemo)(()=>H.reduce((e,t)=>{let a=t.balanceUSD||0,s=t.balanceIQD||0;return"client"===t.accountType||"both"===t.accountType?(a>0?e.totalCreditUSD+=a:e.totalDebitUSD-=a,s>0?e.totalCreditIQD+=s:e.totalDebitIQD-=s):(a<0?e.totalCreditUSD-=a:e.totalDebitUSD+=a,s<0?e.totalCreditIQD-=s:e.totalDebitIQD+=s),e},{totalDebitUSD:0,totalCreditUSD:0,totalDebitIQD:0,totalCreditIQD:0}),[H]),B=V.totalCreditUSD-V.totalDebitUSD,G=V.totalCreditIQD-V.totalDebitIQD;return(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-start gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.ZB,{className:"font-bold",children:"تقرير الأرصدة النهائية"}),(0,s.jsx)(c.BT,{children:"نظرة شاملة ومباشرة على جميع أرصدة العملاء والموردين. يتم تحديث الأرصدة تلقائيًا مع كل عملية مالية."})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-grow",children:[(0,s.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{placeholder:"بحث بالاسم أو الهاتف...",className:"ps-10",value:a,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(m.l6,{value:n,onValueChange:e=>i(e),children:[(0,s.jsx)(m.bq,{className:"w-full sm:w-[150px]",children:(0,s.jsx)(m.yv,{})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"all",children:"كل الأنواع"}),(0,s.jsx)(m.eb,{value:"client",children:"عملاء فقط"}),(0,s.jsx)(m.eb,{value:"supplier",children:"موردين فقط"})]})]}),(0,s.jsxs)(m.l6,{value:d,onValueChange:e=>o(e),children:[(0,s.jsx)(m.bq,{className:"w-full sm:w-[160px]",children:(0,s.jsx)(m.yv,{})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"all",children:"كل الأرصدة"}),(0,s.jsx)(m.eb,{value:"debit",children:"مطلوب لنا"}),(0,s.jsx)(m.eb,{value:"credit",children:"مطلوب منا"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)(U.S,{id:"hide-zero",checked:T,onCheckedChange:e=>M(!!e)}),(0,s.jsx)(C.J,{htmlFor:"hide-zero",className:"font-bold",children:"إخفاء الأرصدة الصفرية"})]})]})]})}),(0,s.jsxs)(c.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(_,{title:"إجمالي مطلوب لنا (دائنون لنا)",usd:V.totalCreditUSD,iqd:V.totalCreditIQD,className:"border-green-500/50 bg-green-50 dark:bg-green-950/30"}),(0,s.jsx)(_,{title:"إجمالي مطلوب منا (مدينون لنا)",usd:V.totalDebitUSD,iqd:V.totalDebitIQD,className:"border-red-500/50 bg-red-50 dark:bg-red-950/30"}),(0,s.jsx)(_,{title:"صافي الرصيد الإجمالي",usd:B,iqd:G,className:"border-blue-500/50 bg-blue-50 dark:bg-blue-950/30"})]}),(0,s.jsx)("div",{className:"border rounded-lg overflow-x-auto",children:(0,s.jsxs)(x.XI,{children:[(0,s.jsx)(x.A0,{children:E.getHeaderGroups().map(e=>(0,s.jsx)(x.Hj,{children:e.headers.map(e=>(0,s.jsx)(x.nd,{className:"text-center font-bold",children:(0,S.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(x.BF,{children:0===E.getRowModel().rows.length?(0,s.jsx)(x.Hj,{children:(0,s.jsx)(x.nA,{colSpan:z.length,className:"h-24 text-center",children:"لا توجد نتائج تطابق الفلتر."})}):E.getRowModel().rows.map(e=>(0,s.jsx)(x.Hj,{children:e.getVisibleCells().map(e=>(0,s.jsx)(x.nA,{className:"text-center",children:(0,S.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,s.jsx)(D.T,{table:E})]})]})}var L=a(31868);function Q(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),m=(0,r.useCallback)(async()=>{l(!0),u(null);try{let e=await n();t(e.entries)}catch(e){u(e.message)}finally{l(!1)}},[]);return((0,r.useEffect)(()=>{m()},[m]),a)?(0,s.jsx)(i.E,{className:"h-[600px] w-full"}):c?(0,s.jsxs)(d.Fc,{variant:"destructive",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)(d.XL,{children:"حدث خطأ!"}),(0,s.jsx)(d.TN,{children:c})]}):(0,s.jsx)(M,{initialData:e||[],onDataChanged:m})}function z(){return(0,s.jsx)(L.default,{requiredPermission:"reports:debts",children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.E,{className:"h-[600px] w-full"}),children:(0,s.jsx)(Q,{})})})}},73457:(e,t,a)=>{"use strict";a.d(t,{S:()=>d});var s=a(95155),r=a(12115),l=a(38162),n=a(72251),i=a(64269);let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(l.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},73844:(e,t,a)=>{Promise.resolve().then(a.bind(a,66934))},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var s=a(95155),r=a(12115),l=a(10489),n=a(83101),i=a(64269);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,i.cn)(d(),a),...r})});o.displayName=l.b.displayName},85897:(e,t,a)=>{"use strict";a.d(t,{BK:()=>d,eu:()=>i,q5:()=>o});var s=a(95155),r=a(12115),l=a(46591),n=a(64269);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=l.bL.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full object-cover",a),...r})});d.displayName=l._V.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});o.displayName=l.H4.displayName},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-4 sm:p-6 text-right",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg sm:text-xl font-bold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-4 sm:p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-4 sm:p-6 pt-0",a),...r})});u.displayName="CardFooter"},87270:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>d,Gg:()=>o,Hj:()=>c,XI:()=>n,nA:()=>m,nd:()=>u});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});d.displayName="TableBody";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})});o.displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-right align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"}},e=>{e.O(0,[9135,7210,4909,9625,315,5111,4127,9967,783,4223,8994,2619,84,4486,563,9071,4762,8441,1255,7358],()=>e(e.s=73844)),_N_E=e.O()}]);