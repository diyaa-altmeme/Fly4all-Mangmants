(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9335],{6516:(e,t,r)=>{Promise.resolve().then(r.bind(r,96350))},14294:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(12115);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...f}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:n("lucide",d),...f},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...o}=r;return(0,a.createElement)(s,{ref:l,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...o})});return r.displayName="".concat(e),r}},32467:(e,t,r)=>{"use strict";r.d(t,{DX:()=>i,Dc:()=>d,TL:()=>s});var a=r(12115),n=r(94446),l=r(95155);function s(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...l}=e;if(a.isValidElement(r)){var s;let e,i,o=(s=r,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),d=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==a.Fragment&&(d.ref=t?(0,n.t)(t,o):o),a.cloneElement(r,d)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...s}=e,i=a.Children.toArray(n),o=i.find(c);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...s,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,l.jsx)(t,{...s,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var i=s("Slot"),o=Symbol("radix.slottable");function d(e){let t=({children:e})=>(0,l.jsx)(l.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=o,t}function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},57268:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var a=r(12115),n=r(97602),l=r(95155),s="horizontal",i=["horizontal","vertical"],o=a.forwardRef((e,t)=>{var r;let{decorative:a,orientation:o=s,...d}=e,c=(r=o,i.includes(r))?o:s;return(0,l.jsx)(n.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});o.displayName="Separator";var d=o},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l,pY:()=>s});var a=r(2821),n=r(75889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}let s=(e,t,r,a)=>{let n={};return Object.keys(e).map(e=>e.toLowerCase().trim()),r.forEach(t=>{let r,l=null==a?void 0:a[t.id],s=(t.aliases||(null==l?void 0:l.aliases)||[t.label]).map(e=>e.toLowerCase().trim()),i=Array.from(new Set([t.id,t.label,...s].map(e=>e.toLowerCase().trim()))),o=Object.keys(e).find(e=>i.includes(e.toLowerCase().trim()));o&&(r=e[o]),null==r||""===String(r).trim()?n[t.id]=void 0!==t.defaultValue?t.defaultValue:"number"===t.dataType?0:"":"number"===t.dataType?n[t.id]=parseFloat(String(r).trim().replace(/,/g,""))||0:n[t.id]=String(r).trim()}),n}},86259:(e,t,r)=>{"use strict";r.d(t,{Separator:()=>i});var a=r(95155),n=r(12115),l=r(57268),s=r(64269);let i=n.forwardRef((e,t)=>{let{className:r,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(l.b,{ref:t,decorative:i,orientation:n,className:(0,s.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...o})});i.displayName=l.b.displayName},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i,wL:()=>u});var a=r(95155),n=r(12115),l=r(64269);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",r),...n})});s.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-4 sm:p-6 text-right",r),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg sm:text-xl font-bold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-4 sm:p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-4 sm:p-6 pt-0",r),...n})});u.displayName="CardFooter"},92033:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(14294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},94446:(e,t,r)=>{"use strict";r.d(t,{s:()=>s,t:()=>l});var a=r(12115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,a=e.map(e=>{let a=n(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():n(e[t],null)}}}}function s(...e){return a.useCallback(l(...e),e)}},96350:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(95155),n=r(12115),l=r(86948),s=r(14223),i=r(86259),o=r(92033);function d(){let[e,t]=(0,n.useState)(!0),[r,d]=(0,n.useState)([]),[c,u]=(0,n.useState)({revenue:0,expense:0,profit:0});return((0,n.useEffect)(()=>{!async function(){try{let e=await fetch("/api/reports/profit-loss");if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));let t=await e.json();d(t.entries||[]),u(t.totals||{revenue:0,expense:0,profit:0})}catch(e){console.error("Error fetching P&L data:",e)}finally{t(!1)}}()},[]),e)?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(o.A,{className:"animate-spin h-8 w-8 text-muted-foreground"})}):(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"تقرير الأرباح والخسائر"}),(0,a.jsx)(l.BT,{children:"عرض ملخص الإيرادات والمصاريف وصافي الربح."})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 text-center font-bold text-base",children:[(0,a.jsxs)("div",{className:"text-green-600",children:["الإيرادات: ",c.revenue.toFixed(2)," $"]}),(0,a.jsxs)("div",{className:"text-red-600",children:["المصاريف: ",c.expense.toFixed(2)," $"]}),(0,a.jsxs)("div",{className:"text-blue-600",children:["الربح الصافي: ",c.profit.toFixed(2)," $"]})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-muted-foreground border-b",children:[(0,a.jsx)("th",{className:"text-right p-2",children:"التاريخ"}),(0,a.jsx)("th",{className:"text-right p-2",children:"الوصف"}),(0,a.jsx)("th",{className:"text-right p-2",children:"النوع"}),(0,a.jsx)("th",{className:"text-right p-2",children:"المبلغ"})]})}),(0,a.jsx)("tbody",{children:r.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"p-2",children:(0,s.GP)(new Date(e.date),"yyyy-MM-dd")}),(0,a.jsx)("td",{className:"p-2",children:e.description}),(0,a.jsx)("td",{className:"p-2",children:"revenue"===e.type?"إيراد":"مصروف"}),(0,a.jsx)("td",{className:"p-2 font-mono ".concat("revenue"===e.type?"text-green-600":"text-red-600"),children:e.amount.toFixed(2)})]},t))})]})]})})]})})}},97602:(e,t,r)=>{"use strict";r.d(t,{hO:()=>o,sG:()=>i});var a=r(12115),n=r(47650),l=r(32467),s=r(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,l.TL)(`Primitive.${t}`),n=a.forwardRef((e,a)=>{let{asChild:n,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(n?r:t,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function o(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},e=>{e.O(0,[4909,783,4223,8441,1255,7358],()=>e(e.s=6516)),_N_E=e.O()}]);