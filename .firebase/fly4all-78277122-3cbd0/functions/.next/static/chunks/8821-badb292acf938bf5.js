"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8821],{658:(e,s,a)=>{a.d(s,{A:()=>g});var t=a(95155),l=a(12115),r=a(86948),n=a(3998),i=a(76444),d=a(65142),c=a(13630),o=a(22452),m=a(92033),x=a(73180),u=a(15894),h=a(60013),p=a(30940),f=a(86259),j=a(31120);let v=e=>{let{feature:s,onFeatureChange:a}=e;return(0,t.jsxs)("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:s.title,onChange:e=>a({...s,title:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:s.description,onChange:e=>a({...s,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"رابط الصورة"}),(0,t.jsx)(d.p,{value:s.imageUrl,onChange:e=>a({...s,imageUrl:e.target.value})})]})]})};function g(e){var s,a,g,N,b,y,w,C,S,A,R,k,J,z,Z;let{settings:U,onSettingsChanged:M}=e,[L,q]=(0,l.useState)((null==(s=U.theme)?void 0:s.landingPage)||{}),[B,F]=(0,l.useState)(!1),{toast:T}=(0,u.dj)();(0,l.useEffect)(()=>{var e;q((null==(e=U.theme)?void 0:e.landingPage)||{})},[U]);let $=(e,s)=>{q(a=>({...a,[e]:s}))},_=(e,s,a)=>{q((0,h.jM)(t=>{t[e]||(t[e]={}),t[e][s]=a}))},D=(e,s)=>{q((0,h.jM)(a=>{a[e]=s}))},E=(e,s,a)=>{q((0,h.jM)(t=>{var l;(null==(l=t.faqSection)?void 0:l.faqs)&&(t.faqSection.faqs[e][s]=a)}))},I=(e,s,a)=>{q((0,h.jM)(t=>{var l;(null==(l=t.partnersSection)?void 0:l.partners)&&(t.partnersSection.partners[e][s]=a)}))},P=async()=>{F(!0),(await (0,p.X)({theme:{...U.theme,landingPage:L}})).success?(T({title:"تم حفظ إعدادات الواجهة بنجاح"}),M()):T({title:"خطأ",description:"لم يتم حفظ الإعدادات.",variant:"destructive"}),F(!1)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم الهيرو الرئيسي"})}),(0,t.jsx)(r.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان الرئيسي"}),(0,t.jsx)(d.p,{value:L.heroTitle||"",onChange:e=>$("heroTitle",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان الفرعي"}),(0,t.jsx)(d.p,{value:L.heroSubtitle||"",onChange:e=>$("heroSubtitle",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"لون العنوان"}),(0,t.jsx)(d.p,{value:L.heroTitleColor||"",onChange:e=>$("heroTitleColor",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"لون العنوان الفرعي"}),(0,t.jsx)(d.p,{value:L.heroSubtitleColor||"",onChange:e=>$("heroSubtitleColor",e.target.value)})]})]})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"أقسام الميزات الرئيسية"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsx)(v,{feature:L.smartTickets,onFeatureChange:e=>D("smartTickets",e)}),(0,t.jsx)(v,{feature:L.sourceAuditing,onFeatureChange:e=>D("sourceAuditing",e)}),(0,t.jsx)(v,{feature:L.financialManagement,onFeatureChange:e=>D("financialManagement",e)})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم إدارة الديون"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:(null==(a=L.accountStatements)?void 0:a.title)||"",onChange:e=>_("accountStatements","title",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:(null==(g=L.accountStatements)?void 0:g.description)||"",onChange:e=>_("accountStatements","description",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"رابط الصورة"}),(0,t.jsx)(d.p,{value:(null==(N=L.accountStatements)?void 0:N.imageUrl)||"",onChange:e=>_("accountStatements","imageUrl",e.target.value)})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم التحليل المالي"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:(null==(b=L.financialAnalysis)?void 0:b.title)||"",onChange:e=>_("financialAnalysis","title",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:(null==(y=L.financialAnalysis)?void 0:y.description)||"",onChange:e=>_("financialAnalysis","description",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"رابط الصورة"}),(0,t.jsx)(d.p,{value:(null==(w=L.financialAnalysis)?void 0:w.imageUrl)||"",onChange:e=>_("financialAnalysis","imageUrl",e.target.value)})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم الخدمات"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:(null==(C=L.servicesSection)?void 0:C.title)||"",onChange:e=>_("servicesSection","title",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:(null==(S=L.servicesSection)?void 0:S.description)||"",onChange:e=>_("servicesSection","description",e.target.value)})]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم الشركاء"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:(null==(A=L.partnersSection)?void 0:A.title)||"",onChange:e=>_("partnersSection","title",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:(null==(R=L.partnersSection)?void 0:R.description)||"",onChange:e=>_("partnersSection","description",e.target.value)})]}),(0,t.jsx)(f.Separator,{}),((null==(k=L.partnersSection)?void 0:k.partners)||[]).map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-md relative",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"absolute top-1 left-1 h-7 w-7 text-destructive",onClick:()=>{q((0,h.jM)(e=>{var a;(null==(a=e.partnersSection)?void 0:a.partners)&&e.partnersSection.partners.splice(s,1)}))},children:(0,t.jsx)(c.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"اسم الشريك"}),(0,t.jsx)(d.p,{value:e.name,onChange:e=>I(s,"name",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"رابط الشعار"}),(0,t.jsx)(d.p,{value:e.logoUrl,onChange:e=>I(s,"logoUrl",e.target.value)})]})]})]},s)),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{q((0,h.jM)(e=>{e.partnersSection||(e.partnersSection={title:"شركاؤنا",description:"",partners:[]}),e.partnersSection.partners||(e.partnersSection.partners=[]),e.partnersSection.partners.push({name:"شريك جديد",logoUrl:""})}))},children:[(0,t.jsx)(o.A,{className:"me-2 h-4 w-4"})," إضافة شريك"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"قسم الأسئلة الشائعة"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"العنوان"}),(0,t.jsx)(d.p,{value:(null==(J=L.faqSection)?void 0:J.title)||"",onChange:e=>_("faqSection","title",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"الوصف"}),(0,t.jsx)(j.T,{value:(null==(z=L.faqSection)?void 0:z.description)||"",onChange:e=>_("faqSection","description",e.target.value)})]}),(0,t.jsx)(f.Separator,{}),((null==(Z=L.faqSection)?void 0:Z.faqs)||[]).map((e,s)=>(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-md relative",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"absolute top-1 left-1 h-7 w-7 text-destructive",onClick:()=>{q((0,h.jM)(e=>{var a;(null==(a=e.faqSection)?void 0:a.faqs)&&e.faqSection.faqs.splice(s,1)}))},children:(0,t.jsx)(c.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"السؤال"}),(0,t.jsx)(d.p,{value:e.question,onChange:e=>E(s,"question",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(i.J,{children:"الجواب"}),(0,t.jsx)(j.T,{value:e.answer,onChange:e=>E(s,"answer",e.target.value)})]})]},s)),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>{q((0,h.jM)(e=>{e.faqSection||(e.faqSection={title:"الأسئلة الشائعة",description:"",faqs:[]}),e.faqSection.faqs||(e.faqSection.faqs=[]),e.faqSection.faqs.push({question:"سؤال جديد",answer:"جواب جديد"})}))},children:[(0,t.jsx)(o.A,{className:"me-2 h-4 w-4"})," إضافة سؤال"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"تذييل الصفحة"})}),(0,t.jsx)(r.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"رابط صورة الخلفية"}),(0,t.jsx)(d.p,{value:L.footerImageUrl||"",onChange:e=>$("footerImageUrl",e.target.value)})]})})]}),(0,t.jsx)("div",{className:"flex justify-end mt-6",children:(0,t.jsxs)(n.$,{onClick:P,disabled:B,children:[B&&(0,t.jsx)(m.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,t.jsx)(x.A,{className:"me-2 h-4 w-4"}),"حفظ كل التغييرات"]})})]})}},6259:(e,s,a)=>{a.d(s,{M5:()=>h,SQ:()=>p,_2:()=>f,lv:()=>x,mB:()=>j,nV:()=>u,rI:()=>o,ty:()=>m});var t=a(95155),l=a(12115),r=a(47971),n=a(63263),i=a(72251),d=a(75797),c=a(64269);let o=r.bL,m=r.l9;r.YJ,r.ZL;let x=r.Pb;r.z6;let u=l.forwardRef((e,s)=>{let{className:a,inset:l,children:i,...d}=e;return(0,t.jsxs)(r.ZP,{ref:s,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-md px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...d,children:[(0,t.jsx)(n.A,{className:"mr-auto h-4 w-4"}),i]})});u.displayName=r.ZP.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.G5,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});h.displayName=r.G5.displayName;let p=l.forwardRef((e,s)=>{let{className:a,sideOffset:l=4,...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{ref:s,sideOffset:l,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});p.displayName=r.UC.displayName;let f=l.forwardRef((e,s)=>{let{className:a,inset:l,...n}=e;return(0,t.jsx)(r.q7,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...n})});f.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,checked:n,...d}=e;return(0,t.jsxs)(r.H_,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.hN,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName,l.forwardRef((e,s)=>{let{className:a,inset:l,...n}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pr-8",a),...n})}).displayName=r.JU.displayName;let j=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});j.displayName=r.wv.displayName},11647:(e,s,a)=>{a.d(s,{E:()=>i});var t=a(95155);a(12115);var l=a(83101),r=a(64269);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...l}=e;return(0,t.jsx)("span",{className:(0,r.cn)(n({variant:a}),s),...l})}},13496:(e,s,a)=>{a.d(s,{$m:()=>o,As:()=>c,nD:()=>d,ub:()=>m});var t=a(95155),l=a(12115),r=a(58609),n=a(59007),i=a(64269);let d=r.bL,c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.q7,{ref:s,className:(0,i.cn)("border-b",a),...l})});c.displayName="AccordionItem";let o=l.forwardRef((e,s)=>{let{className:a,children:l,...d}=e;return(0,t.jsx)(r.Y9,{className:"flex",children:(0,t.jsxs)(r.l9,{ref:s,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:no-underline data-[state=open]:text-primary [&[data-state=open]>svg]:rotate-180",a),...d,children:[l,(0,t.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});o.displayName=r.l9.displayName;let m=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsx)(r.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,t.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",a),children:l})})});m.displayName=r.UC.displayName},18332:(e,s,a)=>{a.d(s,{Fc:()=>d,TN:()=>o,XL:()=>c});var t=a(95155),l=a(12115),r=a(83101),n=a(64269);let i=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,s)=>{let{className:a,variant:l,...r}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:l}),a),...r})});d.displayName="Alert";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...l})});c.displayName="AlertTitle";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...l})});o.displayName="AlertDescription"},20243:(e,s,a)=>{a.d(s,{E:()=>r});var t=a(95155),l=a(64269);function r(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}},30940:(e,s,a)=>{a.d(s,{X:()=>l});var t=a(30926);let l=(0,t.createServerReference)("40bd3493b6cd183a3f75aa7b2dffe9f325b07a2b9d",t.callServer,void 0,t.findSourceMapURL,"updateSettings")},31120:(e,s,a)=>{a.d(s,{T:()=>n});var t=a(95155),l=a(12115),r=a(64269);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});n.displayName="Textarea"},41052:(e,s,a)=>{a.d(s,{C5:()=>v,MJ:()=>f,Rr:()=>j,eI:()=>h,lR:()=>p,lV:()=>c,zB:()=>m});var t=a(95155),l=a(12115),r=a(32467),n=a(22544),i=a(64269),d=a(76444);let c=n.Op,o=l.createContext({}),m=e=>{let{...s}=e;return(0,t.jsx)(o.Provider,{value:{name:s.name},children:(0,t.jsx)(n.xI,{...s})})},x=()=>{let e=l.useContext(o),s=l.useContext(u),{getFieldState:a,formState:t}=(0,n.xW)(),r=a(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=s;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},u=l.createContext({}),h=l.forwardRef((e,s)=>{let{className:a,...r}=e,n=l.useId();return(0,t.jsx)(u.Provider,{value:{id:n},children:(0,t.jsx)("div",{ref:s,className:(0,i.cn)("space-y-2",a),...r})})});h.displayName="FormItem";let p=l.forwardRef((e,s)=>{let{className:a,...l}=e,{error:r,formItemId:n}=x();return(0,t.jsx)(d.J,{ref:s,className:(0,i.cn)(r&&"text-destructive",a),htmlFor:n,...l})});p.displayName="FormLabel";let f=l.forwardRef((e,s)=>{let{...a}=e,{error:l,formItemId:n,formDescriptionId:i,formMessageId:d}=x();return(0,t.jsx)(r.DX,{ref:s,id:n,"aria-describedby":l?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!l,...a})});f.displayName="FormControl";let j=l.forwardRef((e,s)=>{let{className:a,...l}=e,{formDescriptionId:r}=x();return(0,t.jsx)("p",{ref:s,id:r,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});j.displayName="FormDescription";let v=l.forwardRef((e,s)=>{var a;let{className:l,children:r,...n}=e,{error:d,formMessageId:c}=x(),o=d?String(null!=(a=null==d?void 0:d.message)?a:""):r;return o?(0,t.jsx)("p",{ref:s,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",l),...n,children:o}):null});v.displayName="FormMessage"},44846:(e,s,a)=>{a.d(s,{d:()=>i});var t=a(95155),l=a(12115),r=a(27599),n=a(64269);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.bL,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:s,children:(0,t.jsx)(r.zi,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 rtl:data-[state=checked]:-translate-x-4 rtl:data-[state=unchecked]:-translate-x-0")})})});i.displayName=r.bL.displayName},49732:(e,s,a)=>{a.d(s,{A:()=>C});var t=a(95155),l=a(12115),r=a(3998),n=a(86948),i=a(92033),d=a(5264),c=a(31346),o=a(20583),m=a(64269),x=a(72251),u=a(76444),h=a(65142),p=a(33173),f=a(73180),j=a(60013),v=a(13496),g=a(44846);let N=e=>{let{label:s,value:a,onChange:l}=e;return(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(u.J,{children:s}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{value:a,onChange:e=>l(e.target.value),className:"ps-12 font-mono"}),(0,t.jsx)(h.p,{type:"color",value:"#".concat(a.split(" ").pop()),onChange:e=>{l(e.target.value)},className:"absolute left-1 top-1/2 -translate-y-1/2 h-8 w-10 p-1 bg-transparent border-none cursor-pointer"})]})]})},b=e=>{let{title:s,config:a,onConfigChange:l}=e;return(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(a).map(e=>{let[s,a]=e;return(0,t.jsx)(N,{label:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),value:String(a),onChange:e=>l(s,e)},s)})})},y=e=>{let{loaderConfig:s,onLoaderChange:a}=e;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(u.J,{children:"لون الشريط"}),(0,t.jsx)(h.p,{value:s.color||"",onChange:e=>a({...s,color:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(u.J,{children:"ارتفاع الشريط (px)"}),(0,t.jsx)(h.p,{type:"number",value:s.height||3,onChange:e=>a({...s,height:Number(e.target.value)})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,t.jsx)(g.d,{id:"loader-shadow",checked:s.showShadow,onCheckedChange:e=>a({...s,showShadow:e})}),(0,t.jsx)(u.J,{htmlFor:"loader-shadow",children:"تفعيل تأثير التوهج"})]})]})};function w(e){let{theme:s,onBack:a,onSave:n}=e,{setActiveTheme:c}=(0,o.A)(),[m,x]=(0,l.useState)(s),[u,h]=(0,l.useState)(!1),g=async()=>{h(!0),await n(m),h(!1)},N=(e,s,a)=>{x((0,j.jM)(t=>{t.config[e]||(t.config[e]={}),t.config[e][s]=a}))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(r.$,{variant:"outline",onClick:a,children:[(0,t.jsx)(p.A,{className:"me-2 h-4 w-4"}),"العودة للثيمات"]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center justify-end gap-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),"تخصيص ثيم: ",m.name]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"قم بتعديل قيم الألوان والإعدادات ليناسب علامتك التجارية."})]})]}),(0,t.jsxs)(v.nD,{type:"multiple",defaultValue:["light","dark"],children:[(0,t.jsxs)(v.As,{value:"light",children:[(0,t.jsx)(v.$m,{className:"font-bold text-base",children:"الألوان (الوضع الفاتح)"}),(0,t.jsx)(v.ub,{children:(0,t.jsx)(b,{title:"Light Mode",config:m.config.light,onConfigChange:(e,s)=>N("light",e,s)})})]}),(0,t.jsxs)(v.As,{value:"dark",children:[(0,t.jsx)(v.$m,{className:"font-bold text-base",children:"الألوان (الوضع الداكن)"}),(0,t.jsx)(v.ub,{children:(0,t.jsx)(b,{title:"Dark Mode",config:m.config.dark,onConfigChange:(e,s)=>N("dark",e,s)})})]}),(0,t.jsxs)(v.As,{value:"card",children:[(0,t.jsx)(v.$m,{className:"font-bold text-base",children:"ألوان بطاقات العملاء"}),(0,t.jsx)(v.ub,{children:(0,t.jsx)(b,{title:"Card Colors",config:m.config.card||{},onConfigChange:(e,s)=>N("card",e,s)})})]}),(0,t.jsxs)(v.As,{value:"loader",children:[(0,t.jsx)(v.$m,{className:"font-bold text-base",children:"إعدادات شريط التقدم (Loader)"}),(0,t.jsx)(v.ub,{children:(0,t.jsx)(y,{loaderConfig:m.config.loader||{},onLoaderChange:e=>x((0,j.jM)(m,s=>{s.config.loader=e}))})})]})]}),(0,t.jsx)("div",{className:"flex justify-end mt-6",children:(0,t.jsxs)(r.$,{onClick:g,disabled:u,size:"lg",children:[u&&(0,t.jsx)(i.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,t.jsx)(f.A,{className:"me-2 h-4 w-4"}),"حفظ التعديلات على الثيم"]})})]})}function C(){let{activeTheme:e,setActiveTheme:s,isSaving:a,themeSettings:u,refreshData:h}=(0,o.A)(),[p,f]=(0,l.useState)(null),[j,v]=l.useState(!1);(0,l.useEffect)(()=>{v(!0)},[]);let g=async e=>{h&&await h(),f(null)};return p?(0,t.jsx)(w,{theme:p,onBack:()=>f(null),onSave:g}):(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.ZB,{className:"flex items-center gap-2",children:"الثيمات العامة"}),(0,t.jsx)(n.BT,{children:"اختر الهوية البصرية التي تناسب علامتك التجارية. سيتم تطبيق الثيم على حسابك الشخصي."})]}),a&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),"جاري حفظ اختيارك..."]})]})}),(0,t.jsx)(n.Wu,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.z.map(a=>{let{primary:l,secondary:i,accent:c,background:o}=a.config.light,u=[l,i,c,o].filter(Boolean),h=j&&a.id===e.id;return(0,t.jsxs)(n.Zp,{className:(0,m.cn)("cursor-pointer transition-all flex flex-col hover:shadow-lg",h?"border-primary ring-2 ring-primary/50":"hover:border-primary/50"),onClick:()=>s(a.id),children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(n.ZB,{className:"text-base",children:a.name}),h&&(0,t.jsx)(x.A,{className:"h-5 w-5 text-primary"})]}),(0,t.jsx)(n.BT,{className:"text-xs",children:a.description})]}),(0,t.jsx)(n.Wu,{className:"flex-grow space-y-3",children:(0,t.jsx)("div",{className:"flex h-8 w-full gap-1",children:u.map((e,s)=>(0,t.jsx)("div",{className:"h-full w-full rounded",style:{backgroundColor:"hsl(".concat(e,")")}},s))})}),(0,t.jsx)(n.wL,{className:"p-3",children:(0,t.jsxs)(r.$,{variant:"secondary",size:"sm",className:"w-full",onClick:e=>{e.stopPropagation(),f(a)},children:[(0,t.jsx)(d.A,{className:"me-2 h-4 w-4"}),"تخصيص"]})})]},a.id)})})]})}},51834:(e,s,a)=>{a.d(s,{Cf:()=>u,Es:()=>p,HM:()=>m,L3:()=>f,c7:()=>h,lG:()=>d,rr:()=>j,zM:()=>c});var t=a(95155),l=a(12115),r=a(89511),n=a(26615),i=a(64269);let d=r.bL,c=r.l9,o=r.ZL,m=r.bm,x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});x.displayName=r.hJ.displayName;let u=l.forwardRef((e,s)=>{let{className:a,children:l,showCloseButton:d=!0,...c}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(r.UC,{ref:s,className:(0,i.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),onOpenAutoFocus:e=>e.preventDefault(),...c,children:[l,d&&(0,t.jsxs)(r.bm,{className:"absolute left-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground bg-muted hover:bg-muted/80",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.UC.displayName;let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-right",s),...a})};h.displayName="DialogHeader";let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 rtl:space-x-reverse",s),...a})};p.displayName="DialogFooter";let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});f.displayName=r.hE.displayName;let j=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});j.displayName=r.VY.displayName},65142:(e,s,a)=>{a.d(s,{p:()=>n});var t=a(95155),l=a(12115),r=a(64269);let n=l.forwardRef((e,s)=>{let{className:a,type:l,...n}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...n})});n.displayName="Input"},76444:(e,s,a)=>{a.d(s,{J:()=>c});var t=a(95155),l=a(12115),r=a(10489),n=a(83101),i=a(64269);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.b,{ref:s,className:(0,i.cn)(d(),a),...l})});c.displayName=r.b.displayName},78236:(e,s,a)=>{a.d(s,{A:()=>h});var t=a(95155),l=a(12115),r=a(86948),n=a(3998),i=a(76444),d=a(65142),c=a(92033),o=a(73180),m=a(15894),x=a(30940),u=a(31120);function h(e){var s;let{settings:a,onSettingsChanged:h}=e,[p,f]=(0,l.useState)((null==(s=a.theme)?void 0:s.invoice)||{}),[j,v]=(0,l.useState)(!1),{toast:g}=(0,m.dj)();(0,l.useEffect)(()=>{var e;f((null==(e=a.theme)?void 0:e.invoice)||{})},[a]);let N=(e,s)=>{f(a=>({...a,[e]:s}))},b=async()=>{v(!0),(await (0,x.X)({theme:{...a.theme,invoice:p}})).success?(g({title:"تم حفظ إعدادات الفاتورة بنجاح"}),h()):g({title:"خطأ",description:"لم يتم حفظ الإعدادات.",variant:"destructive"}),v(!1)};return(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{children:[(0,t.jsx)(r.ZB,{children:"إعدادات الفواتير والتقارير المطبوعة"}),(0,t.jsx)(r.BT,{children:"تخصيص معلومات الشركة التي تظهر في رأس وتذييل الفواتير والتقارير عند طباعتها."})]}),(0,t.jsx)(r.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"اسم الشركة"}),(0,t.jsx)(d.p,{value:p.companyName||"",onChange:e=>N("companyName",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"رقم الهاتف"}),(0,t.jsx)(d.p,{value:p.companyPhone||"",onChange:e=>N("companyPhone",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5 md:col-span-2",children:[(0,t.jsx)(i.J,{children:"عنوان الشركة"}),(0,t.jsx)(d.p,{value:p.companyAddress||"",onChange:e=>N("companyAddress",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5 md:col-span-2",children:[(0,t.jsx)(i.J,{children:"الموقع الإلكتروني"}),(0,t.jsx)(d.p,{value:p.companyWeb||"",onChange:e=>N("companyWeb",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"لون ترويسة الجدول"}),(0,t.jsx)(d.p,{type:"color",value:p.headerColor||"#f3f4f6",onChange:e=>N("headerColor",e.target.value),className:"p-1 h-10"})]}),(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)(i.J,{children:"لون عنوان الفاتورة"}),(0,t.jsx)(d.p,{type:"color",value:p.titleColor||"#333333",onChange:e=>N("titleColor",e.target.value),className:"p-1 h-10"})]}),(0,t.jsxs)("div",{className:"space-y-1.5 md:col-span-2",children:[(0,t.jsx)(i.J,{children:"نص التذييل"}),(0,t.jsx)(u.T,{value:p.footerText||"",onChange:e=>N("footerText",e.target.value)})]})]})}),(0,t.jsx)(r.wL,{className:"justify-end",children:(0,t.jsxs)(n.$,{onClick:b,disabled:j,children:[j&&(0,t.jsx)(c.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,t.jsx)(o.A,{className:"me-2 h-4 w-4"}),"حفظ الإعدادات"]})})]})}},86259:(e,s,a)=>{a.d(s,{Separator:()=>i});var t=a(95155),l=a(12115),r=a(57268),n=a(64269);let i=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:i=!0,...d}=e;return(0,t.jsx)(r.b,{ref:s,decorative:i,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...d})});i.displayName=r.b.displayName},93773:(e,s,a)=>{a.d(s,{A:()=>V});var t=a(95155),l=a(12115),r=a(86948),n=a(3998),i=a(17482),d=a(58772),c=a(20243),o=a(30926);let m=(0,o.createServerReference)("7fdebe13155335bb556251f1e5032d05ae0282193c",o.callServer,void 0,o.findSourceMapURL,"getSiteAssets"),x=(0,o.createServerReference)("70598e5955a51775f50fd6a8ba86c5acabb4a2e439",o.callServer,void 0,o.findSourceMapURL,"assignAsset");var u=a(15239),h=a(6259),p=a(28263),f=a(72251),j=a(81288),v=a(13630),g=a(11647),N=a(15894),b=a(14223),y=a(98053),w=a(92033),C=a(64269);let S=(0,o.createServerReference)("40a9f9da31716ed10fd563ed03c0c1260b08d34239",o.callServer,void 0,o.findSourceMapURL,"permanentDeleteAsset");function A(e){let{asset:s,onAssetDeleted:a,children:r}=e,[n,i]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),{toast:o}=(0,N.dj)(),m=async()=>{c(!0);let e=await S(s);e.success?(o({title:"تم حذف الأصل بنجاح"}),a(),i(!1)):o({title:"خطأ",description:e.error||"حدث خطأ أثناء حذف الأصل.",variant:"destructive"}),c(!1)};return(0,t.jsxs)(y.Lt,{open:n,onOpenChange:i,children:[(0,t.jsx)(y.tv,{asChild:!0,children:r}),(0,t.jsxs)(y.EO,{children:[(0,t.jsxs)(y.wd,{children:[(0,t.jsx)(y.r7,{children:"هل أنت متأكد تمامًا؟"}),(0,t.jsx)(y.$v,{children:"هذا الإجراء لا يمكن التراجع عنه. سيؤدي هذا إلى حذف الأصل بشكل دائم من الخادم."})]}),(0,t.jsxs)(y.ck,{children:[(0,t.jsx)(y.Zr,{children:"إلغاء"}),(0,t.jsxs)(y.Rx,{onClick:m,disabled:d,className:(0,C.cn)("bg-destructive text-destructive-foreground hover:bg-destructive/90"),children:[d?(0,t.jsx)(w.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,t.jsx)(v.A,{className:"me-2 h-4 w-4"}),"نعم، قم بالحذف النهائي"]})]})]})]})}let R=[{path:"theme.assets.sidebar_logo",label:"شعار الشريط الجانبي"},{path:"theme.assets.invoice_logo",label:"شعار الفواتير"}];function k(e){var s;let{asset:a,onDataChange:l}=e,{toast:d}=(0,N.dj)(),c=async e=>{let s=await x(a.id,a.fullPath,e);s.success?(d({title:"تم تعيين الأصل بنجاح"}),l()):d({title:"خطأ",description:s.error,variant:"destructive"})};return(0,t.jsxs)(r.Zp,{className:"group overflow-hidden",children:[(0,t.jsx)(r.Wu,{className:"p-0",children:(0,t.jsxs)("div",{className:"aspect-video w-full relative",children:[(0,t.jsx)(u.default,{src:a.url,alt:a.name,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 20vw"}),(0,t.jsxs)(h.rI,{children:[(0,t.jsx)(h.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"secondary",size:"icon",className:"absolute top-2 right-2 h-7 w-7",children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(h.SQ,{children:[(0,t.jsxs)(h.lv,{children:[(0,t.jsxs)(h.nV,{children:[(0,t.jsx)(i.A,{className:"me-2 h-4 w-4"}),"تعيين إلى..."]}),(0,t.jsxs)(h.M5,{children:[R.map(e=>(0,t.jsxs)(h._2,{onClick:()=>c(e.path),children:[a.assignment===e.path&&(0,t.jsx)(f.A,{className:"me-2 h-4 w-4"}),e.label]},e.path)),(0,t.jsx)(h.mB,{}),(0,t.jsx)(h._2,{onClick:()=>c(null),className:"text-destructive focus:text-destructive",children:"إلغاء التعيين"})]})]}),(0,t.jsxs)(h._2,{onSelect:()=>{navigator.clipboard.writeText(a.url),d({title:"تم نسخ الرابط"})},children:[(0,t.jsx)(j.A,{className:"me-2 h-4 w-4"})," نسخ الرابط"]}),(0,t.jsx)(h.mB,{}),(0,t.jsx)(A,{asset:a,onAssetDeleted:l,children:(0,t.jsxs)(h._2,{onSelect:e=>e.preventDefault(),className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(v.A,{className:"me-2 h-4 w-4"})," حذف"]})})]})]}),a.assignment&&(0,t.jsx)(g.E,{className:"absolute bottom-2 right-2",children:(null==(s=R.find(e=>e.path===a.assignment))?void 0:s.label)||a.assignment})]})}),(0,t.jsxs)(r.wL,{className:"p-3 flex flex-col items-start text-xs",children:[(0,t.jsx)("p",{className:"font-semibold text-sm truncate w-full",children:a.name}),(0,t.jsxs)("div",{className:"text-muted-foreground w-full flex justify-between",children:[(0,t.jsxs)("span",{children:[((a.size||0)/1024).toFixed(1)," KB"]}),(0,t.jsx)("span",{children:(0,b.GP)(new Date(a.uploadedAt),"yyyy-MM-dd")})]})]})]})}var J=a(51834),z=a(26615),Z=a(73180),U=a(22544),M=a(54879),L=a(66942),q=a(11636),B=a(41052),F=a(65142);let T=(0,o.createServerReference)("40a1f99d595b1bc39c60f840e295836ec83118c059",o.callServer,void 0,o.findSourceMapURL,"addSiteAsset");var $=a(24675),_=a(23451),D=a(11929),E=a(14585);let I=M.Ik({name:M.Yj().min(3,"اسم الأصل مطلوب."),file:M.Nl(File).refine(e=>e.size>0,"الملف مطلوب.")});function P(e){let{onUploadSuccess:s,children:a}=e,[r,i]=(0,l.useState)(!1),{toast:c}=(0,N.dj)(),{user:o}=(0,_.A)(),m=(0,U.mN)({resolver:(0,L.u)(I)}),{handleSubmit:x,control:h,setValue:p,watch:f,formState:{isSubmitting:j}}=m,v=f("file"),g=l.useCallback(e=>{e.length>0&&p("file",e[0],{shouldValidate:!0})},[p]),{getRootProps:b,getInputProps:y,isDragActive:C}=(0,q.VB)({onDrop:g,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".svg"]},multiple:!1}),S=async e=>{if(!o)return void c({title:"خطأ",description:"يجب أن تكون مسجلاً للدخول لرفع الملفات.",variant:"destructive"});try{let a=(0,$.c7)(E.y),t=(0,D.A)(),l="site-assets/".concat(t,"-").concat(e.file.name),r=(0,$.KR)(a,l),n=await (0,$.D)(r,e.file),d=await (0,$.qk)(n.ref),x={id:t,name:e.name,url:d,fileName:e.file.name,fileType:e.file.type,size:e.file.size,uploadedAt:new Date().toISOString(),uploadedBy:o.uid,assignment:null,fullPath:l},u=await T(x);if(u.success)c({title:"تم رفع الأصل بنجاح"}),s(),i(!1),m.reset();else throw Error(u.error)}catch(e){c({title:"خطأ في الرفع",description:e.message,variant:"destructive"})}};return(0,t.jsxs)(J.lG,{open:r,onOpenChange:i,children:[(0,t.jsx)(J.zM,{asChild:!0,children:a}),(0,t.jsxs)(J.Cf,{children:[(0,t.jsxs)(J.c7,{children:[(0,t.jsx)(J.L3,{children:"رفع أصل جديد"}),(0,t.jsx)(J.rr,{children:"ارفع صورة أو شعارًا لاستخدامه في أجزاء مختلفة من النظام."})]}),(0,t.jsx)(B.lV,{...m,children:(0,t.jsxs)("form",{onSubmit:x(S),className:"space-y-4",children:[(0,t.jsx)(B.zB,{control:h,name:"name",render:e=>{let{field:s}=e;return(0,t.jsxs)(B.eI,{children:[(0,t.jsx)(B.lR,{children:"اسم الأصل"}),(0,t.jsx)(B.MJ,{children:(0,t.jsx)(F.p,{placeholder:"مثال: شعار الفاتورة الرئيسي",...s})}),(0,t.jsx)(B.C5,{})]})}}),(0,t.jsx)(B.zB,{control:h,name:"file",render:e=>{let{field:s}=e;return(0,t.jsxs)(B.eI,{children:[(0,t.jsx)(B.lR,{children:"الملف"}),(0,t.jsxs)("div",{...b(),className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md cursor-pointer",children:[(0,t.jsx)("input",{...y(),id:"asset-file-upload"}),v?(0,t.jsxs)("div",{className:"relative w-40 h-40",children:[(0,t.jsx)(u.default,{src:URL.createObjectURL(v),alt:"Preview",layout:"fill",objectFit:"contain",className:"rounded-md"}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-destructive text-destructive-foreground",onClick:e=>{e.stopPropagation(),p("file",null)},children:(0,t.jsx)(z.A,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:"space-y-1 text-center",children:[(0,t.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:C?"أفلت الملف هنا...":"اسحب وأفلت الملف هنا، أو انقر للاختيار"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF, SVG up to 2MB"})]})]}),(0,t.jsx)(B.C5,{})]})}}),(0,t.jsx)(J.Es,{children:(0,t.jsxs)(n.$,{type:"submit",disabled:j,children:[j&&(0,t.jsx)(w.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,t.jsx)(Z.A,{className:"me-2 h-4 w-4"}),"حفظ ورفع"]})})]})})]})]})}let W=e=>{let{label:s,description:a,assetUrl:l,onAssign:d,assignmentPath:c,allAssets:o,onUnassign:m}=e;return(0,t.jsxs)(r.Zp,{className:"overflow-hidden shadow-sm",children:[(0,t.jsxs)(r.aR,{className:"flex flex-row items-start gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-muted rounded-md",children:(0,t.jsx)(i.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.ZB,{className:"text-base",children:s}),(0,t.jsx)(r.BT,{className:"text-xs",children:a})]})]}),(0,t.jsx)(r.Wu,{children:(0,t.jsx)("div",{className:"aspect-video w-full relative rounded-md border bg-muted/30 overflow-hidden flex items-center justify-center",children:l?(0,t.jsx)(u.default,{src:l,alt:s,fill:!0,className:"object-contain"}):(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"غير محدد"})})}),(0,t.jsxs)(r.wL,{className:"p-3 bg-muted/30 border-t flex justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>m(c),disabled:!l,children:"إلغاء التعيين"}),(0,t.jsxs)(h.rI,{children:[(0,t.jsx)(h.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"secondary",size:"sm",children:"تغيير الصورة"})}),(0,t.jsx)(h.SQ,{children:o.map(e=>(0,t.jsx)(h._2,{onClick:()=>d(e,c),children:e.name},e.id))})]})]})]})};function V(e){let{settings:s,onSettingsChanged:a}=e,[o,u]=(0,l.useState)([]),[h,p]=(0,l.useState)(!0),{toast:f}=(0,N.dj)(),j=(0,l.useCallback)(async()=>{p(!0),m().then(u).finally(()=>p(!1))},[]);(0,l.useEffect)(()=>{j()},[j]);let v=async(e,s)=>{let t=await x(e.id,e.fullPath,s);t.success?(f({title:"تم تعيين الأصل بنجاح"}),a()):f({title:"خطأ",description:t.error,variant:"destructive"})},g=async e=>{let s=await x("","",null);s.success?(f({title:"تم إلغاء تعيين الأصل"}),a()):f({title:"خطأ",description:s.error,variant:"destructive"})};return(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{className:"flex flex-row justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"h-5 w-5"}),"إدارة أصول الموقع"]}),(0,t.jsx)(r.BT,{children:"ارفع وأدر الشعارات والأصول الأخرى المستخدمة في النظام."})]}),(0,t.jsx)(P,{onUploadSuccess:j,children:(0,t.jsxs)(n.$,{variant:"outline",children:[(0,t.jsx)(d.A,{className:"me-2 h-4 w-4"}),"رفع أصل جديد"]})})]}),(0,t.jsxs)(r.Wu,{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{id:"theme.assets.sidebar_logo",label:"شعار الشريط الجانبي",description:"يظهر في أعلى الشريط الجانبي"},{id:"theme.assets.invoice_logo",label:"شعار الفواتير والتقارير",description:"يظهر في ترويسة التقارير المطبوعة"}].map(e=>{let a=e.id.split("."),l=s;for(let e of a)if(void 0===(l=null==l?void 0:l[e]))break;let r="string"==typeof l?l:null;return(0,t.jsx)(W,{label:e.label,description:e.description,assetUrl:r,onAssign:v,onUnassign:()=>g(e.id),assignmentPath:e.id,allAssets:o},e.id)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:"مكتبة الوسائط"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"جميع الأصول التي تم رفعها. يمكنك تعيين أي منها لأحد الأقسام المخصصة أعلاه."}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:h?[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(c.E,{className:"aspect-video w-full rounded-lg"},s)):o.map(e=>(0,t.jsx)(k,{asset:e,onDataChange:j},e.id))})]})]})]})}},96133:(e,s,a)=>{a.d(s,{m:()=>l});var t=a(30926);let l=(0,t.createServerReference)("7fe3cedf8b5b39f6ca6561f08402f1ad7a82ecff97",t.callServer,void 0,t.findSourceMapURL,"getSettings")},98053:(e,s,a)=>{a.d(s,{$v:()=>f,EO:()=>x,Lt:()=>d,Rx:()=>j,Zr:()=>v,ck:()=>h,r7:()=>p,tv:()=>c,wd:()=>u});var t=a(95155),l=a(12115),r=a(35646),n=a(64269),i=a(3998);let d=r.bL,c=r.l9,o=r.ZL,m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:s})});m.displayName=r.hJ.displayName;let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsx)(r.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});x.displayName=r.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};u.displayName="AlertDialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="AlertDialogFooter";let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold",a),...l})});p.displayName=r.hE.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=r.VY.displayName;let j=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.rc,{ref:s,className:(0,n.cn)((0,i.r)(),a),...l})});j.displayName=r.rc.displayName;let v=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.ZD,{ref:s,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});v.displayName=r.ZD.displayName}}]);