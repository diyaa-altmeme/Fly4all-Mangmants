(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4762,5105],{1272:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2546:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("SquareUser",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]])},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>c});var s=r(95155),a=r(12115),i=r(32467),n=r(83101),l=r(64269);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-bold ring-offset-background transition-transform transform-gpu hover:-translate-y-0.5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",accent:"bg-accent text-accent-foreground shadow-md hover:bg-accent/90"},size:{default:"h-10 px-4 py-2 [&_svg]:size-4",sm:"h-9 rounded-md px-3 [&_svg]:size-4",lg:"h-11 rounded-lg px-8 [&_svg]:size-5",icon:"h-10 w-10 [&_svg]:size-5"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:o=!1,...d}=e,u=o?i.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:a,size:n,className:r})),ref:t,...d})});o.displayName="Button"},10193:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]])},12941:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},14585:(e,t,r)=>{"use strict";let s,a,i;r.d(t,{db:()=>i,j:()=>a,y:()=>s});var n=r(52078),l=r(19708),c=r(81328);s=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)({apiKey:"AIzaSyCtlF3onBhtwg0Hh3iOOEjygi9mj81wxrA",authDomain:"fly4all-78277122-3cbd0.firebaseapp.com",projectId:"fly4all-78277122-3cbd0",storageBucket:"fly4all-78277122-3cbd0.firebasestorage.app",messagingSenderId:"108505683067",appId:"1:108505683067:web:3ab7755349630154e77ede"}),a=(0,c.xI)(s),i=(0,l.aU)(s)},15894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var s=r(12115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],c={toasts:[]};function o(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function d(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:r});return t.variant||(t.variant="default"),o({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},19940:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(95155),a=r(12115),i=r(3998),n=r(51834),l=r(22452),c=r(93685),o=r(5470),d=r(92033);function u(e){let{onBookingAdded:t}=e,[r,u]=(0,a.useState)(!1),{data:m,loaded:h}=(0,o.Z)();return(0,s.jsxs)(n.lG,{open:r,onOpenChange:u,children:[(0,s.jsx)(n.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{children:[(0,s.jsx)(l.A,{className:"me-2 h-4 w-4"})," إضافة طلب فيزا"]})}),(0,s.jsxs)(n.Cf,{className:"sm:max-w-4xl p-0",children:[(0,s.jsxs)(n.c7,{className:"bg-primary text-primary-foreground p-4 rounded-t-lg",children:[(0,s.jsx)(n.L3,{children:"إضافة طلب فيزا جديد"}),(0,s.jsx)(n.rr,{className:"text-primary-foreground/80",children:"أدخل جميع تفاصيل طلب الفيزا هنا."})]}),(0,s.jsx)("div",{className:"max-h-[80vh] overflow-y-auto p-6",children:h?(0,s.jsx)(c.A,{onBookingAdded:e=>{t(e),u(!1)}}):(0,s.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,s.jsx)(d.A,{className:"animate-spin h-8 w-8"})})})]})]})}},23451:(e,t,r)=>{"use strict";r.d(t,{O:()=>y,A:()=>g});var s=r(95155),a=r(12115),i=r(81328),n=r(19708),l=r(14585),c=r(30926);let o=(0,c.createServerReference)("7faf63d9d8686c0ff053833c82fd60b3e9c6fa0bff",c.callServer,void 0,c.findSourceMapURL,"getCurrentUserFromSession");var d=r(25990);let u=(0,c.createServerReference)("4085aac590f12a4a641b5bc7fff47d5353af49510e",c.callServer,void 0,c.findSourceMapURL,"signInAsUser"),m=(0,c.createServerReference)("00454095f373f8afcf3cd8b88a3e9643ba6181edb6",c.callServer,void 0,c.findSourceMapURL,"logoutUser");var h=r(20063),p=r(38220),x=r(15894);let f=(0,a.createContext)(void 0);function y(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[y,g]=(0,a.useState)(!0),[v,b]=(0,a.useState)("");(0,h.useRouter)(),(0,h.usePathname)();let[j,w]=(0,a.useState)(0),{toast:N}=(0,x.dj)(),k=a.useRef(Date.now()),A=(0,a.useCallback)(async()=>{try{let e=await o();c(e)}catch(e){console.error("Failed to revalidate user session:",e),c(null)}},[]);(0,a.useEffect)(()=>{(async()=>{try{let e=await o();e&&c(e)}catch(e){console.error("Auth initialization error:",e),c(null)}finally{g(!1)}})()},[]),(0,a.useEffect)(()=>{if(!r||!("uid"in r))return void w(0);let e=(0,n.P)((0,n.rJ)(l.db,"userChats/".concat(r.uid,"/summaries"))),t=(0,n.aQ)(e,e=>{let t=0,s=Date.now();e.docChanges().forEach(e=>{if("modified"===e.type){let t=e.doc.data();t.lastMessage&&t.lastMessage.senderId!==r.uid&&s-k.current>3e3&&(N({title:"رسالة جديدة من ".concat(t.otherMemberName),description:t.lastMessage.text}),k.current=s)}}),e.forEach(e=>{t+=e.data().unreadCount||0}),w(t)});return()=>t()},[r,N]);let S=async(e,t)=>{g(!0),b("");try{let r=await (0,i.x9)(l.j,e,t),s=await (0,i.p9)(r.user,!0),a=await (0,d.L)(s);if(a.error||!a.success||!a.user)throw Error(a.error||"Failed to create session or retrieve user data.");return c(a.user),{success:!0}}catch(t){console.error("Sign in failed:",t);let e="An unexpected error occurred.";if(t.code)switch(t.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":e="البريد الإلكتروني أو كلمة المرور غير صحيحة.";break;case"auth/invalid-email":e="صيغة البريد الإلكتروني غير صحيحة.";break;default:e=t.message}else e=t.message;return b(e),{success:!1,error:e}}finally{g(!1)}},C=async e=>{try{let{success:t,customToken:r,error:s}=await u(e);if(t&&r){await (0,i.p)(l.j,r);let e=await (0,i.p9)(l.j.currentUser,!0),t=await (0,d.L)(e);if(t.error||!t.user)throw Error(t.error||"Failed to establish session for user.");c(t.user)}else throw Error(s||"Failed to get custom token.")}catch(t){console.error("Sign in as user ".concat(e," failed:"),t)}},I=async()=>{g(!0),await (0,i.CI)(l.j),await m(),c(null),window.location.href="/"};return(0,s.jsx)(f.Provider,{value:{user:r,loading:y,signIn:S,signOut:I,hasPermission:e=>!!r&&(!("isClient"in r)||!r.isClient)&&(0,p._m)(r,e),signInAsUser:C,revalidateUser:A,unreadChatCount:j,error:v},children:t})}function g(){let e=(0,a.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},23639:(e,t,r)=>{"use strict";r.d(t,{j:()=>S});var s=r(95155),a=r(12115),i=r(30848),n=r(92033),l=r(72251),c=r(33173),o=r(36204),d=r(64269),u=r(3998),m=r(41808),h=r(90109);r(51834);let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.uB,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});p.displayName=m.uB.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(m.uB.Input,{ref:t,className:(0,d.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});x.displayName=m.uB.Input.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.uB.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});f.displayName=m.uB.List.displayName;let y=a.forwardRef((e,t)=>(0,s.jsx)(m.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));y.displayName=m.uB.Empty.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.uB.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});g.displayName=m.uB.Group.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.uB.Separator,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-border",r),...a})}).displayName=m.uB.Separator.displayName;let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.uB.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-primary aria-selected:text-primary-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",r),...a})});v.displayName=m.uB.Item.displayName;var b=r(26333),j=r(50732),w=r(30926);w.callServer,w.findSourceMapURL;var N=r(5470),k=r(11647);let A=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"py-1 px-2 text-xs text-center text-muted-foreground bg-muted/50 border-t",children:t})};function S(e){let{searchAction:t,options:r,value:m,onValueChange:h,placeholder:w,disabled:S=!1,includeInactive:C=!1}=e,[I,M]=a.useState(!1),[P,T]=a.useState(""),[E,O]=a.useState(!1);(0,j.d)(P,400);let[R,D]=a.useState(0),{data:_,loaded:F}=(0,N.Z)(),z=a.useMemo(()=>{if(r)return r;if(!F)return[];let e=e=>"".concat(e.name).concat(e.code?" (".concat(e.code,")"):""),s=[];if(F)switch(t){case"clients":s=(_.clients||[]).filter(e=>"client"===e.relationType||"both"===e.relationType).map(t=>({value:t.id,label:e(t),relationType:t.relationType,paymentType:t.paymentType}));break;case"suppliers":s=(_.suppliers||[]).filter(e=>"supplier"===e.relationType||"both"===e.relationType).map(t=>({value:t.id,label:e(t),relationType:t.relationType,paymentType:t.paymentType}));break;case"users":s=(_.users||[]).map(e=>({value:e.uid,label:e.name,email:e.email}));break;case"boxes":s=(_.boxes||[]).map(e=>({value:e.id,label:e.name}));break;default:s=[...(_.clients||[]).map(t=>({value:t.id,label:e(t),relationType:t.relationType,paymentType:t.paymentType})),...(_.suppliers||[]).map(t=>({value:t.id,label:e(t),relationType:t.relationType,paymentType:t.paymentType})),...(_.boxes||[]).map(e=>({value:e.id,label:"صندوق: ".concat(e.name)}))]}return s.sort((e,t)=>(t.useCount||0)-(e.useCount||0))},[r,_,F,t]),L=a.useMemo(()=>z.find(e=>(null==e?void 0:e.value)===m),[z,m]),B=e=>{let t=U.find(t=>t.value.toLowerCase()===e.toLowerCase());h(t?t.value:""),T(""),M(!1)},U=a.useMemo(()=>{if(!P)return D(0),z;let e=P.toLowerCase(),t=z.filter(t=>t.label.toLowerCase().includes(e)||t.arabicName&&t.arabicName.toLowerCase().includes(e)||t.city&&t.city.toLowerCase().includes(e)||t.email&&t.email.toLowerCase().includes(e));return D(0),t},[z,P]),V=a.useMemo(()=>{let e=10*R;return U.slice(e,e+10)},[U,R,10]),G=Math.ceil(U.length/10),K=null==r?void 0:r.some(e=>e.country&&e.city);return(0,s.jsxs)(b.AM,{open:I,onOpenChange:M,children:[(0,s.jsx)(b.Wv,{asChild:!0,children:(0,s.jsxs)(u.$,{variant:"outline",role:"combobox","aria-expanded":I,className:"w-full justify-between h-8",disabled:S,children:[(0,s.jsx)("span",{className:(0,d.cn)("truncate",!L&&"text-muted-foreground"),children:L?K?L.value:L.label:w||"Select..."}),(0,s.jsx)(i.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(b.hl,{className:"min-w-[var(--radix-popover-trigger-width)] w-auto p-0",children:(0,s.jsxs)(p,{shouldFilter:!1,children:[(0,s.jsx)(x,{placeholder:w||"بحث...",value:P,onValueChange:T}),(0,s.jsxs)(f,{children:[E&&(0,s.jsx)("div",{className:"p-2 flex justify-center",children:(0,s.jsx)(n.A,{className:"h-5 w-5 animate-spin"})}),!E&&0===V.length&&(0,s.jsx)(y,{children:"لا توجد نتائج."}),(0,s.jsx)(g,{children:V.map((e,t)=>(0,s.jsx)(v,{value:e.value,onSelect:B,className:(0,d.cn)("flex justify-between items-center",K?"p-2":""),children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex-grow text-right",children:[(0,s.jsx)("p",{className:"font-bold text-sm",children:e.arabicName||e.city}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.arabicCountry||e.country})]}),(0,s.jsx)(k.E,{variant:"secondary",className:"font-mono text-sm px-2 py-1 ml-3",children:e.value})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.A,{className:(0,d.cn)("mr-2 h-4 w-4",m===e.value?"opacity-100":"opacity-0")}),(0,s.jsx)("span",{children:e.label})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.paymentType&&(0,s.jsx)(k.E,{variant:"outline",children:(e=>{switch(e){case"cash":return"نقدي";case"credit":return"آجل";default:return""}})(e.paymentType)}),e.relationType&&(0,s.jsx)(k.E,{variant:"secondary",children:(e=>{switch(e){case"client":return"عميل";case"supplier":return"مورد";case"both":return"عميل ومورد";default:return""}})(e.relationType)})]})]})},"".concat(e.value,"-").concat(t)))})]}),U.length>10&&(0,s.jsx)(A,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>D(e=>Math.max(0,e-1)),disabled:0===R,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{children:["صفحة ",R+1," من ",G]}),(0,s.jsx)(u.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>D(e=>Math.min(G-1,e+1)),disabled:R>=G-1,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})})]})})]})}},25990:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var s=r(30926);let a=(0,s.createServerReference)("40fc6757a7ed8ba6cf86a7bf30e6bf0934f153f439",s.callServer,void 0,s.findSourceMapURL,"loginUser")},32810:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]])},38220:(e,t,r)=>{"use strict";r.d(t,{Mh:()=>s,_m:()=>a});let s=[{id:"dashboard",name:"لوحة التحكم",permissions:[{id:"dashboard:read",name:"عرض"}]},{id:"bookings",name:"حجوزات الطيران",permissions:[{id:"bookings:read",name:"عرض"},{id:"bookings:create",name:"إنشاء"},{id:"bookings:update",name:"تعديل"},{id:"bookings:delete",name:"حذف"},{id:"bookings:operations",name:"عمليات"}]},{id:"visas",name:"طلبات الفيزا",permissions:[{id:"visas:read",name:"عرض"},{id:"visas:create",name:"إنشاء"},{id:"visas:update",name:"تعديل"},{id:"visas:delete",name:"حذف"}]},{id:"subscriptions",name:"الاشتراكات",permissions:[{id:"subscriptions:read",name:"عرض"},{id:"subscriptions:create",name:"إنشاء"},{id:"subscriptions:update",name:"تعديل"},{id:"subscriptions:delete",name:"حذف"},{id:"subscriptions:payments",name:"دفع الأقساط"}]},{id:"vouchers",name:"السندات والقيود",permissions:[{id:"vouchers:read",name:"عرض"},{id:"vouchers:create",name:"إنشاء"},{id:"vouchers:update",name:"تعديل"},{id:"vouchers:delete",name:"حذف"}]},{id:"remittances",name:"الحوالات",permissions:[{id:"remittances:read",name:"عرض"},{id:"remittances:create",name:"إنشاء"},{id:"remittances:audit",name:"تدقيق"},{id:"remittances:receive",name:"استلام"}]},{id:"relations",name:"العلاقات (العملاء والموردين)",permissions:[{id:"relations:read",name:"عرض"},{id:"relations:create",name:"إنشاء"},{id:"relations:update",name:"تعديل"},{id:"relations:delete",name:"حذف"},{id:"relations:credentials",name:"إدارة الدخول"}]},{id:"users",name:"المستخدمون والأدوار",permissions:[{id:"users:read",name:"عرض"},{id:"users:create",name:"إنشاء"},{id:"users:update",name:"تعديل"},{id:"users:delete",name:"حذف"},{id:"users:permissions",name:"إدارة الصلاحيات"}]},{id:"reports",name:"التقارير",permissions:[{id:"reports:read:all",name:"عرض الكل"},{id:"reports:account_statement",name:"كشف حساب"},{id:"reports:debts",name:"الأرصدة"},{id:"reports:profits",name:"الأرباح"},{id:"reports:flight_analysis",name:"تحليل الرحلات"}]},{id:"settings",name:"الإعدادات العامة",permissions:[{id:"settings:read",name:"عرض"},{id:"settings:update",name:"تعديل"}]},{id:"system",name:"أدوات النظام",permissions:[{id:"system:audit_log:read",name:"سجل النشاطات"},{id:"system:error_log:read",name:"سجل الأخطاء"},{id:"system:data_audit:run",name:"تشغيل فحص البيانات"}]}],a=(e,t)=>!!e&&("public"===t||(!("isClient"in e)||!e.isClient)&&("role"in e&&"admin"===e.role||!!(e.permissions&&Array.isArray(e.permissions))&&(!!(t.startsWith("reports:")&&e.permissions.includes("reports:read:all"))||e.permissions.includes(t))))},40671:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},41165:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},42997:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},44381:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},50732:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var s=r(12115);function a(e,t){let[r,a]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},51181:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},52081:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]])},52240:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},54550:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},57127:(e,t,r)=>{"use strict";r.d(t,{default:()=>eC});var s=r(95155),a=r(12115),i=r(34486),n=r(52240),l=r(41165),c=r(66710),o=r(40671),d=r(12941),u=r(54550);let m=e=>{let{title:t,value:r,icon:a,currency:i,percentage:c,isPositive:o}=e;return(0,s.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 card-hover-effect",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:t}),(0,s.jsxs)("h3",{className:"text-2xl font-bold mt-1",children:[r," ",(0,s.jsx)("span",{className:"text-sm",children:i})]})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(o?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,s.jsx)(a,{className:"h-6 w-6 ".concat(o?"text-green-500":"text-red-500")})})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center text-sm ".concat(o?"text-green-500":"text-red-500"),children:[o?(0,s.jsx)(n.A,{className:"ml-1 h-4 w-4"}):(0,s.jsx)(l.A,{className:"ml-1 h-4 w-4"}),(0,s.jsxs)("span",{children:[c," عن الشهر الماضي"]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-border",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"الهدف الشهري"}),(0,s.jsx)("span",{className:"font-medium",children:"75%"})]}),(0,s.jsx)("div",{className:"mt-2 w-full bg-secondary rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:"75%"}})})]})]})},h=(e,t)=>{if(0===t)return e>0?{percentage:"زيادة",isPositive:!0}:{percentage:"0%",isPositive:!0};let r=(e-t)/t*100;return{percentage:"".concat(Math.abs(r).toFixed(0),"%"),isPositive:r>=0}};function p(e){let{currentStats:t,prevStats:r}=e,a=h(t.revenue,r.revenue),i=h(t.profit,r.profit),n=h(t.bookingsCount,r.bookingsCount),l=h(t.activeSubscriptions,r.activeSubscriptions);return(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(m,{title:"إجمالي الإيرادات",value:t.revenue.toLocaleString(),icon:c.A,currency:t.currency,percentage:a.percentage,isPositive:a.isPositive}),(0,s.jsx)(m,{title:"صافي الربح",value:t.profit.toLocaleString(),icon:o.A,currency:t.currency,percentage:i.percentage,isPositive:i.isPositive}),(0,s.jsx)(m,{title:"الحجوزات الجديدة",value:t.bookingsCount.toLocaleString(),icon:d.A,currency:"حجزًا",percentage:n.percentage,isPositive:n.isPositive}),(0,s.jsx)(m,{title:"الاشتراكات النشطة",value:t.activeSubscriptions.toLocaleString(),icon:u.A,currency:"اشتراكًا",percentage:l.percentage,isPositive:l.isPositive})]})}var x=r(86948),f=r(26991),y=r(62237),g=r(71730),v=r.n(g),b=r(58672),j=r(49580),w=r(70543),N=r(24719),k=r(96878),A=r(64396),S=r(39830),C=["x1","y1","x2","y2","key"],I=["offset"];function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){var s,a,i;s=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=M(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M(t)?t:t+""}(a))in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var R=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,s=e.x,i=e.y,n=e.width,l=e.height,c=e.ry;return a.createElement("rect",{x:s,y:i,ry:c,width:n,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function D(e,t){var r;if(a.isValidElement(e))r=a.cloneElement(e,t);else if(v()(e))r=e(t);else{var s=t.x1,i=t.y1,n=t.x2,l=t.y2,c=t.key,o=O(t,C),d=(0,w.J9)(o,!1),u=(d.offset,O(d,I));r=a.createElement("line",E({},u,{x1:s,y1:i,x2:n,y2:l,fill:"none",key:c}))}return r}function _(e){var t=e.x,r=e.width,s=e.horizontal,i=void 0===s||s,n=e.horizontalPoints;if(!i||!n||!n.length)return null;var l=n.map(function(s,a){return D(i,T(T({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(a),index:a}))});return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function F(e){var t=e.y,r=e.height,s=e.vertical,i=void 0===s||s,n=e.verticalPoints;if(!i||!n||!n.length)return null;var l=n.map(function(s,a){return D(i,T(T({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(a),index:a}))});return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function z(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,i=e.y,n=e.width,l=e.height,c=e.horizontalPoints,o=e.horizontal;if(!(void 0===o||o)||!t||!t.length)return null;var d=c.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var u=d.map(function(e,c){var o=d[c+1]?d[c+1]-e:i+l-e;if(o<=0)return null;var u=c%t.length;return a.createElement("rect",{key:"react-".concat(c),y:e,x:s,height:o,width:n,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function L(e){var t=e.vertical,r=e.verticalFill,s=e.fillOpacity,i=e.x,n=e.y,l=e.width,c=e.height,o=e.verticalPoints;if(!(void 0===t||t)||!r||!r.length)return null;var d=o.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var o=d[t+1]?d[t+1]-e:i+l-e;if(o<=0)return null;var u=t%r.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:n,width:o,height:c,stroke:"none",fill:r[u],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var B=function(e,t){var r=e.xAxis,s=e.width,a=e.height,i=e.offset;return(0,N.PW)((0,k.f)(T(T(T({},A.u.defaultProps),r),{},{ticks:(0,N.Rh)(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.left,i.left+i.width,t)},U=function(e,t){var r=e.yAxis,s=e.width,a=e.height,i=e.offset;return(0,N.PW)((0,k.f)(T(T(T({},A.u.defaultProps),r),{},{ticks:(0,N.Rh)(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.top,i.top+i.height,t)},V={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function G(e){var t,r,s,i,n,l,c=(0,S.yi)(),o=(0,S.rY)(),d=(0,S.hj)(),u=T(T({},e),{},{stroke:null!=(t=e.stroke)?t:V.stroke,fill:null!=(r=e.fill)?r:V.fill,horizontal:null!=(s=e.horizontal)?s:V.horizontal,horizontalFill:null!=(i=e.horizontalFill)?i:V.horizontalFill,vertical:null!=(n=e.vertical)?n:V.vertical,verticalFill:null!=(l=e.verticalFill)?l:V.verticalFill,x:(0,j.Et)(e.x)?e.x:d.left,y:(0,j.Et)(e.y)?e.y:d.top,width:(0,j.Et)(e.width)?e.width:d.width,height:(0,j.Et)(e.height)?e.height:d.height}),m=u.x,h=u.y,p=u.width,x=u.height,f=u.syncWithTicks,y=u.horizontalValues,g=u.verticalValues,w=(0,S.pj)(),N=(0,S.$G)();if(!(0,j.Et)(p)||p<=0||!(0,j.Et)(x)||x<=0||!(0,j.Et)(m)||m!==+m||!(0,j.Et)(h)||h!==+h)return null;var k=u.verticalCoordinatesGenerator||B,A=u.horizontalCoordinatesGenerator||U,C=u.horizontalPoints,I=u.verticalPoints;if((!C||!C.length)&&v()(A)){var P=y&&y.length,O=A({yAxis:N?T(T({},N),{},{ticks:P?y:N.ticks}):void 0,width:c,height:o,offset:d},!!P||f);(0,b.R)(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(M(O),"]")),Array.isArray(O)&&(C=O)}if((!I||!I.length)&&v()(k)){var D=g&&g.length,G=k({xAxis:w?T(T({},w),{},{ticks:D?g:w.ticks}):void 0,width:c,height:o,offset:d},!!D||f);(0,b.R)(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(M(G),"]")),Array.isArray(G)&&(I=G)}return a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(R,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),a.createElement(_,E({},u,{offset:d,horizontalPoints:C,xAxis:w,yAxis:N})),a.createElement(F,E({},u,{offset:d,verticalPoints:I,xAxis:w,yAxis:N})),a.createElement(z,E({},u,{horizontalPoints:C})),a.createElement(L,E({},u,{verticalPoints:I})))}G.displayName="CartesianGrid";var K=r(47734),q=r(73697),H=r(23508),Y=r(7620),Z=r(16533),W=r(47643);function $(e){let{data:t}=e;return(0,s.jsxs)(x.Zp,{className:"h-full",children:[(0,s.jsxs)(x.aR,{children:[(0,s.jsx)(x.ZB,{children:"نظرة عامة على الإيرادات والأرباح"}),(0,s.jsx)(x.BT,{children:"عرض للأشهر الستة الماضية."})]}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)(f.u,{width:"100%",height:350,children:(0,s.jsxs)(y.X,{data:t,children:[(0,s.jsx)(G,{strokeDasharray:"3 3"}),(0,s.jsx)(K.W,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(q.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(H.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),(0,s.jsx)(Y.s,{}),(0,s.jsx)(Z.y,{dataKey:"revenue",name:"الإيرادات",fill:"hsl(var(--primary))",radius:[4,4,0,0]}),(0,s.jsx)(W.N,{type:"monotone",dataKey:"profit",name:"الأرباح",stroke:"hsl(var(--accent))",strokeWidth:2})]})})})]})}var J=r(81937),Q=r(19940),X=r(50898),ee=r(9567),et=r(5470),er=r(93169),es=r(52081),ea=r(42997),ei=r(5225),en=r(1272),el=r(51181),ec=r(92033),eo=r(52619),ed=r.n(eo);let eu=[{id:"add_booking",label:"حجز جديد",icon:d.A,DialogComponent:J.A},{id:"add_visa",label:"فيزا جديدة",icon:er.A,DialogComponent:Q.A},{id:"add_subscription",label:"اشتراك جديد",icon:u.A,DialogComponent:X.A},{id:"add_remittance",label:"حوالة جديدة",icon:es.A,href:"/accounts/remittances"},{id:"add_client",label:"عميل جديد",icon:ea.A,DialogComponent:ee.A},{id:"new_invoice",href:"/accounts/vouchers",label:"فاتورة جديدة",icon:ei.A},{id:"new_report",href:"/reports",label:"تقرير جديد",icon:en.A}];function em(){let{data:e,loaded:t}=(0,et.Z)(),r=()=>{};return(0,s.jsxs)(x.Zp,{className:"h-full shadow-sm",children:[(0,s.jsx)(x.aR,{children:(0,s.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"إجراءات سريعة"}),(0,s.jsx)(el.A,{})]})}),(0,s.jsx)(x.Wu,{children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:eu.map(e=>{let a=(0,s.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg flex flex-col items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors card-hover-effect",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 bg-primary/10",children:(0,s.jsx)(e.icon,{className:"h-6 w-6 text-primary"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-center",children:e.label})]});if(!t&&e.DialogComponent)return(0,s.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center",children:(0,s.jsx)(ec.A,{className:"h-5 w-5 animate-spin"})},e.id);if(e.href)return(0,s.jsx)(ed(),{href:e.href,className:"block h-full",children:a},e.id);let i=e.DialogComponent;return i?(0,s.jsx)(i,{onBookingAdded:r,onClientAdded:r,onSubscriptionAdded:r,children:(0,s.jsx)("div",{className:"w-full h-full text-right cursor-pointer",children:a})},e.id):(0,s.jsx)("div",{className:"cursor-pointer",children:a},e.id)})})})]})}var eh=r(23451),ep=r(85897),ex=r(14294);let ef=(0,ex.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),ey=(0,ex.A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var eg=r(36204),ev=r(50346),eb=r(27314),ej=r(14223),ew=r(19056),eN=r(15239);let ek={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},eA={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}},eS=()=>{let{user:e}=(0,eh.A)();return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-primary to-blue-500 rounded-2xl p-6 md:p-8 text-white shadow-glow-lg relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[(0,s.jsx)("div",{className:"absolute top-20 left-20 w-40 h-40 rounded-full bg-white/20 animate-pulse-slow"}),(0,s.jsx)("div",{className:"absolute bottom-10 right-10 w-60 h-60 rounded-full bg-white/10 animate-pulse-slow"})]}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"md:mr-8 text-right",children:[(0,s.jsxs)("h1",{className:"text-2xl md:text-4xl font-bold mb-2 animate__animated animate__fadeIn",children:["مرحباً بعودتك، ",(null==e?void 0:e.name)||"المستخدم","!"]}),(0,s.jsx)("p",{className:"opacity-90 mb-6 text-lg",children:"هنا يمكنك إدارة أعمالك ومتابعة أداء شركتك بكل سهولة"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 justify-end",children:[(0,s.jsxs)("button",{className:"bg-white text-primary-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium transition-all hover:shadow-lg flex items-center tilt-effect",children:["بدء الجولة ",(0,s.jsx)(ef,{className:"mr-2 h-4 w-4 wave-element"})]}),(0,s.jsxs)("button",{className:"bg-white/10 hover:bg-white/20 px-6 py-3 rounded-lg font-medium transition-all hover:shadow-lg flex items-center border border-white/20 tilt-effect",children:["مشاهدة الفيديو التعريفي ",(0,s.jsx)(ey,{className:"mr-2 h-4 w-4"})]})]})]}),(0,s.jsx)("div",{className:"mt-8 md:mt-0 floating-element",children:(0,s.jsx)(eN.default,{src:"/logo.png",width:256,height:256,className:"w-48 h-48 md:w-64 md:h-64 object-contain",alt:"شعار المشروع"})})]})]})};function eC(e){let{stats:t,prevStats:r,recentBookings:a,upcomingInstallments:n,chartData:l,users:c}=e;return(0,s.jsxs)(i.P.div,{className:"space-y-8",variants:ek,initial:"hidden",animate:"visible",children:[(0,s.jsx)(i.P.section,{variants:eA,className:"slide-in-element",children:(0,s.jsx)(eS,{})}),(0,s.jsx)(i.P.section,{variants:eA,children:(0,s.jsx)(p,{currentStats:t,prevStats:r})}),(0,s.jsxs)(i.P.section,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)($,{data:l})}),(0,s.jsx)("div",{children:(0,s.jsx)(em,{})})]}),(0,s.jsxs)(i.P.section,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(x.Zp,{className:"h-full shadow-sm",children:[(0,s.jsx)(x.aR,{children:(0,s.jsx)(x.ZB,{children:"آخر الحجوزات"})}),(0,s.jsx)(x.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[a.map((e,t)=>{var r;return(0,s.jsxs)("div",{className:"flex items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:(0,s.jsx)(d.A,{className:"h-5 w-5 text-blue-500"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h4",{className:"font-medium",children:[null==(r=e.passengers[0])?void 0:r.name," ",e.passengers.length>1&&"و ".concat(e.passengers.length-1," آخرون")]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.route})]}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("span",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.pnr}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.issueDate?(0,ej.GP)((0,ew.H)(e.issueDate),"yyyy-MM-dd"):"-"})]})]},e.id||t)}),0===a.length&&(0,s.jsx)("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد حجوزات حديثة."})]})})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)(x.Zp,{className:"h-full shadow-sm",children:[(0,s.jsx)(x.aR,{children:(0,s.jsx)(x.ZB,{children:"الدفعات القادمة"})}),(0,s.jsx)(x.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[n.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mr-3",children:(0,s.jsx)("i",{className:"fas fa-money-bill-wave text-orange-500"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.clientName}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.serviceName})]}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsxs)("span",{className:"font-medium text-orange-600",children:[e.amount.toLocaleString()," ",e.currency]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,ej.GP)((0,ew.H)(e.dueDate),"yyyy-MM-dd")})]})]},e.id||t)),0===n.length&&(0,s.jsx)("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد أقساط مستحقة قريبا."})]})})]})})]}),(0,s.jsx)("section",{className:"mt-8",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"فريق العمل"}),(0,s.jsxs)(ed(),{href:"/users",className:"text-primary-600 dark:text-primary-400 text-sm flex items-center",children:["عرض الكل ",(0,s.jsx)(eg.A,{className:"ms-1 h-4 w-4"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[c.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsxs)(ep.eu,{className:"w-16 h-16 rounded-full border-2 border-primary-500",children:[(0,s.jsx)(ep.BK,{src:e.avatarUrl,alt:e.name}),(0,s.jsx)(ep.q5,{children:(0,s.jsx)(ev.A,{className:"h-8 w-8"})})]}),(0,s.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 ".concat("active"===e.status?"bg-green-500":"bg-gray-400"," rounded-full border-2 border-white dark:border-gray-700")})]}),(0,s.jsx)("h4",{className:"font-medium text-center",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:e.position||"موظف"})]},e.uid)),(0,s.jsxs)(ed(),{href:"/users",className:"flex flex-col items-center justify-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect border-2 border-dashed border-gray-300 dark:border-gray-600",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-3",children:(0,s.jsx)(eb.A,{className:"text-gray-400 text-xl"})}),(0,s.jsx)("h4",{className:"font-medium text-center",children:"إضافة عضو"})]})]})]})})]})}},63263:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,pY:()=>n});var s=r(2821),a=r(75889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}let n=(e,t,r,s)=>{let a={};return Object.keys(e).map(e=>e.toLowerCase().trim()),r.forEach(t=>{let r,i=null==s?void 0:s[t.id],n=(t.aliases||(null==i?void 0:i.aliases)||[t.label]).map(e=>e.toLowerCase().trim()),l=Array.from(new Set([t.id,t.label,...n].map(e=>e.toLowerCase().trim()))),c=Object.keys(e).find(e=>l.includes(e.toLowerCase().trim()));c&&(r=e[c]),null==r||""===String(r).trim()?a[t.id]=void 0!==t.defaultValue?t.defaultValue:"number"===t.dataType?0:"":"number"===t.dataType?a[t.id]=parseFloat(String(r).trim().replace(/,/g,""))||0:a[t.id]=String(r).trim()}),a}},72431:(e,t,r)=>{"use strict";r.d(t,{RG:()=>j,bL:()=>P,q7:()=>T});var s=r(12115),a=r(92556),i=r(49972),n=r(94446),l=r(3468),c=r(68946),o=r(97602),d=r(70222),u=r(23558),m=r(66218),h=r(95155),p="rovingFocusGroup.onEntryFocus",x={bubbles:!1,cancelable:!0},f="RovingFocusGroup",[y,g,v]=(0,i.N)(f),[b,j]=(0,l.A)(f,[v]),[w,N]=b(f),k=s.forwardRef((e,t)=>(0,h.jsx)(y.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(y.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(A,{...e,ref:t})})}));k.displayName=f;var A=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:i,loop:l=!1,dir:c,currentTabStopId:y,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:b,onEntryFocus:j,preventScrollOnEntryFocus:N=!1,...k}=e,A=s.useRef(null),S=(0,n.s)(t,A),C=(0,m.jH)(c),[I,P]=(0,u.i)({prop:y,defaultProp:null!=v?v:null,onChange:b,caller:f}),[T,E]=s.useState(!1),O=(0,d.c)(j),R=g(r),D=s.useRef(!1),[_,F]=s.useState(0);return s.useEffect(()=>{let e=A.current;if(e)return e.addEventListener(p,O),()=>e.removeEventListener(p,O)},[O]),(0,h.jsx)(w,{scope:r,orientation:i,dir:C,loop:l,currentTabStopId:I,onItemFocus:s.useCallback(e=>P(e),[P]),onItemShiftTab:s.useCallback(()=>E(!0),[]),onFocusableItemAdd:s.useCallback(()=>F(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>F(e=>e-1),[]),children:(0,h.jsx)(o.sG.div,{tabIndex:T||0===_?-1:0,"data-orientation":i,...k,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,a.mK)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,a.mK)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!T){let t=new CustomEvent(p,x);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=R().filter(e=>e.focusable);M([e.find(e=>e.active),e.find(e=>e.id===I),...e].filter(Boolean).map(e=>e.ref.current),N)}}D.current=!1}),onBlur:(0,a.mK)(e.onBlur,()=>E(!1))})})}),S="RovingFocusGroupItem",C=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:n=!1,tabStopId:l,children:d,...u}=e,m=(0,c.B)(),p=l||m,x=N(S,r),f=x.currentTabStopId===p,v=g(r),{onFocusableItemAdd:b,onFocusableItemRemove:j,currentTabStopId:w}=x;return s.useEffect(()=>{if(i)return b(),()=>j()},[i,b,j]),(0,h.jsx)(y.ItemSlot,{scope:r,id:p,focusable:i,active:n,children:(0,h.jsx)(o.sG.span,{tabIndex:f?0:-1,"data-orientation":x.orientation,...u,ref:t,onMouseDown:(0,a.mK)(e.onMouseDown,e=>{i?x.onItemFocus(p):e.preventDefault()}),onFocus:(0,a.mK)(e.onFocus,()=>x.onItemFocus(p)),onKeyDown:(0,a.mK)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void x.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return I[a]}(e,x.orientation,x.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=x.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>M(r))}}),children:"function"==typeof d?d({isCurrentTabStop:f,hasTabStop:null!=w}):d})})});C.displayName=S;var I={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var P=k,T=C},75797:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},76140:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},76251:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>l,wL:()=>u});var s=r(95155),a=r(12115),i=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-4 sm:p-6 text-right",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-lg sm:text-xl font-bold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-4 sm:p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-4 sm:p-6 pt-0",r),...a})});u.displayName="CardFooter"},93045:(e,t,r)=>{Promise.resolve().then(r.bind(r,57127))},93169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},93685:(e,t,r)=>{"use strict";r.d(t,{A:()=>R});var s=r(95155),a=r(12115),i=r(22544),n=r(66942),l=r(54879),c=r(3998),o=r(65142),d=r(76444),u=r(11186),m=r(87270),h=r(13630),p=r(22452),x=r(27314),f=r(94972),y=r(44381),g=r(92033),v=r(73180),b=r(30926);let j=(0,b.createServerReference)("60562fa6e2acf835f7f484086ad9e3f76c9be2ca55",b.callServer,void 0,b.findSourceMapURL,"updateVisaBooking"),w=(0,b.createServerReference)("409ab5f3a1d5afb4b4634875b66bd6864afda3323f",b.callServer,void 0,b.findSourceMapURL,"addVisaBooking");var N=r(23639),k=r(64269),A=r(15894),S=r(31120),C=r(27432),I=r(5470),M=r(23451),P=r(51834),T=r(97916);let E=l.Ik({id:l.Yj().optional(),name:l.Yj().min(1,"الاسم الكامل مطلوب"),passportNumber:l.Yj().optional(),applicationNumber:l.Yj().min(1,"رقم الطلب مطلوب"),visaType:l.Yj().min(1,"نوع الفيزا مطلوب"),bk:l.Yj().optional(),purchasePrice:l.Yj().or(l.ai()).transform(e=>Number(String(e).replace(/,/g,""))).refine(e=>e>=0,{message:"سعر الشراء يجب أن يكون 0 أو أكثر."}),salePrice:l.Yj().or(l.ai()).transform(e=>Number(String(e).replace(/,/g,""))).refine(e=>e>=0,{message:"سعر البيع يجب أن يكون 0 أو أكثر."})}),O=l.Ik({id:l.Yj().optional(),supplierId:l.Yj().min(1,"المورد مطلوب"),clientId:l.Yj().min(1,"العميل مطلوب"),submissionDate:l.p6({required_error:"تاريخ التقديم مطلوب"}),boxId:l.Yj().min(1,"الصندوق مطلوب"),currency:l.k5(["USD","IQD"]),notes:l.Yj().optional(),passengers:l.YO(E).min(1,"يجب إضافة مسافر واحد على الأقل")});function R(e){let{isEditing:t=!1,initialData:r,onBookingAdded:l,onBookingUpdated:b}=e,{toast:E}=(0,A.dj)(),{data:R}=(0,I.Z)(),{user:D}=(0,M.A)(),_=a.useMemo(()=>((null==R?void 0:R.clients)||[]).map(e=>({value:e.id,label:e.name})),[null==R?void 0:R.clients]),F=a.useMemo(()=>((null==R?void 0:R.suppliers)||[]).map(e=>({value:e.id,label:e.name})),[null==R?void 0:R.suppliers]),z=(0,i.mN)({resolver:(0,n.u)(O),defaultValues:t?r:{supplierId:"",clientId:"",submissionDate:new Date,boxId:"",currency:"USD",notes:"",passengers:[{name:"",passportNumber:"",applicationNumber:"",visaType:"",bk:"",purchasePrice:0,salePrice:0}]}});a.useEffect(()=>{D&&"role"in D&&D.boxId&&!t&&z.setValue("boxId",D.boxId)},[D,t,z]);let{control:L,handleSubmit:B,formState:{errors:U,isSubmitting:V},setValue:G,watch:K}=z,{fields:q,append:H,remove:Y}=(0,i.jz)({control:L,name:"passengers"}),Z=a.useMemo(()=>{var e,t;let r=z.watch("boxId");return(null==R||null==(t=R.boxes)||null==(e=t.find(e=>e.id===r))?void 0:e.name)||"غير محدد"},[z,null==R?void 0:R.boxes]),W=async e=>{var r,s;let a=null==R||null==(r=R.clients)?void 0:r.find(t=>t.id===e.clientId),i=null==R||null==(s=R.suppliers)?void 0:s.find(t=>t.id===e.supplierId),n={supplierId:e.supplierId,clientId:e.clientId,supplierName:(null==i?void 0:i.name)||e.supplierId,clientName:(null==a?void 0:a.name)||e.clientId,boxId:e.boxId,currency:e.currency,submissionDate:e.submissionDate.toISOString(),notes:e.notes||"",passengers:e.passengers.map(e=>({id:e.id||"temp-".concat(Math.random()),name:e.name,passportNumber:e.passportNumber||"",applicationNumber:e.applicationNumber,visaType:e.visaType,bk:e.bk||"",purchasePrice:e.purchasePrice,salePrice:e.salePrice}))};if(t&&e.id){let t=await j(e.id,n);t.success&&t.updatedBooking?(E({title:"تم تحديث الطلب بنجاح"}),b&&b(t.updatedBooking)):E({title:"خطأ في التحديث",description:t.error,variant:"destructive"})}else{let e=await w(n);e.success&&e.newBooking?(E({title:"تمت إضافة طلب الفيزا بنجاح"}),z.reset(),l&&l(e.newBooking)):E({title:"خطأ في الإضافة",description:e.error,variant:"destructive"})}};return(0,s.jsxs)("form",{onSubmit:B(W),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-start p-4 border rounded-lg bg-muted/30",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"supplierId",children:"المورد"}),(0,s.jsx)(i.xI,{name:"supplierId",control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(N.j,{options:F,value:t.value,onValueChange:t.onChange,placeholder:"اختر موردًا..."})}}),U.supplierId&&(0,s.jsx)("p",{className:"text-sm text-destructive h-4",children:U.supplierId.message})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"clientId",children:"العميل"}),(0,s.jsx)(i.xI,{name:"clientId",control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(N.j,{options:_,value:t.value,onValueChange:t.onChange,placeholder:"اختر عميلاً..."})}}),U.clientId&&(0,s.jsx)("p",{className:"text-sm text-destructive h-4",children:U.clientId.message})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"submissionDate",children:"تاريخ التقديم"}),(0,s.jsx)(i.xI,{name:"submissionDate",control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(C.K,{date:t.value,setDate:t.onChange})}}),U.submissionDate&&(0,s.jsx)("p",{className:"text-sm text-destructive h-4",children:U.submissionDate.message})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"currency",children:"العملة"}),(0,s.jsx)(i.xI,{name:"currency",control:L,render:e=>{let{field:t}=e;return(0,s.jsxs)(u.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(u.bq,{children:(0,s.jsx)(u.yv,{})}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"USD",children:"USD"}),(0,s.jsx)(u.eb,{value:"IQD",children:"IQD"})]})]})}})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"boxId",children:"الصندوق"}),(0,s.jsx)(i.xI,{name:"boxId",control:L,render:e=>{let{field:t}=e;return(0,s.jsxs)(u.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(u.bq,{children:(0,s.jsx)(u.yv,{placeholder:"اختر صندوق..."})}),(0,s.jsx)(u.gC,{children:((null==R?void 0:R.boxes)||[]).map(e=>(0,s.jsx)(u.eb,{value:e.id,children:e.name},e.id))})]})}}),U.boxId&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.boxId.message})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(d.J,{htmlFor:"notes",children:"ملاحظات"}),(0,s.jsx)(i.xI,{name:"notes",control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(S.T,{...t})}})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto border rounded-lg",children:[(0,s.jsxs)(m.XI,{children:[(0,s.jsx)(m.A0,{children:(0,s.jsxs)(m.Hj,{className:"bg-muted/50",children:[(0,s.jsx)(m.nd,{className:"p-2",children:"الاسم الكامل"}),(0,s.jsx)(m.nd,{className:"p-2",children:"رقم الجواز"}),(0,s.jsx)(m.nd,{className:"p-2",children:"رقم الطلب"}),(0,s.jsx)(m.nd,{className:"p-2",children:"نوع الفيزا"}),(0,s.jsx)(m.nd,{className:"p-2",children:"BK"}),(0,s.jsx)(m.nd,{className:"p-2",children:"سعر الشراء"}),(0,s.jsx)(m.nd,{className:"p-2",children:"سعر البيع"}),(0,s.jsx)(m.nd,{className:"p-2 w-[50px]"})]})}),(0,s.jsx)(m.BF,{children:q.map((e,t)=>{let r=K("currency");return(0,s.jsxs)(m.Hj,{children:[(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(o.p,{...z.register("passengers.".concat(t,".name"))})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(o.p,{...z.register("passengers.".concat(t,".passportNumber"))})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(o.p,{...z.register("passengers.".concat(t,".applicationNumber"))})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(o.p,{...z.register("passengers.".concat(t,".visaType"))})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(o.p,{...z.register("passengers.".concat(t,".bk"))})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(i.xI,{name:"passengers.".concat(t,".purchasePrice"),control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(T.O,{currency:r,currencyClassName:(0,k.cn)("USD"===r?"bg-accent text-accent-foreground":"bg-primary text-primary-foreground"),...t,onValueChange:t.onChange})}})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(i.xI,{name:"passengers.".concat(t,".salePrice"),control:L,render:e=>{let{field:t}=e;return(0,s.jsx)(T.O,{currency:r,currencyClassName:(0,k.cn)("USD"===r?"bg-accent text-accent-foreground":"bg-primary text-primary-foreground"),...t,onValueChange:t.onChange})}})}),(0,s.jsx)(m.nA,{className:"p-1",children:(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>Y(t),disabled:q.length<=1,children:(0,s.jsx)(h.A,{className:"h-4 w-4 text-destructive"})})})]},e.id)})})]}),U.passengers&&"object"==typeof U.passengers&&"message"in U.passengers&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-2 p-2",children:U.passengers.message})]}),(0,s.jsx)("div",{className:"flex justify-between items-center mt-4",children:(0,s.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>H({name:"",passportNumber:"",applicationNumber:"",visaType:"",bk:"",purchasePrice:0,salePrice:0}),children:[(0,s.jsx)(p.A,{className:"me-2 h-4 w-4"})," إضافة مسافر"]})}),(0,s.jsxs)(P.Es,{className:"flex-row items-center justify-between sticky bottom-0 bg-background border-t p-2 -mx-6 -mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 text-primary"})," ",(0,s.jsx)("span",{children:(null==D?void 0:D.name)||"..."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-primary"})," ",(0,s.jsx)("span",{children:Z})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 text-primary"})," ",(0,s.jsx)("span",{children:"رقم الفاتورة: (تلقائي)"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.$,{type:"button",variant:"ghost",onClick:()=>z.reset(),children:"إلغاء"}),(0,s.jsxs)(c.$,{type:"submit",disabled:V,children:[V&&(0,s.jsx)(g.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,s.jsx)(v.A,{className:"me-2 h-4 w-4"}),t?"حفظ التعديلات":"حفظ الطلب"]})]})]})]})}},94972:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},97766:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(30926);let a=(0,s.createServerReference)("601532f3b7a46dae258a5ff32f14fb4b3e2e141e9f",s.callServer,void 0,s.findSourceMapURL,"updateUser")},98211:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14294).A)("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]])}},e=>{e.O(0,[9135,7210,4909,9625,315,5111,4127,9967,1374,783,4223,8994,2619,43,13,2612,5672,4486,5239,1583,7116,7643,7881,1261,8579,898,7737,8441,1255,7358],()=>e(e.s=93045)),_N_E=e.O()}]);