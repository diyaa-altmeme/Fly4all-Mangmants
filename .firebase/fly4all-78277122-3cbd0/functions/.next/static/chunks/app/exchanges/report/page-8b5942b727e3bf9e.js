(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3326],{5470:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f,z:()=>u});var s=a(95155),r=a(12115),n=a(9012),l=a(80187),d=a(35656),i=a(96133),c=a(23451),o=a(75660);let m=(0,r.createContext)({data:null,loaded:!1,fetchData:async()=>{},refreshData:async()=>{}}),u=e=>{let{children:t}=e,[a,u]=(0,r.useState)(null),[f,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),{user:g,loading:v}=(0,c.A)(),j=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!p&&(!f||e)){h(!0);try{let[e,t,a,s,r]=await Promise.all([(0,n.L)({all:!0,includeInactive:!1,relationType:"all"}),(0,l.c)(),(0,d.l)({all:!0}),(0,i.m)(),(0,o.r)()]),c=e.clients,m=c.filter(e=>"client"===e.relationType||"both"===e.relationType),f=c.filter(e=>"supplier"===e.relationType||"both"===e.relationType),p=r.accounts||[];u({clients:m,suppliers:f,boxes:t,users:a,exchanges:p,settings:s}),x(!0)}catch(e){console.error("Failed to load initial voucher navigation data:",e)}finally{h(!1)}}},[p,f]);(0,r.useEffect)(()=>{v||!g||"isClient"in g&&g.isClient||j()},[g,v,j]);let N=(0,r.useCallback)(async()=>{await j(!0)},[j]);return(0,s.jsx)(m.Provider,{value:{data:a,loaded:f,fetchData:j,refreshData:N},children:t})},f=()=>{let e=(0,r.useContext)(m);if(void 0===e)throw Error("useVoucherNav must be used within a VoucherNavProvider");return e}},6259:(e,t,a)=>{"use strict";a.d(t,{M5:()=>x,SQ:()=>p,_2:()=>h,lv:()=>u,mB:()=>g,nV:()=>f,rI:()=>o,ty:()=>m});var s=a(95155),r=a(12115),n=a(47971),l=a(63263),d=a(72251),i=a(75797),c=a(64269);let o=n.bL,m=n.l9;n.YJ,n.ZL;let u=n.Pb;n.z6;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,children:d,...i}=e;return(0,s.jsxs)(n.ZP,{ref:t,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-md px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...i,children:[(0,s.jsx)(l.A,{className:"mr-auto h-4 w-4"}),d]})});f.displayName=n.ZP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});x.displayName=n.G5.displayName;let p=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});p.displayName=n.UC.displayName;let h=r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(n.q7,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l})});h.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:l,...i}=e;return(0,s.jsxs)(n.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),r]})}).displayName=n.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=n.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pr-8",a),...l})}).displayName=n.JU.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});g.displayName=n.wv.displayName},9012:(e,t,a)=>{"use strict";a.d(t,{L:()=>r});var s=a(30926);let r=(0,s.createServerReference)("400e621b7f78c4800cffc85d668ca10cd73eb6853c",s.callServer,void 0,s.findSourceMapURL,"getClients")},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>h,gC:()=>p,l6:()=>o,yv:()=>m});var s=a(95155),r=a(12115),n=a(47887),l=a(59007),d=a(42614),i=a(72251),c=a(64269);let o=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[r,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...d}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...d,children:[(0,s.jsx)(f,{}),(0,s.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:r})]})});h.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(95155);a(12115);var r=a(83101),n=a(64269);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("span",{className:(0,n.cn)(l({variant:a}),t),...r})}},18332:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>i,TN:()=>o,XL:()=>c});var s=a(95155),r=a(12115),n=a(83101),l=a(64269);let d=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(d({variant:r}),a),...n})});i.displayName="Alert";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});c.displayName="AlertTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});o.displayName="AlertDescription"},26333:(e,t,a)=>{"use strict";a.d(t,{AM:()=>d,Wv:()=>i,hl:()=>c});var s=a(95155),r=a(12115),n=a(82286),l=a(64269);let d=n.bL,i=n.l9,c=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:d=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:t,align:r,sideOffset:d,className:(0,l.cn)("z-[9999] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});c.displayName=n.UC.displayName},31318:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(95155);a(12115);var r=a(98090),n=a(1402);function l(e){let{batch:t,exchanges:a,onSuccess:l,children:d}=e;return"transaction"===t.entryType?(0,s.jsx)(r.A,{exchangeId:t.exchangeId||"",exchanges:a,onSuccess:l,isEditing:!0,initialData:t,children:d}):"payment"===t.entryType?(0,s.jsx)(n.A,{exchangeId:t.exchangeId||"",exchanges:a,onSuccess:l,isEditing:!0,initialData:t,children:d}):(0,s.jsx)(s.Fragment,{children:d})}},32383:()=>{},35656:(e,t,a)=>{"use strict";a.d(t,{l:()=>r});var s=a(30926);let r=(0,s.createServerReference)("40290c8e8678ea3c7dc08bc14a2b21bf84ced558a3",s.callServer,void 0,s.findSourceMapURL,"getUsers")},44994:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>er});var s=a(95155),r=a(12115),n=a(30926);let l=(0,n.createServerReference)("7f56b7b077f6ef503c674aaefafd2b7951d91adaa8",n.callServer,void 0,n.findSourceMapURL,"getUnifiedExchangeLedger"),d=(0,n.createServerReference)("70a2ee919f2d86ac514a326d140a0804c759a4d955",n.callServer,void 0,n.findSourceMapURL,"updateBatch"),i=(0,n.createServerReference)("407ad343a0d07dddd296d749ab0d60ad67dfc5bb39",n.callServer,void 0,n.findSourceMapURL,"deleteExchangeTransactionBatch"),c=(0,n.createServerReference)("405ce651eeff5dd6c93f3965b62049b45a42e5a7d4",n.callServer,void 0,n.findSourceMapURL,"deleteExchangePaymentBatch");var o=a(15894),m=a(64269),u=a(4246),f=a(19056),x=a(14223),p=a(86948),h=a(87270),g=a(3998),v=a(65142),j=a(11647),N=a(73457),b=a(11186),y=a(6259),w=a(98053),A=a(51834),S=a(26333),C=a(50276),R=a(22452),L=a(90109),k=a(28127),_=a(92033),M=a(13381),U=a(53489),T=a(59007),D=a(20146),z=a(59915),H=a(81288),E=a(88964),F=a(13630),I=a(39285),P=a(51190),V=a(63263),Z=a(17878),O=a(71408),$=a(34486),B=a(98090),G=a(1402),J=a(31318);let q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return null==e?"-":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)+" ".concat(t)},Y=e=>"transaction"===e.entryType?"دين":(e.totalAmount||0)>0?"دفع":"قبض",W=e=>{let t=e.totalAmount||0;return"transaction"===e.entryType||"payment"===e.entryType&&t<0?Math.abs(t):0},X=e=>{let t=e.totalAmount||0;return"payment"===e.entryType&&t>0?t:0};function Q(e){var t,a,n;let{initialExchanges:Q,initialExchangeId:K}=e,{toast:ee}=(0,o.dj)(),[et]=(0,r.useState)(Q||[]),[ea,es]=(0,r.useState)(K||(null==(t=Q[0])?void 0:t.id)||""),[er,en]=(0,r.useState)([]),[el,ed]=(0,r.useState)(!0),[ei,ec]=(0,r.useState)(""),[eo,em]=(0,r.useState)("all"),[eu,ef]=(0,r.useState)("all"),[ex,ep]=(0,r.useState)(""),[eh,eg]=(0,r.useState)({}),[ev,ej]=(0,r.useState)(0),[eN,eb]=(0,r.useState)(15),[ey,ew]=(0,r.useState)("right"),[eA,eS]=(0,r.useState)({}),[eC,eR]=(0,r.useState)({open:!1}),[eL,ek]=(0,r.useState)({open:!1}),e_=(0,r.useCallback)(async()=>{if(!ea){en([]),ed(!1);return}ed(!0);try{let e=await l(ea,eh.from,eh.to);e.sort((e,t)=>{let a=e.date?+(0,f.H)(e.date):e.createdAt?+(0,f.H)(e.createdAt):0;return(t.date?+(0,f.H)(t.date):t.createdAt?+(0,f.H)(t.createdAt):0)-a}),en(e)}catch(e){ee({title:"خطأ في تحميل البيانات",description:(null==e?void 0:e.message)||"تعذر تحميل البيانات",variant:"destructive"})}finally{ed(!1)}},[ea,ee,eh.from,eh.to]);(0,r.useEffect)(()=>{e_()},[e_]);let eM=(0,r.useMemo)(()=>{let e=er;if("all"!==eo&&("transaction"===eo?e=e.filter(e=>"transaction"===e.entryType):"payment"===eo?e=e.filter(e=>"payment"===e.entryType&&(e.totalAmount||0)>0):"receipt"===eo&&(e=e.filter(e=>"payment"===e.entryType&&0>(e.totalAmount||0)))),"all"!==eu){let t="confirmed"===eu;e=e.filter(e=>!!e.isConfirmed===t)}if(ex.trim()){let t=ex.toLowerCase();e=e.filter(e=>(e.userName||"").toLowerCase().includes(t))}if(ei.trim()){let t=ei.toLowerCase();e=e.filter(e=>{var a,s,r;let n=Array.isArray(e.details)&&e.details.some(e=>{var a,s,r;return(null==(a=e.partyName)?void 0:a.toLowerCase().includes(t))||(null==(s=e.paidTo)?void 0:s.toLowerCase().includes(t))||(null==(r=e.note)?void 0:r.toLowerCase().includes(t))});return(null==(a=e.invoiceNumber)?void 0:a.toLowerCase().includes(t))||(null==(s=e.description)?void 0:s.toLowerCase().includes(t))||(null==(r=e.userName)?void 0:r.toLowerCase().includes(t))||n})}if(eh.from||eh.to){let t=eh.from?+new Date(eh.from.setHours(0,0,0,0)):-1/0,a=eh.to?+new Date(eh.to.setHours(23,59,59,999)):1/0;e=e.filter(e=>{let s=e.date?+(0,f.H)(e.date):e.createdAt?+(0,f.H)(e.createdAt):0;return s>=t&&s<=a})}return e},[er,ei,eu,eo,ex,eh]),eU=(0,r.useMemo)(()=>eM.reduce((e,t)=>(e.debitUSD+=W(t),e.creditUSD+=X(t),e),{debitUSD:0,creditUSD:0}),[eM]),eT=eU.creditUSD-eU.debitUSD,eD=Math.max(1,Math.ceil(eM.length/eN));(0,r.useEffect)(()=>{ej(e=>Math.min(e,eD-1))},[eD]);let ez=ev*eN,eH=eM.slice(ez,ez+eN),eE=async(e,t,a)=>{try{en(t=>t.map(t=>t.id===e?{...t,isConfirmed:a}:t));let s=await d(e,t,{isConfirmed:a});if(!(null==s?void 0:s.success))throw Error((null==s?void 0:s.error)||"فشل التحديث");ee({title:a?"تم التأكيد":"تم إلغاء التأكيد"})}catch(t){en(t=>t.map(t=>t.id===e?{...t,isConfirmed:!a}:t)),ee({title:"خطأ",description:(null==t?void 0:t.message)||"فشل تحديث حالة التأكيد",variant:"destructive"})}finally{ej(ev)}},eF=async e=>{try{let t="transaction"===e.entryType?i:c,a=await t(e.id);if(!(null==a?void 0:a.success))throw Error((null==a?void 0:a.error)||"فشل الحذف");en(t=>t.filter(t=>t.id!==e.id)),ee({title:"تم الحذف بنجاح"})}catch(e){ee({title:"خطأ",description:(null==e?void 0:e.message)||"تعذر الحذف",variant:"destructive"})}},eI=e=>{let{title:t,value:a,hint:r,tone:n="neutral"}=e;return(0,s.jsxs)("div",{className:(0,m.cn)("rounded-xl border p-3 text-center","good"===n?"bg-emerald-500/10 border-emerald-500/30 text-emerald-700 dark:text-emerald-300":"bad"===n?"bg-red-500/10 border-red-500/30 text-red-700 dark:text-red-300":"bg-card text-card-foreground"),children:[(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:t}),(0,s.jsx)("div",{className:"mt-1 font-bold text-lg font-mono tabular-nums whitespace-nowrap",children:q(a)}),r?(0,s.jsx)("div",{className:"text-[11px] text-muted-foreground mt-1",children:r}):null]})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(p.Zp,{children:(0,s.jsxs)(p.aR,{className:"gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.ZB,{children:"إدارة المعاملات"}),(0,s.jsx)(p.BT,{children:"تأكيد المعاملات، عرض التفاصيل، بدون الرجوع للصفحة الأولى"})]}),(0,s.jsxs)("div",{className:"flex w-full md:w-auto flex-wrap items-center gap-2",children:[(0,s.jsx)(B.A,{exchangeId:ea,exchanges:et,onSuccess:e_,children:(0,s.jsxs)(g.$,{className:"h-9",children:[(0,s.jsx)(R.A,{className:"h-4 w-4 ms-1"}),"معاملة"]})}),(0,s.jsx)(G.A,{exchangeId:ea,exchanges:et,onSuccess:e_,children:(0,s.jsxs)(g.$,{variant:"secondary",className:"h-9",children:[(0,s.jsx)(R.A,{className:"h-4 w-4 ms-1"}),"تسديد"]})}),(0,s.jsxs)("div",{className:"relative w-full md:w-[220px]",children:[(0,s.jsx)(L.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(v.p,{value:ei,onChange:e=>{ec(e.target.value),ej(0)},placeholder:"بحث شامل...",className:"pr-9 h-9"})]}),(0,s.jsxs)(b.l6,{value:eo,onValueChange:e=>em(e),children:[(0,s.jsx)(b.bq,{className:"h-9 w-[140px]",children:(0,s.jsx)(b.yv,{placeholder:"النوع"})}),(0,s.jsxs)(b.gC,{align:"end",children:[(0,s.jsx)(b.eb,{value:"all",children:"كل الأنواع"}),(0,s.jsx)(b.eb,{value:"transaction",children:"دين"}),(0,s.jsx)(b.eb,{value:"payment",children:"دفع"}),(0,s.jsx)(b.eb,{value:"receipt",children:"قبض"})]})]}),(0,s.jsxs)(b.l6,{value:eu,onValueChange:e=>ef(e),children:[(0,s.jsx)(b.bq,{className:"h-9 w-[150px]",children:(0,s.jsx)(b.yv,{placeholder:"حالة التأكيد"})}),(0,s.jsxs)(b.gC,{align:"end",children:[(0,s.jsx)(b.eb,{value:"all",children:"كل الحالات"}),(0,s.jsx)(b.eb,{value:"confirmed",children:"المؤكدة"}),(0,s.jsx)(b.eb,{value:"unconfirmed",children:"غير المؤكدة"})]})]}),(0,s.jsx)(v.p,{value:ex,onChange:e=>{ep(e.target.value),ej(0)},placeholder:"المستخدم",className:"h-9 w-[140px]"}),(0,s.jsxs)(S.AM,{children:[(0,s.jsx)(S.Wv,{asChild:!0,children:(0,s.jsxs)(g.$,{variant:"outline",className:"h-9 w-[170px] justify-start",children:[(0,s.jsx)(k.A,{className:"h-4 w-4 ml-2"}),eh.from?eh.to?"".concat((0,x.GP)(eh.from,"LLL dd")," - ").concat((0,x.GP)(eh.to,"LLL dd")):(0,x.GP)(eh.from,"LLL dd, y"):"نطاق التاريخ"]})}),(0,s.jsx)(S.hl,{align:"end",className:"w-auto p-0",children:(0,s.jsx)(C.V,{mode:"range",selected:eh,onSelect:e=>{eg({from:null==e?void 0:e.from,to:null==e?void 0:e.to}),ej(0)},numberOfMonths:2,initialFocus:!0})})]}),(0,s.jsxs)(b.l6,{value:ea,onValueChange:e=>{es(e),ej(0)},children:[(0,s.jsx)(b.bq,{className:"h-9 w-[200px]",children:(0,s.jsx)(b.yv,{placeholder:"اختر بورصة..."})}),(0,s.jsx)(b.gC,{align:"end",children:et.map(e=>(0,s.jsx)(b.eb,{value:e.id,children:e.name},e.id))})]}),(0,s.jsx)(g.$,{variant:"outline",onClick:e_,disabled:el,className:"h-9",children:el?(0,s.jsx)(_.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(M.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{variant:"outline",onClick:()=>{var e;if(!eM.length)return void ee({title:"لا توجد بيانات للتصدير",variant:"destructive"});let t=(null==(e=et.find(e=>e.id===ea))?void 0:e.name)||"",a=eM.map((e,a)=>{var s;return{"#":a+1,البورصة:t,الرقم:e.invoiceNumber||"-",التاريخ:e.date?(0,x.GP)((0,f.H)(e.date),"yyyy-MM-dd"):"-",النوع:Y(e),الوصف:e.description||"-",علينا:W(e),لنا:X(e),المحصلة:null!=(s=e.balance)?s:X(e)-W(e),المستخدم:e.userName||"-"}}),s=u.Wp.json_to_sheet(a),r=u.Wp.book_new();u.Wp.book_append_sheet(r,s,"كشف"),u._h(r,"Statement-".concat(t||ea,"-").concat(new Date().toISOString().slice(0,10),".xlsx")),ee({title:"تم التصدير"})},className:"h-9",children:(0,s.jsx)(U.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-2",children:[(0,s.jsx)(eI,{title:"إجمالي علينا (مدين)",value:eU.debitUSD,tone:"bad"}),(0,s.jsx)(eI,{title:"إجمالي لنا (دائن)",value:eU.creditUSD,tone:"good"}),(0,s.jsx)(eI,{title:"صافي الرصيد",value:eT,tone:eT>=0?"good":"bad",hint:eT>0?"لنا أكثر":eT<0?"علينا أكثر":"متوازن"})]})]})}),(0,s.jsx)(p.Zp,{children:(0,s.jsxs)(p.Wu,{className:"p-0",children:[(0,s.jsx)("div",{className:"relative w-full overflow-auto rounded-xl border",children:(0,s.jsxs)(h.XI,{children:[(0,s.jsx)(h.A0,{children:(0,s.jsxs)(h.Hj,{children:[(0,s.jsx)(h.nd,{className:"text-center w-[56px] p-2",children:"#"}),(0,s.jsx)(h.nd,{className:"text-center w-[84px] p-2",children:"تأكيد"}),(0,s.jsx)(h.nd,{className:"text-center w-[56px] p-2"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"الفاتورة"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"التاريخ"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"النوع"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"الوصف"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"علينا"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"لنا"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"المحصلة"}),(0,s.jsx)(h.nd,{className:"text-center p-2",children:"المستخدم"}),(0,s.jsx)(h.nd,{className:"text-center w-[64px] p-2",children:"إجراءات"})]})}),(0,s.jsx)(h.BF,{className:"divide-y divide-border",children:(0,s.jsx)(O.N,{mode:"wait",children:el?(0,s.jsx)(h.Hj,{children:(0,s.jsx)(h.nA,{colSpan:12,className:"py-10 text-center",children:(0,s.jsx)(_.A,{className:"h-6 w-6 animate-spin mx-auto"})})},"loading"):0===eH.length?(0,s.jsx)(h.Hj,{children:(0,s.jsx)(h.nA,{colSpan:12,className:"py-10 text-center text-muted-foreground",children:"لا توجد بيانات."})},"empty"):(0,s.jsx)($.P.tr,{variants:{hiddenLeft:{x:-24,opacity:0},hiddenRight:{x:24,opacity:0},visible:{x:0,opacity:1}},initial:"right"===ey?"hiddenRight":"hiddenLeft",animate:"visible",exit:"left"===ey?"hiddenLeft":"hiddenRight",transition:{duration:.22},children:(0,s.jsx)(h.nA,{colSpan:12,className:"p-0",children:(0,s.jsx)(h.XI,{className:"border-t",children:(0,s.jsx)(h.BF,{className:"divide-y divide-border",children:eH.map((e,t)=>{var a;let n=!!eA[e.id],l=W(e),d=X(e);return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)(h.Hj,{className:(0,m.cn)(e.isConfirmed&&"bg-accent/40"),children:[(0,s.jsx)(h.nA,{className:"text-center font-semibold p-2",children:ez+t+1}),(0,s.jsx)(h.nA,{className:"text-center p-2",children:(0,s.jsx)(N.S,{checked:!!e.isConfirmed,onCheckedChange:t=>{var a;return a=!!t,void(e.isConfirmed&&!a?eR({open:!0,id:e.id,type:e.entryType}):eE(e.id,e.entryType,!0))}})}),(0,s.jsx)(h.nA,{className:"text-center p-2",children:(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>eS(t=>({...t,[e.id]:!t[e.id]})),children:(0,s.jsx)(T.A,{className:(0,m.cn)("h-4 w-4 transition-transform",n&&"rotate-180")})})}),(0,s.jsx)(h.nA,{className:"text-center font-bold p-2",children:e.invoiceNumber||"-"}),(0,s.jsx)(h.nA,{className:"text-center whitespace-nowrap p-2",children:e.date?(0,x.GP)((0,f.H)(e.date),"yyyy-MM-dd"):"-"}),(0,s.jsx)(h.nA,{className:"text-center p-2",children:(0,s.jsx)(j.E,{className:"cursor-pointer select-none",variant:"transaction"===e.entryType?"destructive":"secondary",onClick:()=>(e=>{var t;let a=(null==(t=et.find(e=>e.id===ea))?void 0:t.name)||"-",s="البورصة: ".concat(a,"\n")+"النوع: ".concat(Y(e),"\n")+"التاريخ: ".concat(e.date?(0,x.GP)((0,f.H)(e.date),"yyyy-MM-dd"):"-","\n")+"الفاتورة: ".concat(e.invoiceNumber||"-","\n")+"الوصف: ".concat(e.description||"-");navigator.clipboard.writeText(s),ee({title:"تم نسخ المعلومات"})})(e),children:Y(e)})}),(0,s.jsx)(h.nA,{className:"text-center p-2",children:e.description||"-"}),(0,s.jsx)(h.nA,{className:"text-center font-bold text-destructive whitespace-nowrap font-mono tabular-nums p-2",children:l>0?q(l):"-"}),(0,s.jsx)(h.nA,{className:"text-center font-bold whitespace-nowrap font-mono tabular-nums p-2",children:d>0?q(d):"-"}),(0,s.jsx)(h.nA,{className:"text-center font-bold whitespace-nowrap font-mono tabular-nums p-2",children:q(null!=(a=e.balance)?a:d-l)}),(0,s.jsx)(h.nA,{className:"text-center whitespace-nowrap p-2",children:e.userName||"-"}),(0,s.jsx)(h.nA,{className:"text-center p-2",children:(0,s.jsxs)(y.rI,{children:[(0,s.jsx)(y.ty,{asChild:!0,children:(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(D.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(y.SQ,{align:"end",children:[(0,s.jsxs)(y._2,{onClick:()=>ek({open:!0,item:e}),children:[(0,s.jsx)(z.A,{className:"h-4 w-4 ms-1"}),"سجل التعديلات"]}),(0,s.jsxs)(y._2,{onClick:()=>(e=>{var t,a;let s=(null==(t=et.find(e=>e.id===ea))?void 0:t.name)||"-",r=["البورصة: ".concat(s),"الفاتورة: ".concat(e.invoiceNumber||"-"),"التاريخ: ".concat(e.date?(0,x.GP)((0,f.H)(e.date),"yyyy-MM-dd"):"-"),"النوع: ".concat(Y(e)),"الوصف: ".concat(e.description||"-"),"علينا: ".concat(q(W(e))),"لنا: ".concat(q(X(e))),"المحصلة: ".concat(q(null!=(a=e.balance)?a:X(e)-W(e))),"المستخدم: ".concat(e.userName||"-")];Array.isArray(e.details)&&e.details.length&&(r.push("— التفاصيل —"),e.details.forEach((e,t)=>{var a;return r.push("".concat(t+1,") ").concat(e.partyName||e.paidTo||"-"," | ").concat(e.originalAmount," ").concat(e.originalCurrency," @ ").concat(null!=(a=e.rate)?a:"-"," = ").concat(e.amountInUSD," USD | ").concat(e.note||"-"))})),navigator.clipboard.writeText(r.join("\n")),ee({title:"تم نسخ التفاصيل"})})(e),children:[(0,s.jsx)(H.A,{className:"h-4 w-4 ms-1"}),"نسخ المعلومات"]}),(0,s.jsx)(y.mB,{}),(0,s.jsx)(J.A,{batch:e,exchanges:et,onSuccess:e_,children:(0,s.jsxs)(y._2,{onSelect:e=>e.preventDefault(),children:[(0,s.jsx)(E.A,{className:"h-4 w-4 ms-1"}),"تعديل"]})}),(0,s.jsxs)(y._2,{className:"text-destructive focus:text-destructive",onClick:()=>eF(e),children:[(0,s.jsx)(F.A,{className:"h-4 w-4 ms-1"}),"حذف"]})]})]})})]}),(0,s.jsx)(O.N,{children:n&&(0,s.jsx)(h.Hj,{children:(0,s.jsx)(h.nA,{colSpan:12,className:"p-0",children:(0,s.jsx)($.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"bg-muted/50 p-3",children:Array.isArray(e.details)&&e.details.length>0?(0,s.jsx)("div",{className:"grid gap-2",children:e.details.map((t,a)=>{var r;return(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 rounded-md border p-2 bg-background text-sm",children:[(0,s.jsxs)("div",{className:"font-semibold",children:["الطرف:"," ",(0,s.jsx)("span",{className:"font-normal",children:t.partyName||t.paidTo||"-"})]}),(0,s.jsxs)("div",{className:"font-semibold",children:["بواسطة:"," ",(0,s.jsx)("span",{className:"font-normal",children:t.intermediary||e.userName||"-"})]}),(0,s.jsxs)("div",{className:"font-semibold",children:["النوع:"," ",(0,s.jsx)("span",{className:"font-normal",children:"transaction"===e.entryType?"دين":"payment"===t.type?"دفع":"قبض"})]}),(0,s.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:["المبلغ الأصلي:"," ",(0,s.jsxs)("span",{className:"font-normal whitespace-nowrap",children:[null==(r=t.originalAmount)?void 0:r.toLocaleString()," ",t.originalCurrency]})]}),(0,s.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:["سعر الصرف:"," ",(0,s.jsx)("span",{className:"font-normal whitespace-nowrap",children:"USD"!==t.originalCurrency?t.rate:"-"})]}),(0,s.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:["المعادل بالدولار:"," ",(0,s.jsx)("span",{className:"font-bold whitespace-nowrap font-mono tabular-nums",children:q(t.amountInUSD)})]}),t.note?(0,s.jsxs)("div",{className:"md:col-span-6",children:[(0,s.jsx)("span",{className:"font-semibold",children:"ملاحظات: "}),(0,s.jsx)("span",{children:t.note})]}):null]},a)})}):(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"لا توجد تفاصيل إضافية"})})})})})})]},e.id)})})})})},"".concat(ev,"-").concat(eN,"-").concat(ea,"-").concat(eo,"-").concat(eu,"-").concat(ex))})})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-3 px-4 py-3",children:[(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["الصفحة ",ev+1," من ",eD," — ",eM.length," سجل"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(b.l6,{value:String(eN),onValueChange:e=>{eb(parseInt(e,10)),ej(0)},children:[(0,s.jsx)(b.bq,{className:"h-8 w-[120px]",children:(0,s.jsx)(b.yv,{})}),(0,s.jsx)(b.gC,{align:"end",children:[5,15,30,50,100].map(e=>(0,s.jsxs)(b.eb,{value:String(e),children:[e," / صفحة"]},e))})]}),(0,s.jsx)(g.$,{variant:"outline",size:"sm",disabled:0===ev,onClick:()=>{ew("left"),ej(0)},title:"الأولى",children:(0,s.jsx)(I.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{variant:"outline",size:"sm",disabled:0===ev,onClick:()=>{ew("left"),ej(e=>Math.max(0,e-1))},title:"السابق",children:(0,s.jsx)(P.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{variant:"outline",size:"sm",disabled:ev>=eD-1,onClick:()=>{ew("right"),ej(e=>Math.min(eD-1,e+1))},title:"التالي",children:(0,s.jsx)(V.A,{className:"h-4 w-4"})}),(0,s.jsx)(g.$,{variant:"outline",size:"sm",disabled:ev>=eD-1,onClick:()=>{ew("right"),ej(eD-1)},title:"الأخيرة",children:(0,s.jsx)(Z.A,{className:"h-4 w-4"})})]})]})]})}),(0,s.jsx)(w.Lt,{open:eC.open,onOpenChange:e=>eR(t=>({...t,open:e})),children:(0,s.jsxs)(w.EO,{children:[(0,s.jsxs)(w.wd,{children:[(0,s.jsx)(w.r7,{children:"تأكيد الإلغاء"}),(0,s.jsx)(w.$v,{children:"هل تريد إلغاء تأكيد هذه العملية المالية؟"})]}),(0,s.jsxs)(w.ck,{children:[(0,s.jsx)(w.Zr,{children:"رجوع"}),(0,s.jsx)(w.Rx,{onClick:()=>{eC.id&&eC.type&&eE(eC.id,eC.type,!1),eR({open:!1})},children:"نعم، إلغاء التأكيد"})]})]})}),(0,s.jsx)(A.lG,{open:eL.open,onOpenChange:e=>ek(t=>({...t,open:e})),children:(0,s.jsxs)(A.Cf,{className:"max-w-4xl",children:[(0,s.jsx)(A.c7,{children:(0,s.jsxs)(A.L3,{children:["سجل التعديلات — الفاتورة: ",(null==(a=eL.item)?void 0:a.invoiceNumber)||"-"]})}),(0,s.jsx)("div",{className:"border rounded-md overflow-auto",children:(0,s.jsxs)(h.XI,{children:[(0,s.jsx)(h.A0,{children:(0,s.jsxs)(h.Hj,{children:[(0,s.jsx)(h.nd,{className:"text-center",children:"التاريخ"}),(0,s.jsx)(h.nd,{className:"text-center",children:"الموظف"}),(0,s.jsx)(h.nd,{className:"text-center",children:"نوع التعديل"}),(0,s.jsx)(h.nd,{className:"text-center",children:"القديم"}),(0,s.jsx)(h.nd,{className:"text-center",children:"الجديد"})]})}),(0,s.jsx)(h.BF,{children:Array.isArray(null==(n=eL.item)?void 0:n.auditLog)&&eL.item.auditLog.length?eL.item.auditLog.map((e,t)=>{var a,r,n;let l=(null==(a=e.action)?void 0:a.includes("delete"))?"حذف":(null==(r=e.action)?void 0:r.includes("update"))?"تعديل":(null==(n=e.action)?void 0:n.includes("create"))?"إضافة":"غير معروف",d="حذف"===l?"bg-rose-100 text-rose-800":"تعديل"===l?"bg-amber-100 text-amber-800":"bg-emerald-100 text-emerald-800";return(0,s.jsxs)(h.Hj,{children:[(0,s.jsx)(h.nA,{className:"text-center",children:e.timestamp?(0,x.GP)((0,f.H)(e.timestamp),"yyyy-MM-dd HH:mm"):"-"}),(0,s.jsx)(h.nA,{className:"text-center",children:e.userName||"-"}),(0,s.jsx)(h.nA,{className:"text-center font-semibold ".concat(d),children:l}),(0,s.jsx)(h.nA,{className:"text-xs whitespace-pre-wrap text-muted-foreground",children:e.oldData?JSON.stringify(e.oldData,null,2):"—"}),(0,s.jsx)(h.nA,{className:"text-xs whitespace-pre-wrap",children:e.newData?JSON.stringify(e.newData,null,2):"—"})]},t)}):(0,s.jsx)(h.Hj,{children:(0,s.jsx)(h.nA,{colSpan:5,className:"text-center text-muted-foreground",children:"لا يوجد سجل تعديلات"})})})]})})]})})]})}var K=a(75660),ee=a(7545),et=a(18332),ea=a(20063);function es(){let e=(0,ea.useSearchParams)().get("exchangeId")||"",[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[d,i]=(0,r.useState)(null),c=(0,r.useCallback)(()=>{l(!0),(0,K.r)().then(e=>{if(e.error||!e.accounts)throw Error(e.error||"Failed to load exchanges.");a(e.accounts)}).catch(e=>i(e.message)).finally(()=>l(!1))},[]);return((0,r.useEffect)(()=>{c()},[c]),n)?(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(_.A,{className:"h-8 w-8 animate-spin"})}):d?(0,s.jsxs)(et.Fc,{variant:"destructive",children:[(0,s.jsx)(ee.A,{className:"h-4 w-4"}),(0,s.jsx)(et.XL,{children:"حدث خطأ!"}),(0,s.jsx)(et.TN,{children:d})]}):(0,s.jsx)(Q,{initialExchanges:t,initialExchangeId:e})}function er(){return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(p.Zp,{children:(0,s.jsx)(p.aR,{children:(0,s.jsx)(p.ZB,{children:"إدارة البورصات والمعاملات"})})}),(0,s.jsx)("div",{className:"flex justify-center p-8",children:(0,s.jsx)(_.A,{className:"h-8 w-8 animate-spin"})})]}),children:(0,s.jsx)(es,{})})})}},50276:(e,t,a)=>{"use strict";a.d(t,{V:()=>m});var s=a(95155);a(12115);var r=a(51190),n=a(63263),l=a(66984),d=a(76422),i=a(64269),c=a(3998),o=a(14223);function m(e){let{className:t,classNames:a,showOutsideDays:m=!0,...u}=e;return(0,s.jsx)(l.hv,{showOutsideDays:m,className:(0,i.cn)("p-3",t),locale:d.ar,formatters:{formatCaption:(e,t)=>{var a;let{year:s,month:r}=(0,l.cq)(),n=e.getFullYear(),d=e.getMonth(),i=null!=(a=null==s?void 0:s.getFullYear())?a:n,c=(0,o.GP)(new Date(i,d),"MMMM",{locale:null==t?void 0:t.locale});return"".concat(c," ").concat(i)}},classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,c.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent/50 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,c.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(r.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(n.A,{className:"h-4 w-4"})}},...u})}m.displayName="Calendar"},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>p,HM:()=>m,L3:()=>h,c7:()=>x,lG:()=>i,rr:()=>g,zM:()=>c});var s=a(95155),r=a(12115),n=a(89511),l=a(26615),d=a(64269);let i=n.bL,c=n.l9,o=n.ZL,m=n.bm,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=n.hJ.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,showCloseButton:i=!0,...c}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,d.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),onOpenAutoFocus:e=>e.preventDefault(),...c,children:[r,i&&(0,s.jsxs)(n.bm,{className:"absolute left-4 top-4 rounded-full p-1.5 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground bg-muted hover:bg-muted/80",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-right",t),...a})};x.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 rtl:space-x-reverse",t),...a})};p.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=n.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=n.VY.displayName},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(95155),r=a(12115),n=a(64269);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},73457:(e,t,a)=>{"use strict";a.d(t,{S:()=>i});var s=a(95155),r=a(12115),n=a(38162),l=a(72251),d=a(64269);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(n.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})})});i.displayName=n.bL.displayName},75660:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});var s=a(30926);let r=(0,s.createServerReference)("7fff34be9ad53d22bcedbe289fd19cffbcbb61a920",s.callServer,void 0,s.findSourceMapURL,"getExchanges")},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var s=a(95155),r=a(12115),n=a(10489),l=a(83101),d=a(64269);let i=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,d.cn)(i(),a),...r})});c.displayName=n.b.displayName},80187:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});var s=a(30926);let r=(0,s.createServerReference)("7f085acd10c7b589563e59e7e18d605a9cf6eb6b56",s.callServer,void 0,s.findSourceMapURL,"getBoxes")},83686:()=>{},87270:(e,t,a)=>{"use strict";a.d(t,{A0:()=>d,BF:()=>i,Gg:()=>c,Hj:()=>o,XI:()=>l,nA:()=>u,nd:()=>m});var s=a(95155),r=a(12115),n=a(64269);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});i.displayName="TableBody";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})});c.displayName="TableFooter";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});o.displayName="TableRow";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-right align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},96133:(e,t,a)=>{"use strict";a.d(t,{m:()=>r});var s=a(30926);let r=(0,s.createServerReference)("7fe3cedf8b5b39f6ca6561f08402f1ad7a82ecff97",s.callServer,void 0,s.findSourceMapURL,"getSettings")},96269:(e,t,a)=>{Promise.resolve().then(a.bind(a,44994))},97916:(e,t,a)=>{"use strict";a.d(t,{O:()=>i});var s=a(95155),r=a(12115),n=a(65142),l=a(64269);let d=e=>{if("string"!=typeof e||""===e.trim())return;let t=parseFloat(e.replace(/,/g,""));return isNaN(t)?void 0:t},i=r.forwardRef((e,t)=>{let{value:a,onValueChange:i,className:c,allowNegative:o=!1,currency:m,currencyClassName:u,direction:f="rtl",...x}=e,p=e=>{if(null==e||""===e)return"";let t="string"==typeof e?d(e):e;return void 0===t?String(e):new Intl.NumberFormat("en-US").format(t)},[h,g]=r.useState(p(a));r.useEffect(()=>{g(p(a))},[a]);let v={...x,ref:t,type:"text",inputMode:"decimal",placeholder:"0.00",value:h||"",onChange:e=>{let t=e.target.value.replace(/,/g,"");if((o?/^-?\d*\.?\d*$/:/^\d*\.?\d*$/).test(t)||""===t){let e=d(t);g(void 0!==e?p(e):t),i&&i(e)}}};return m?(0,s.jsxs)("div",{className:(0,l.cn)("relative flex items-center w-full",c),children:[(0,s.jsx)(n.p,{...v,className:(0,l.cn)("z-10 text-right w-full","rtl"===f?"rounded-l-none rounded-r-lg border-l-0":"rounded-r-none rounded-l-lg border-r-0")}),(0,s.jsx)("div",{className:(0,l.cn)("p-2 bg-muted border h-full flex items-center",u,"rtl"===f?"rounded-l-lg":"rounded-r-lg"),children:(0,s.jsx)("span",{className:"text-xs font-semibold",children:m})})]}):(0,s.jsx)(n.p,{...v,className:(0,l.cn)("text-right",c)})});i.displayName="NumericInput"},98053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>i,Rx:()=>g,Zr:()=>v,ck:()=>x,r7:()=>p,tv:()=>c,wd:()=>f});var s=a(95155),r=a(12115),n=a(35646),l=a(64269),d=a(3998);let i=n.bL,c=n.l9,o=n.ZL,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});u.displayName=n.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",a),...r})});p.displayName=n.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=n.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,d.r)(),a),...r})});g.displayName=n.rc.displayName;let v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});v.displayName=n.ZD.displayName}},e=>{e.O(0,[9135,7210,3524,4909,9625,315,5111,4127,9967,1374,783,4223,8994,84,2612,4486,9667,4762,2312,6779,8441,1255,7358],()=>e(e.s=96269)),_N_E=e.O()}]);