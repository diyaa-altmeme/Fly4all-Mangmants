"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8579],{27432:(e,a,r)=>{r.d(a,{K:()=>m});var t=r(95155);r(12115);var n=r(14223),s=r(28127),i=r(64269),l=r(3998),c=r(50276),o=r(26333),d=r(65142);function u(e){let{date:a,setDate:r}=e,n=a?"".concat(String(a.getHours()).padStart(2,"0"),":").concat(String(a.getMinutes()).padStart(2,"0")):"";return(0,t.jsx)(d.p,{type:"time",value:n,onChange:e=>{let t=e.target.value;if(!t||!a)return;let[n,s]=t.split(":").map(Number),i=new Date(a);i.setHours(n),i.setMinutes(s),r(i)},className:"text-center"})}function m(e){let{date:a,setDate:r}=e;return(0,t.jsxs)(o.AM,{children:[(0,t.jsx)(o.Wv,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"outline",className:(0,i.cn)("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[(0,t.jsx)(s.A,{className:"mr-2 h-4 w-4"}),a?(0,n.GP)(a,"yyyy-MM-dd hh:mm a"):(0,t.jsx)("span",{children:"اختر تاريخ ووقت"})]})}),(0,t.jsxs)(o.hl,{className:"w-auto p-0",children:[(0,t.jsx)(c.V,{mode:"single",selected:a,onSelect:e=>{if(!e)return void r(void 0);let t=new Date(e);a&&(t.setHours(a.getHours()),t.setMinutes(a.getMinutes()),t.setSeconds(a.getSeconds())),r(t)},initialFocus:!0}),(0,t.jsx)("div",{className:"p-3 border-t border-border",children:(0,t.jsx)(u,{date:a,setDate:r})})]})]})}},31120:(e,a,r)=>{r.d(a,{T:()=>i});var t=r(95155),n=r(12115),s=r(64269);let i=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...n})});i.displayName="Textarea"},41052:(e,a,r)=>{r.d(a,{C5:()=>j,MJ:()=>y,Rr:()=>b,eI:()=>x,lR:()=>p,lV:()=>o,zB:()=>u});var t=r(95155),n=r(12115),s=r(32467),i=r(22544),l=r(64269),c=r(76444);let o=i.Op,d=n.createContext({}),u=e=>{let{...a}=e;return(0,t.jsx)(d.Provider,{value:{name:a.name},children:(0,t.jsx)(i.xI,{...a})})},m=()=>{let e=n.useContext(d),a=n.useContext(h),{getFieldState:r,formState:t}=(0,i.xW)(),s=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=a;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},h=n.createContext({}),x=n.forwardRef((e,a)=>{let{className:r,...s}=e,i=n.useId();return(0,t.jsx)(h.Provider,{value:{id:i},children:(0,t.jsx)("div",{ref:a,className:(0,l.cn)("space-y-2",r),...s})})});x.displayName="FormItem";let p=n.forwardRef((e,a)=>{let{className:r,...n}=e,{error:s,formItemId:i}=m();return(0,t.jsx)(c.J,{ref:a,className:(0,l.cn)(s&&"text-destructive",r),htmlFor:i,...n})});p.displayName="FormLabel";let y=n.forwardRef((e,a)=>{let{...r}=e,{error:n,formItemId:i,formDescriptionId:l,formMessageId:c}=m();return(0,t.jsx)(s.DX,{ref:a,id:i,"aria-describedby":n?"".concat(l," ").concat(c):"".concat(l),"aria-invalid":!!n,...r})});y.displayName="FormControl";let b=n.forwardRef((e,a)=>{let{className:r,...n}=e,{formDescriptionId:s}=m();return(0,t.jsx)("p",{ref:a,id:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});b.displayName="FormDescription";let j=n.forwardRef((e,a)=>{var r;let{className:n,children:s,...i}=e,{error:c,formMessageId:o}=m(),d=c?String(null!=(r=null==c?void 0:c.message)?r:""):s;return d?(0,t.jsx)("p",{ref:a,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",n),...i,children:d}):null});j.displayName="FormMessage"},50276:(e,a,r)=>{r.d(a,{V:()=>u});var t=r(95155);r(12115);var n=r(51190),s=r(63263),i=r(66984),l=r(76422),c=r(64269),o=r(3998),d=r(14223);function u(e){let{className:a,classNames:r,showOutsideDays:u=!0,...m}=e;return(0,t.jsx)(i.hv,{showOutsideDays:u,className:(0,c.cn)("p-3",a),locale:l.ar,formatters:{formatCaption:(e,a)=>{var r;let{year:t,month:n}=(0,i.cq)(),s=e.getFullYear(),l=e.getMonth(),c=null!=(r=null==t?void 0:t.getFullYear())?r:s,o=(0,d.GP)(new Date(c,l),"MMMM",{locale:null==a?void 0:a.locale});return"".concat(o," ").concat(c)}},classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,c.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent/50 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,c.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...a}=e;return(0,t.jsx)(n.A,{className:"h-4 w-4"})},IconRight:e=>{let{...a}=e;return(0,t.jsx)(s.A,{className:"h-4 w-4"})}},...m})}u.displayName="Calendar"},50909:(e,a,r)=>{r.d(a,{C:()=>o,z:()=>c});var t=r(95155),n=r(12115),s=r(24058),i=r(75797),l=r(64269);let c=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.bL,{className:(0,l.cn)("grid gap-2",r),...n,ref:a})});c.displayName=s.bL.displayName;let o=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.q7,{ref:a,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:(0,t.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=s.q7.displayName},53404:(e,a,r)=>{r.d(a,{t:()=>t});let t=[{code:"JFK",name:"John F. Kennedy International Airport",city:"New York",country:"USA",arabicName:"نيويورك",arabicCountry:"الولايات المتحدة",useCount:10},{code:"LAX",name:"Los Angeles International Airport",city:"Los Angeles",country:"USA",arabicName:"لوس أنجلوس",arabicCountry:"الولايات المتحدة",useCount:5},{code:"LHR",name:"Heathrow Airport",city:"London",country:"United Kingdom",arabicName:"لندن",arabicCountry:"المملكة المتحدة",useCount:15},{code:"CDG",name:"Charles de Gaulle Airport",city:"Paris",country:"France",arabicName:"باريس",arabicCountry:"فرنسا",useCount:8},{code:"HND",name:"Haneda Airport",city:"Tokyo",country:"Japan",arabicName:"طوكيو",arabicCountry:"اليابان"},{code:"DXB",name:"Dubai International Airport",city:"Dubai",country:"UAE",arabicName:"دبي",arabicCountry:"الإمارات",useCount:30},{code:"AMS",name:"Amsterdam Airport Schiphol",city:"Amsterdam",country:"Netherlands",arabicName:"أمستردام",arabicCountry:"هولندا"},{code:"FRA",name:"Frankfurt Airport",city:"Frankfurt",country:"Germany",arabicName:"فرانكفورت",arabicCountry:"ألمانيا"},{code:"IST",name:"Istanbul Airport",city:"Istanbul",country:"Turkey",arabicName:"اسطنبول",arabicCountry:"تركيا",useCount:25},{code:"SAW",name:"Sabiha Gokcen International Airport",city:"Istanbul",country:"Turkey",arabicName:"اسطنبول - صبيحة",arabicCountry:"تركيا",useCount:20},{code:"ESB",name:"Esenboğa International Airport",city:"Ankara",country:"Turkey",arabicName:"أنقرة",arabicCountry:"تركيا"},{code:"BGW",name:"Baghdad International Airport",city:"Baghdad",country:"Iraq",arabicName:"بغداد",arabicCountry:"العراق",useCount:50},{code:"NJF",name:"Al Najaf International Airport",city:"Najaf",country:"Iraq",arabicName:"النجف",arabicCountry:"العراق",useCount:45},{code:"EBL",name:"Erbil International Airport",city:"Erbil",country:"Iraq",arabicName:"أربيل",arabicCountry:"العراق",useCount:20},{code:"BSR",name:"Basra International Airport",city:"Basra",country:"Iraq",arabicName:"البصرة",arabicCountry:"العراق",useCount:18},{code:"ISU",name:"Sulaimaniyah International Airport",city:"Sulaimaniyah",country:"Iraq",arabicName:"السليمانية",arabicCountry:"العراق",useCount:15},{code:"CAI",name:"Cairo International Airport",city:"Cairo",country:"Egypt",arabicName:"القاهرة",arabicCountry:"مصر",useCount:12},{code:"BEY",name:"Beirut-Rafic Hariri International Airport",city:"Beirut",country:"Lebanon",arabicName:"بيروت",arabicCountry:"لبنان",useCount:18},{code:"AMM",name:"Queen Alia International Airport",city:"Amman",country:"Jordan",arabicName:"عمان",arabicCountry:"الأردن",useCount:9},{code:"RUH",name:"King Khalid International Airport",city:"Riyadh",country:"Saudi Arabia",arabicName:"الرياض",arabicCountry:"السعودية"},{code:"JED",name:"King Abdulaziz International Airport",city:"Jeddah",country:"Saudi Arabia",arabicName:"جدة",arabicCountry:"السعودية"},{code:"KWI",name:"Kuwait International Airport",city:"Kuwait City",country:"Kuwait",arabicName:"الكويت",arabicCountry:"الكويت"},{code:"DOH",name:"Hamad International Airport",city:"Doha",country:"Qatar",arabicName:"الدوحة",arabicCountry:"قطر"},{code:"DAM",name:"Damascus International Airport",city:"Damascus",country:"Syria",arabicName:"دمشق",arabicCountry:"سوريا"},{code:"ALP",name:"Aleppo International Airport",city:"Aleppo",country:"Syria",arabicName:"حلب",arabicCountry:"سوريا"},{code:"THR",name:"Mehrabad International Airport",city:"Tehran",country:"Iran",arabicName:"طهران",arabicCountry:"إيران",useCount:22},{code:"IKA",name:"Imam Khomeini International Airport",city:"Tehran",country:"Iran",arabicName:"طهران - الإمام الخميني",arabicCountry:"إيران",useCount:19},{code:"MHD",name:"Mashhad International Airport",city:"Mashhad",country:"Iran",arabicName:"مشهد",arabicCountry:"إيران",useCount:16},{code:"SYZ",name:"Shiraz International Airport",city:"Shiraz",country:"Iran",arabicName:"شيراز",arabicCountry:"إيران"},{code:"KUL",name:"Kuala Lumpur International Airport",city:"Kuala Lumpur",country:"Malaysia",arabicName:"كوالالمبور",arabicCountry:"ماليزيا"},{code:"BKK",name:"Suvarnabhumi Airport",city:"Bangkok",country:"Thailand",arabicName:"بانكوك",arabicCountry:"تايلاند"},{code:"SIN",name:"Singapore Changi Airport",city:"Singapore",country:"Singapore",arabicName:"سنغافورة",arabicCountry:"سنغافورة"},{code:"DEL",name:"Indira Gandhi International Airport",city:"Delhi",country:"India",arabicName:"دلهي",arabicCountry:"الهند"},{code:"BOM",name:"Chhatrapati Shivaji Maharaj International Airport",city:"Mumbai",country:"India",arabicName:"مومباي",arabicCountry:"الهند"},{code:"AUH",name:"Abu Dhabi International Airport",city:"Abu Dhabi",country:"UAE",arabicName:"أبو ظبي",arabicCountry:"الإمارات"},{code:"SHJ",name:"Sharjah International Airport",city:"Sharjah",country:"UAE",arabicName:"الشارقة",arabicCountry:"الإمارات"},{code:"MCT",name:"Muscat International Airport",city:"Muscat",country:"Oman",arabicName:"مسقط",arabicCountry:"عمان"},{code:"BAH",name:"Bahrain International Airport",city:"Manama",country:"Bahrain",arabicName:"البحرين",arabicCountry:"البحرين"},{code:"PEK",name:"Beijing Capital International Airport",city:"Beijing",country:"China",arabicName:"بكين",arabicCountry:"الصين"},{code:"PVG",name:"Shanghai Pudong International Airport",city:"Shanghai",country:"China",arabicName:"شنغهاي",arabicCountry:"الصين"},{code:"CAN",name:"Guangzhou Baiyun International Airport",city:"Guangzhou",country:"China",arabicName:"قوانغتشو",arabicCountry:"الصين"},{code:"SYD",name:"Sydney Kingsford Smith Airport",city:"Sydney",country:"Australia",arabicName:"سيدني",arabicCountry:"أستراليا"},{code:"MEL",name:"Melbourne Airport",city:"Melbourne",country:"Australia",arabicName:"ملبورن",arabicCountry:"أستراليا"},{code:"YYZ",name:"Toronto Pearson International Airport",city:"Toronto",country:"Canada",arabicName:"تورونتو",arabicCountry:"كندا"},{code:"YVR",name:"Vancouver International Airport",city:"Vancouver",country:"Canada",arabicName:"فانكوفر",arabicCountry:"كندا"},{code:"GRU",name:"S\xe3o Paulo/Guarulhos International Airport",city:"S\xe3o Paulo",country:"Brazil",arabicName:"ساو باولو",arabicCountry:"البرازيل"},{code:"MEX",name:"Mexico City International Airport",city:"Mexico City",country:"Mexico",arabicName:"مكسيكو سيتي",arabicCountry:"المكسيك"},{code:"SVO",name:"Sheremetyevo International Airport",city:"Moscow",country:"Russia",arabicName:"موسكو - شيريميتييفو",arabicCountry:"روسيا"},{code:"DME",name:"Domodedovo International Airport",city:"Moscow",country:"Russia",arabicName:"موسكو - دوموديدوفو",arabicCountry:"روسيا"},{code:"BCN",name:"Barcelona–El Prat Airport",city:"Barcelona",country:"Spain",arabicName:"برشلونة",arabicCountry:"إسبانيا"},{code:"MAD",name:"Adolfo Su\xe1rez Madrid–Barajas Airport",city:"Madrid",country:"Spain",arabicName:"مدريد",arabicCountry:"إسبانيا"},{code:"FCO",name:"Leonardo da Vinci–Fiumicino Airport",city:"Rome",country:"Italy",arabicName:"روما",arabicCountry:"إيطاليا"},{code:"MXP",name:"Milan Malpensa Airport",city:"Milan",country:"Italy",arabicName:"ميلانو",arabicCountry:"إيطاليا"},{code:"ATH",name:"Athens International Airport",city:"Athens",country:"Greece",arabicName:"أثينا",arabicCountry:"اليونان"},{code:"LIS",name:"Lisbon Airport",city:"Lisbon",country:"Portugal",arabicName:"لشبونة",arabicCountry:"البرتغال"},{code:"CPH",name:"Copenhagen Airport",city:"Copenhagen",country:"Denmark",arabicName:"كوبنهاغن",arabicCountry:"الدنمارك"},{code:"OSL",name:"Oslo Airport, Gardermoen",city:"Oslo",country:"Norway",arabicName:"أوسلو",arabicCountry:"النرويج"},{code:"ARN",name:"Stockholm Arlanda Airport",city:"Stockholm",country:"Sweden",arabicName:"ستوكهولم",arabicCountry:"السويد"},{code:"HEL",name:"Helsinki-Vantaa Airport",city:"Helsinki",country:"Finland",arabicName:"هلسنكي",arabicCountry:"فنلندا"},{code:"VIE",name:"Vienna International Airport",city:"Vienna",country:"Austria",arabicName:"فيينا",arabicCountry:"النمسا"},{code:"ZRH",name:"Zurich Airport",city:"Zurich",country:"Switzerland",arabicName:"زيورخ",arabicCountry:"سويسرا"},{code:"GVA",name:"Geneva Airport",city:"Geneva",country:"Switzerland",arabicName:"جنيف",arabicCountry:"سويسرا"},{code:"BRU",name:"Brussels Airport",city:"Brussels",country:"Belgium",arabicName:"بروكسل",arabicCountry:"بلجيكا"},{code:"DUB",name:"Dublin Airport",city:"Dublin",country:"Ireland",arabicName:"دبلن",arabicCountry:"أيرلندا"},{code:"PRG",name:"V\xe1clav Havel Airport Prague",city:"Prague",country:"Czech Republic",arabicName:"براغ",arabicCountry:"جمهورية التشيك"},{code:"BUD",name:"Budapest Ferenc Liszt International Airport",city:"Budapest",country:"Hungary",arabicName:"بودابست",arabicCountry:"المجر"},{code:"WAW",name:"Warsaw Chopin Airport",city:"Warsaw",country:"Poland",arabicName:"وارسو",arabicCountry:"بولندا"},{code:"KBP",name:"Boryspil International Airport",city:"Kyiv",country:"Ukraine",arabicName:"كييف",arabicCountry:"أوكرانيا"},{code:"OTP",name:"Henri Coandă International Airport",city:"Bucharest",country:"Romania",arabicName:"بوخارست",arabicCountry:"رومانيا"}]},54130:(e,a,r)=>{r.d(a,{x:()=>n});var t=r(30926);let n=(0,t.createServerReference)("40d0a9025cfae5e19ff9bfb1d8c43204722c4febb5",t.callServer,void 0,t.findSourceMapURL,"findBookingByRef")},55858:(e,a,r)=>{r.d(a,{B:()=>n});var t=r(30926);let n=(0,t.createServerReference)("40ca4bf9958b6d1d26e411af5f72ad73b881d7ffc2",t.callServer,void 0,t.findSourceMapURL,"addBooking")},81937:(e,a,r)=>{r.d(a,{A:()=>er});var t=r(95155),n=r(12115),s=r(3998),i=r(51834),l=r(26615),c=r(56639),o=r(76140),d=r(92033),u=r(22544),m=r(66942),h=r(54879),x=r(65142),p=r(11186),y=r(87270),b=r(2546),j=r(98211),g=r(10193),N=r(60406),f=r(32810),v=r(36204),C=r(22452),A=r(73180),w=r(88964),I=r(13630),S=r(76251),D=r(90109),k=r(30926);let R=(0,k.createServerReference)("60186e37473393f3008b2a76484829f65c2825bc22",k.callServer,void 0,k.findSourceMapURL,"updateBooking");var B=r(55858),M=r(54130),T=r(64269),z=r(14223),F=r(15894),P=r(23639),V=r(27432),H=r(97916),L=r(5470),E=r(23451),O=r(41052),J=r(98053),U=r(53404),Y=r(31120),K=r(50909),_=r(76444);let G=e=>{let{title:a,children:r,className:n}=e;return(0,t.jsxs)("div",{className:(0,T.cn)("relative p-4 border rounded-lg mt-6",n),children:[(0,t.jsx)("h3",{className:"absolute -top-3 right-4 bg-background px-2 text-base font-bold text-primary",children:a}),r]})},$=h.Ik({id:h.Yj().optional(),name:h.Yj().min(1,"الاسم مطلوب"),passportNumber:h.Yj().optional(),ticketNumber:h.Yj().min(1,"رقم التذكرة مطلوب"),purchasePrice:h.au.number().min(0,"سعر الشراء يجب أن يكون 0 أو أكثر.").default(0),clientStatement:h.Yj().optional(),salePrice:h.au.number().min(0,"سعر البيع يجب أن يكون 0 أو أكثر.").default(0),passengerType:h.k5(["Adult","Child","Infant"]),ticketType:h.k5(["Issue","Change","Refund","Void"]).default("Issue")}),q=h.Ik({pnr:h.Yj().min(1,"PNR مطلوب"),vl:h.Yj().optional(),supplierId:h.Yj().min(1,"المورد مطلوب"),clientId:h.Yj().min(1,"العميل مطلوب"),travelDate:h.p6({required_error:"تاريخ السفر مطلوب"}),issueDate:h.p6({required_error:"تاريخ الإصدار مطلوب"}),boxId:h.Yj().optional(),currency:h.k5(["USD","IQD"]),passengers:h.YO($).min(1,"يجب إضافة مسافر واحد على الأقل"),route1:h.Yj().optional(),route2:h.Yj().optional(),route3:h.Yj().optional(),route4:h.Yj().optional(),carrier:h.Yj().optional(),discountType:h.k5(["percentage","fixed"]).optional(),discountValue:h.au.number().optional(),notes:h.Yj().optional()}),Z=[{value:"Adult",label:"بالغ",icon:b.A},{value:"Child",label:"طفل",icon:j.A},{value:"Infant",label:"رضيع",icon:g.A}],W=U.t.map(e=>({value:e.code,label:"".concat(e.arabicName," (").concat(e.code,")")}));function Q(e){var a,r;let{onBookingAdded:i,isEditing:l,initialData:c,onBookingUpdated:o}=e,[h,b]=(0,n.useState)(2),{toast:j}=(0,F.dj)(),{data:g,loaded:k}=(0,L.Z)(),{user:T}=(0,E.A)(),[U,$]=(0,n.useState)(null),[Q,X]=(0,n.useState)([]),ee=(0,u.mN)({resolver:(0,m.u)(q),defaultValues:l?c:{pnr:"",supplierId:"",clientId:"",currency:"USD",issueDate:new Date,travelDate:new Date,passengers:[{name:"",passportNumber:"",ticketNumber:"",purchasePrice:0,clientStatement:"",salePrice:0,passengerType:"Adult",ticketType:"Issue"}]}});(0,n.useEffect)(()=>{T&&"role"in T&&T.boxId&&!l&&ee.setValue("boxId",T.boxId)},[T,l,ee]);let{control:ea,handleSubmit:er,formState:{errors:et,isSubmitting:en},setValue:es,watch:ei,getValues:el,register:ec}=ee,{fields:eo,append:ed,remove:eu}=(0,u.jz)({control:ea,name:"passengers"});n.useMemo(()=>{var e,a;let r=ei("boxId");return(null==g||null==(a=g.boxes)||null==(e=a.find(e=>e.id===r))?void 0:e.name)||"غير محدد"},[ei,null==g?void 0:g.boxes]);let em=ei("passengers").reduce((e,a)=>e+(Number(a.purchasePrice)||0),0),eh=ei("passengers").reduce((e,a)=>e+(Number(a.salePrice)||0),0),ex=eh-em,ep=async e=>{let a=j({title:"جاري إضافة الحجز..."});try{let r=[e.route1,e.route2,e.route3,e.route4].filter(Boolean).join(" - "),t={...e,route:r,travelDate:e.travelDate.toISOString(),issueDate:e.issueDate.toISOString()},n=l?await R(c.id,t):await (0,B.B)(t);if(n.success&&(n.newBooking||n.updatedBooking))a.update({id:a.id,title:"تم ".concat(l?"تحديث":"إضافة"," الحجز بنجاح")}),i&&n.newBooking&&i(n.newBooking),o&&n.updatedBooking&&o(n.updatedBooking),ee.reset();else throw Error(n.error)}catch(e){a.update({id:a.id,title:"خطأ",description:e.message,variant:"destructive"})}},ey=async e=>{if(!l){let a=await (0,M.x)(e.pnr);if(a&&a.length>0)return void $(a[0])}await ep(e)},eb=(e,a,r)=>{let t=[...Q];t[e][a]=r,X(t)};return k?(0,t.jsxs)(O.lV,{...ee,children:[(0,t.jsx)(J.Lt,{open:!!U,onOpenChange:e=>!e&&$(null),children:(0,t.jsxs)(J.EO,{children:[(0,t.jsxs)(J.wd,{children:[(0,t.jsxs)(J.r7,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-6 w-6 text-yellow-500"})," تنبيه: PNR مكرر"]}),(0,t.jsx)(J.$v,{children:"رقم الحجز (PNR) الذي أدخلته موجود بالفعل في النظام. هل أنت متأكد أنك تريد المتابعة وإنشاء حجز جديد بنفس الرقم؟"})]}),(0,t.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"PNR:"})," ",null==U?void 0:U.pnr]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"تاريخ الإصدار الأصلي:"})," ",(null==U?void 0:U.issueDate)?(0,z.GP)(new Date(U.issueDate),"yyyy-MM-dd"):"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"أدخل بواسطة:"})," ",null==U?void 0:U.enteredBy]})]}),(0,t.jsxs)(J.ck,{children:[(0,t.jsx)(J.Zr,{onClick:()=>$(null),children:"لا، إلغاء"}),(0,t.jsx)(J.Rx,{onClick:()=>{$(null),ep(el())},children:"نعم، متابعة على أي حال"})]})]})}),(0,t.jsxs)("form",{onSubmit:ee.handleSubmit(ey),className:"h-full flex flex-row-reverse bg-background text-sm",children:[(0,t.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-grow p-2 space-y-4 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{children:"تاريخ الاصدار"}),(0,t.jsx)(V.K,{date:ei("issueDate"),setDate:e=>es("issueDate",e)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(_.J,{children:"تاريخ السفر"}),(0,t.jsx)(V.K,{date:ei("travelDate"),setDate:e=>es("travelDate",e)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(G,{title:"المورد",children:(0,t.jsxs)("div",{className:"space-y-2 text-right",children:[(0,t.jsxs)("div",{className:"grid grid-cols-[80px,1fr] items-center gap-2",children:[(0,t.jsx)(_.J,{children:"حساب المورد"}),(0,t.jsx)(u.xI,{name:"supplierId",control:ea,render:e=>{let{field:a}=e;return(0,t.jsx)(P.j,{searchAction:"suppliers",value:a.value,onValueChange:a.onChange,placeholder:"ابحث عن مورد..."})}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-[80px,1fr] items-center gap-2",children:[(0,t.jsx)(_.J,{children:"الدفع"}),(0,t.jsxs)(p.l6,{children:[(0,t.jsx)(p.bq,{className:"h-7",children:(0,t.jsx)(p.yv,{placeholder:"آجل"})}),(0,t.jsxs)(p.gC,{children:[(0,t.jsx)(p.eb,{value:"Debit",children:"آجل"}),(0,t.jsx)(p.eb,{value:"Cash",children:"نقدي"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-[80px,1fr] items-center gap-2",children:[(0,t.jsx)(_.J,{children:"العملة"}),(0,t.jsx)(u.xI,{name:"currency",control:ea,render:e=>{let{field:a}=e;return(0,t.jsxs)(p.l6,{onValueChange:a.onChange,value:a.value,children:[(0,t.jsx)(p.bq,{className:"h-7",children:(0,t.jsx)(p.yv,{})}),(0,t.jsxs)(p.gC,{children:[(0,t.jsx)(p.eb,{value:"USD",children:"USD"}),(0,t.jsx)(p.eb,{value:"IQD",children:"IQD"})]})]})}})]})]})}),(0,t.jsx)(G,{title:"العميل",children:(0,t.jsxs)("div",{className:"space-y-2 text-right",children:[(0,t.jsxs)("div",{className:"grid grid-cols-[80px,1fr] items-center gap-2",children:[(0,t.jsx)(_.J,{children:"العميل"}),(0,t.jsx)(u.xI,{name:"clientId",control:ea,render:e=>{let{field:a}=e;return(0,t.jsx)(P.j,{searchAction:"clients",value:a.value,onValueChange:a.onChange,placeholder:"ابحث عن عميل..."})}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-[80px,1fr] items-center gap-2",children:[(0,t.jsx)(_.J,{children:"الدفع"}),(0,t.jsxs)(p.l6,{children:[(0,t.jsx)(p.bq,{className:"h-7",children:(0,t.jsx)(p.yv,{placeholder:"نقدي"})}),(0,t.jsxs)(p.gC,{children:[(0,t.jsx)(p.eb,{value:"Cash",children:"نقدي"}),(0,t.jsx)(p.eb,{value:"Debit",children:"آجل"})]})]})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(G,{title:"الخصم والناقل",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(O.zB,{control:ea,name:"discountValue",render:e=>{let{field:a}=e;return(0,t.jsxs)(O.eI,{children:[(0,t.jsx)(O.lR,{children:"قيمة الخصم"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.MJ,{children:(0,t.jsx)(x.p,{className:"h-8",type:"number",placeholder:"قيمة الخصم",...a})}),(0,t.jsx)(u.xI,{name:"discountType",control:ea,render:e=>{let{field:a}=e;return(0,t.jsxs)(K.z,{value:a.value,onValueChange:a.onChange,className:"flex items-center border rounded-md p-1",children:[(0,t.jsxs)(O.eI,{className:"flex items-center space-x-2 space-x-reverse",children:[(0,t.jsx)(O.MJ,{children:(0,t.jsx)(K.C,{value:"percentage",id:"r-percent"})}),(0,t.jsx)(_.J,{htmlFor:"r-percent",children:"نسبة %"})]}),(0,t.jsxs)(O.eI,{className:"flex items-center space-x-2 space-x-reverse",children:[(0,t.jsx)(O.MJ,{children:(0,t.jsx)(K.C,{value:"fixed",id:"r-fixed"})}),(0,t.jsx)(_.J,{htmlFor:"r-fixed",children:"مبلغ $"})]})]})}})]}),(0,t.jsx)(O.C5,{})]})}}),(0,t.jsx)(O.zB,{control:ea,name:"carrier",render:e=>{let{field:a}=e;return(0,t.jsxs)(O.eI,{children:[(0,t.jsx)(O.lR,{children:"الناقل"}),(0,t.jsx)(O.MJ,{children:(0,t.jsx)(P.j,{options:W,placeholder:"اختر الناقل...",...a})})]})}})]})}),(0,t.jsxs)(G,{title:"بيانات الحجز",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_.J,{children:"PNR"}),(0,t.jsx)(x.p,{className:"h-7",placeholder:"***",...ec("pnr")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_.J,{children:"V.L"}),(0,t.jsx)(x.p,{className:"h-7",placeholder:"***",...ec("vl")})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2 p-2",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 text-muted-foreground"}),Array.from({length:h}).map((e,a)=>(0,t.jsxs)(n.Fragment,{children:[a>0&&(0,t.jsx)(v.A,{className:"h-5 w-5 text-muted-foreground shrink-0"}),(0,t.jsx)(u.xI,{name:"route".concat(a+1),control:ea,render:e=>{let{field:a}=e;return(0,t.jsx)(P.j,{options:W,...a,placeholder:"..."})}})]},a)),h<4&&(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>b(e=>e+1),children:(0,t.jsx)(C.A,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsxs)("div",{className:"col-span-6 space-y-4",children:[(0,t.jsx)(G,{title:"الأسماء",children:(0,t.jsx)("div",{className:"p-2",children:(0,t.jsxs)(y.XI,{children:[(0,t.jsx)(y.A0,{children:(0,t.jsxs)(y.Hj,{className:"bg-primary/10 hover:bg-primary/20",children:[(0,t.jsx)(y.nd,{className:"p-1 text-xs font-semibold text-right",children:"المسافر"}),(0,t.jsx)(y.nd,{className:"p-1 text-xs font-semibold text-right",children:"التذكرة"}),(0,t.jsx)(y.nd,{className:"p-1 text-xs font-semibold text-right",children:"النوع"}),(0,t.jsx)(y.nd,{className:"p-1 text-xs font-semibold text-right",children:"شراء"}),(0,t.jsx)(y.nd,{className:"p-1 text-xs font-semibold text-right",children:"بيع"})]})}),(0,t.jsx)(y.BF,{children:eo.map((e,a)=>(0,t.jsxs)(y.Hj,{children:[(0,t.jsx)(y.nA,{className:"p-0",children:(0,t.jsx)(x.p,{className:"border-0 rounded-none h-7",placeholder:"اسم المسافر",...ec("passengers.".concat(a,".name"))})}),(0,t.jsx)(y.nA,{className:"p-0",children:(0,t.jsx)(x.p,{className:"border-0 rounded-none h-7",placeholder:"رقم التذكرة",...ec("passengers.".concat(a,".ticketNumber"))})}),(0,t.jsx)(y.nA,{className:"p-0",children:(0,t.jsx)(u.xI,{control:ea,name:"passengers.".concat(a,".passengerType"),render:e=>{let{field:a}=e;return(0,t.jsxs)(p.l6,{onValueChange:a.onChange,value:a.value,children:[(0,t.jsx)(p.bq,{className:"border-0 rounded-none h-7",children:(0,t.jsx)(p.yv,{})}),(0,t.jsx)(p.gC,{children:Z.map(e=>{let a=e.icon;return(0,t.jsx)(p.eb,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)(a,{className:"h-4 w-4"})]})},e.value)})})]})}})}),(0,t.jsx)(y.nA,{className:"p-0",children:(0,t.jsx)(H.O,{className:"border-0 rounded-none h-7",placeholder:"شراء",...ec("passengers.".concat(a,".purchasePrice"))})}),(0,t.jsx)(y.nA,{className:"p-0",children:(0,t.jsx)(H.O,{className:"border-0 rounded-none h-7",placeholder:"بيع",...ec("passengers.".concat(a,".salePrice"))})})]},e.id))})]})})}),(0,t.jsx)(G,{title:"الملاحظات",children:(0,t.jsx)(u.xI,{name:"notes",control:ea,render:e=>{let{field:a}=e;return(0,t.jsx)(Y.T,{...a})}})})]})]}),(0,t.jsxs)(G,{title:"تسعير أنواع التذاكر",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(y.XI,{children:[(0,t.jsx)(y.A0,{children:(0,t.jsxs)(y.Hj,{children:[(0,t.jsx)(y.nd,{children:"النوع"}),(0,t.jsx)(y.nd,{children:"Fare"}),(0,t.jsx)(y.nd,{children:"%"}),(0,t.jsx)(y.nd,{children:"Tax1"}),(0,t.jsx)(y.nd,{children:"Tax2"}),(0,t.jsx)(y.nd,{children:"Sale"}),(0,t.jsx)(y.nd,{children:"Charge"}),(0,t.jsx)(y.nd,{children:"Total"}),(0,t.jsx)(y.nd,{children:"ADD TK"})]})}),(0,t.jsx)(y.BF,{children:Q.map((e,a)=>(0,t.jsxs)(y.Hj,{children:[(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsxs)(p.l6,{value:e.ticketType,onValueChange:e=>eb(a,"ticketType",e),children:[(0,t.jsx)(p.bq,{className:"h-8",children:(0,t.jsx)(p.yv,{})}),(0,t.jsxs)(p.gC,{children:[(0,t.jsx)(p.eb,{value:"Adult",children:"Adult"}),(0,t.jsx)(p.eb,{value:"Child",children:"Child"}),(0,t.jsx)(p.eb,{value:"Infant",children:"Infant"})]})]})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.fareBuy,onValueChange:e=>eb(a,"fareBuy",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.percentage,onValueChange:e=>eb(a,"percentage",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.tax1,onValueChange:e=>eb(a,"tax1",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.tax2,onValueChange:e=>eb(a,"tax2",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.sale,onValueChange:e=>eb(a,"sale",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.charge,onValueChange:e=>eb(a,"charge",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(H.O,{className:"h-8",value:e.total,onValueChange:e=>eb(a,"total",e)})}),(0,t.jsx)(y.nA,{className:"p-1",children:(0,t.jsx)(s.$,{size:"sm",onClick:()=>(e=>{let a=el("passengers"),r=e.fareBuy+e.tax1+e.tax2+e.charge,t=e.sale;es("passengers",a.map(a=>a.passengerType===e.ticketType?{...a,purchasePrice:r,salePrice:t}:a),{shouldValidate:!0,shouldDirty:!0}),j({title:"تم تطبيق تسعيرة ".concat(e.ticketType)})})(e),children:"ADD"})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg bg-background shadow-sm",children:[(0,t.jsx)("h4",{className:"font-bold text-lg",children:"ملخص التسعير"}),(0,t.jsxs)("div",{className:"flex gap-4 font-bold text-center mt-2",children:[(0,t.jsxs)("div",{className:"p-2 rounded-md",children:["إجمالي الشراء: ",(0,t.jsx)("span",{className:"text-red-600",children:em.toFixed(2)})]}),(0,t.jsxs)("div",{className:"p-2 rounded-md",children:["إجمالي البيع: ",(0,t.jsx)("span",{className:"text-green-600",children:eh.toFixed(2)})]}),(0,t.jsxs)("div",{className:"p-2 rounded-md",children:["الربح: ",(0,t.jsx)("span",{className:"text-blue-600",children:ex.toFixed(2)})]})]})]}),(0,t.jsx)(s.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{X(e=>[...e,{id:Date.now(),ticketType:"Adult",fareBuy:0,tax1:0,tax2:0,sale:0,charge:0,percentage:0,total:0}])},children:"إضافة نوع تسعير"})]})]})]}),(0,t.jsxs)("footer",{className:"p-2 border-t flex items-center justify-between bg-gray-100 dark:bg-gray-800 text-xs mt-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_.J,{children:"الصندوق"}),(0,t.jsxs)(p.l6,{children:[(0,t.jsx)(p.bq,{className:"h-7 w-32",children:(0,t.jsx)(p.yv,{placeholder:"اختر صندوق..."})}),(0,t.jsx)(p.gC,{children:null==g||null==(a=g.boxes)?void 0:a.map(e=>(0,t.jsx)(p.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(_.J,{children:"موظف الاصدار"}),(0,t.jsxs)(p.l6,{children:[(0,t.jsx)(p.bq,{className:"h-7 w-32",children:(0,t.jsx)(p.yv,{placeholder:"اختر موظف..."})}),(0,t.jsx)(p.gC,{children:null==g||null==(r=g.users)?void 0:r.map(e=>(0,t.jsx)(p.eb,{value:e.uid,children:e.name},e.uid))})]})]})]}),(0,t.jsx)("div",{className:"flex-grow"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{children:["المستخدم الحالي (",null==T?void 0:T.name,")"]}),(0,t.jsxs)("p",{children:["الرقم العام: ",(0,t.jsx)("span",{className:"font-bold",children:"(تلقائي)"})]})]})]})]}),(0,t.jsxs)("aside",{dir:"ltr",className:"w-16 bg-muted/50 border-r flex flex-col items-center py-3 gap-2",children:[(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-primary hover:bg-primary/10",onClick:()=>ed({name:"",ticketNumber:"",passengerType:"Adult",purchasePrice:0,salePrice:0,clientStatement:""}),children:(0,t.jsx)(C.A,{className:"h-5 w-5"})}),(0,t.jsx)(s.$,{type:"submit",variant:"ghost",size:"icon",className:"h-10 w-10 text-primary hover:bg-primary/10",disabled:en,children:en?(0,t.jsx)(d.A,{className:"h-5 w-5 animate-spin"}):(0,t.jsx)(A.A,{className:"h-5 w-5"})}),(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10",children:(0,t.jsx)(w.A,{className:"h-5 w-5"})}),(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10 text-destructive hover:bg-destructive/10",onClick:()=>eo.length>1&&eu(eo.length-1),children:(0,t.jsx)(I.A,{className:"h-5 w-5"})}),(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10",children:(0,t.jsx)(S.A,{className:"h-5 w-5"})}),(0,t.jsx)(s.$,{type:"button",variant:"ghost",size:"icon",className:"h-10 w-10",children:(0,t.jsx)(D.A,{className:"h-5 w-5"})})]})]})]}):(0,t.jsx)("div",{className:"relative pt-4",children:(0,t.jsx)("div",{className:"pt-6 flex justify-center items-center h-48",children:(0,t.jsx)(d.A,{className:"h-8 w-8 animate-spin"})})})}var X=r(26333),ee=r(97766),ea=r(19056);function er(e){let{onBookingAdded:a,onBookingUpdated:r,isEditing:u=!1,booking:m,children:h}=e,[x,p]=(0,n.useState)(!1),{data:y,loaded:b}=(0,L.Z)(),{user:j}=(0,E.A)(),{toast:g}=(0,F.dj)(),[N,f]=(0,n.useState)(!1),v={width:"1400px",height:"90vh"},[C,A]=(0,n.useState)(v),[w,I]=(0,n.useState)("USD");(0,n.useEffect)(()=>{var e,a;if(j&&"role"in j&&(null==(a=j.preferences)||null==(e=a.dialogSettings)?void 0:e.bookingDialog)){let{step1:e,step2:a}=j.preferences.dialogSettings.bookingDialog;A(a||v)}},[j]);let S=async()=>{var e;if(!j||!("role"in j))return;let a={...null==(e=j.preferences)?void 0:e.dialogSettings,bookingDialog:{step1:C,step2:C}};(await (0,ee.T)(j.uid,{preferences:{...j.preferences,dialogSettings:a}})).success?(g({title:"تم حفظ أبعاد النافذة"}),f(!1)):g({title:"خطأ",description:"لم يتم حفظ الإعدادات",variant:"destructive"})},D=e=>{u&&r?r(e):!u&&a&&a(e),p(!1)},k=e=>parseInt(e.replace(/px|vw|vh/g,""),10)||0,R=u&&m?{...m,travelDate:m.travelDate?(0,ea.H)(m.travelDate):new Date,issueDate:m.issueDate?(0,ea.H)(m.issueDate):new Date,passengers:m.passengers.map(e=>({...e,ticketType:e.ticketType||"Issue"}))}:void 0;return(0,t.jsxs)(i.lG,{open:x,onOpenChange:p,children:[(0,t.jsx)(i.zM,{asChild:!0,children:h}),(0,t.jsxs)(i.Cf,{showCloseButton:!1,className:"p-0 flex flex-col",style:{maxWidth:C.width,width:"95vw",height:C.height,maxHeight:"95vh",resize:"both",overflow:"hidden"},children:[(0,t.jsxs)(i.c7,{className:"p-3 rounded-t-lg flex flex-row items-center justify-between sticky top-0 z-10 border-b",style:{backgroundColor:"USD"===w?"hsl(var(--accent))":"hsl(var(--primary))",color:"white"},children:[(0,t.jsx)(i.HM,{asChild:!0,children:(0,t.jsx)(s.$,{variant:"ghost",size:"icon",className:"text-primary-foreground hover:bg-white/20 h-7 w-7 rounded-full",children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)(i.L3,{className:"text-white",children:u?"تعديل الحجز (PNR: ".concat(null==m?void 0:m.pnr,")"):"إضافة حجز جديد (PNR)"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.$,{type:"button",onClick:()=>I("USD"),className:(0,T.cn)("text-white h-8","USD"===w?"bg-white/30":"bg-transparent border border-white/50"),children:"USD"}),(0,t.jsx)(s.$,{type:"button",onClick:()=>I("IQD"),className:(0,T.cn)("text-white h-8","IQD"===w?"bg-white/30":"bg-transparent border border-white/50"),children:"IQD"}),(0,t.jsxs)(X.AM,{open:N,onOpenChange:f,children:[(0,t.jsx)(X.Wv,{asChild:!0,children:(0,t.jsx)(s.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 h-8 w-8",children:(0,t.jsx)(c.A,{className:"h-5 w-5"})})}),(0,t.jsx)(X.hl,{className:"w-96",align:"end",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h4",{className:"font-medium leading-none",children:"أبعاد النافذة"}),(0,t.jsxs)(J.Lt,{children:[(0,t.jsx)(J.tv,{asChild:!0,children:(0,t.jsxs)(s.$,{type:"button",variant:"ghost",size:"sm",className:"h-auto px-2 py-1 text-xs",children:[(0,t.jsx)(o.A,{className:"me-1 h-3 w-3"})," إعادة للوضع الافتراضي"]})}),(0,t.jsxs)(J.EO,{children:[(0,t.jsxs)(J.wd,{children:[(0,t.jsx)(J.r7,{children:"هل أنت متأكد؟"}),(0,t.jsx)(J.$v,{children:"سيتم إعادة أبعاد النافذة إلى الحجم الافتراضي."})]}),(0,t.jsxs)(J.ck,{children:[(0,t.jsx)(J.Zr,{children:"إلغاء"}),(0,t.jsx)(J.Rx,{onClick:()=>{A(v),g({title:"تمت إعادة تعيين الأبعاد (سيتم الحفظ مع الإعدادات الأخرى)"})},className:(0,T.cn)((0,s.r)({variant:"destructive"})),children:"نعم، قم بالإعادة"})]})]})]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"تحكم في حجم النافذة لتناسب شاشتك."})]}),(0,t.jsx)("div",{className:"grid gap-4 p-2 border rounded-lg",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 items-center gap-4",children:[(0,t.jsx)(_.J,{htmlFor:"width1",children:"العرض (px)"}),(0,t.jsx)(H.O,{id:"width1",value:k(C.width),onValueChange:e=>A(a=>({...a,width:"".concat(e||0,"px")})),className:"col-span-2 h-8"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 items-center gap-4",children:[(0,t.jsx)(_.J,{htmlFor:"height1",children:"الارتفاع (vh)"}),(0,t.jsx)(H.O,{id:"height1",value:k(C.height),onValueChange:e=>A(a=>({...a,height:"".concat(e||0,"vh")})),className:"col-span-2 h-8"})]})]})}),(0,t.jsx)(s.$,{onClick:S,size:"sm",className:"mt-2 w-full",children:"حفظ الأبعاد"})]})})]})]})]}),(0,t.jsx)("div",{className:"flex-grow overflow-y-auto p-6",children:b&&y?(0,t.jsx)(Q,{isEditing:u,initialData:R,onBookingAdded:D,onBookingUpdated:D}):(0,t.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,t.jsx)(d.A,{className:"animate-spin h-8 w-8"})})})]})]})}},86259:(e,a,r)=>{r.d(a,{Separator:()=>l});var t=r(95155),n=r(12115),s=r(57268),i=r(64269);let l=n.forwardRef((e,a)=>{let{className:r,orientation:n="horizontal",decorative:l=!0,...c}=e;return(0,t.jsx)(s.b,{ref:a,decorative:l,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...c})});l.displayName=s.b.displayName},87270:(e,a,r)=>{r.d(a,{A0:()=>l,BF:()=>c,Gg:()=>o,Hj:()=>d,XI:()=>i,nA:()=>m,nd:()=>u});var t=r(95155),n=r(12115),s=r(64269);let i=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let l=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",r),...n})});l.displayName="TableHeader";let c=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});c.displayName="TableBody";let o=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})});o.displayName="TableFooter";let d=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("tr",{ref:a,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let u=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("th",{ref:a,className:(0,s.cn)("h-12 px-4 text-right align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableHead";let m=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("td",{ref:a,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});m.displayName="TableCell",n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},97916:(e,a,r)=>{r.d(a,{O:()=>c});var t=r(95155),n=r(12115),s=r(65142),i=r(64269);let l=e=>{if("string"!=typeof e||""===e.trim())return;let a=parseFloat(e.replace(/,/g,""));return isNaN(a)?void 0:a},c=n.forwardRef((e,a)=>{let{value:r,onValueChange:c,className:o,allowNegative:d=!1,currency:u,currencyClassName:m,direction:h="rtl",...x}=e,p=e=>{if(null==e||""===e)return"";let a="string"==typeof e?l(e):e;return void 0===a?String(e):new Intl.NumberFormat("en-US").format(a)},[y,b]=n.useState(p(r));n.useEffect(()=>{b(p(r))},[r]);let j={...x,ref:a,type:"text",inputMode:"decimal",placeholder:"0.00",value:y||"",onChange:e=>{let a=e.target.value.replace(/,/g,"");if((d?/^-?\d*\.?\d*$/:/^\d*\.?\d*$/).test(a)||""===a){let e=l(a);b(void 0!==e?p(e):a),c&&c(e)}}};return u?(0,t.jsxs)("div",{className:(0,i.cn)("relative flex items-center w-full",o),children:[(0,t.jsx)(s.p,{...j,className:(0,i.cn)("z-10 text-right w-full","rtl"===h?"rounded-l-none rounded-r-lg border-l-0":"rounded-r-none rounded-l-lg border-r-0")}),(0,t.jsx)("div",{className:(0,i.cn)("p-2 bg-muted border h-full flex items-center",m,"rtl"===h?"rounded-l-lg":"rounded-r-lg"),children:(0,t.jsx)("span",{className:"text-xs font-semibold",children:u})})]}):(0,t.jsx)(s.p,{...j,className:(0,i.cn)("text-right",o)})});c.displayName="NumericInput"},98053:(e,a,r)=>{r.d(a,{$v:()=>y,EO:()=>m,Lt:()=>c,Rx:()=>b,Zr:()=>j,ck:()=>x,r7:()=>p,tv:()=>o,wd:()=>h});var t=r(95155),n=r(12115),s=r(35646),i=r(64269),l=r(3998);let c=s.bL,o=s.l9,d=s.ZL,u=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n,ref:a})});u.displayName=s.hJ.displayName;let m=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(u,{}),(0,t.jsx)(s.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n})]})});m.displayName=s.UC.displayName;let h=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};h.displayName="AlertDialogHeader";let x=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};x.displayName="AlertDialogFooter";let p=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold",r),...n})});p.displayName=s.hE.displayName;let y=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});y.displayName=s.VY.displayName;let b=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.rc,{ref:a,className:(0,i.cn)((0,l.r)(),r),...n})});b.displayName=s.rc.displayName;let j=n.forwardRef((e,a)=>{let{className:r,...n}=e;return(0,t.jsx)(s.ZD,{ref:a,className:(0,i.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...n})});j.displayName=s.ZD.displayName}}]);