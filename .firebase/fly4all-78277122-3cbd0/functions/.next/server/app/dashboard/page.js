(()=>{var a={};a.id=5105,a.ids=[5105],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},1661:(a,b,c)=>{"use strict";c.d(b,{a:()=>f});var d=c(42255),e=c(58435);function f(a,b){return function(a,b){let c=(0,d.a)(a);if(isNaN(b))return(0,e.w)(a,NaN);if(!b)return c;let f=c.getDate(),g=(0,e.w)(a,c.getTime());return(g.setMonth(c.getMonth()+b+1,0),f>=g.getDate())?g:(c.setFullYear(g.getFullYear(),g.getMonth(),f),c)}(a,-b)}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:a=>{"use strict";a.exports=import("firebase-admin/firestore")},9801:a=>{"use strict";a.exports=import("firebase-admin/app")},10087:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Bx:()=>l,N2:()=>u,T2:()=>p,Uo:()=>q,dJ:()=>v,eA:()=>r,li:()=>s,sN:()=>t,vq:()=>n,xu:()=>m,yF:()=>o});var e=c(91488);c(27806);var f=c(80446),g=c(91837),h=c(2992),i=c(62641),j=c(40410),k=a([f,h,i]);[f,h,i]=k.then?(await k)():k;let v=(0,g.unstable_cache)(async(a={})=>{let{page:b=1,limit:c=10,all:d=!1,includeDeleted:e=!1}=a,g=await (0,f.Lf)();if(!g)return console.error("Database not available"),{bookings:[],total:0};try{let a=g.collection("bookings");e||(a=a.where("isDeleted","==",!1));let f=(await a.get()).size,h=a.orderBy("enteredAt","desc");return d||(h=h.limit(c).offset((b-1)*c)),{bookings:(await h.get()).docs.map(a=>({id:a.id,...a.data()})),total:f}}catch(a){throw console.error("Error getting bookings: ",String(a)),Error(`Firestore query failed. A composite index is likely required. Original error: ${String(a)}`)}},["get-bookings"]);async function l(a){let b=await (0,i.$T)();if(!b)throw Error("User not authenticated.");let c=a.passengers.reduce((a,b)=>a+(Number(b.salePrice)||0),0),d=a.passengers.reduce((a,b)=>a+(Number(b.purchasePrice)||0),0),e=(await (0,f.Lf)()).collection("bookings").doc();return await e.set({...a,id:e.id,enteredBy:b.name,enteredAt:new Date().toISOString()}),await (0,h.T)({sourceType:"tickets",sourceId:e.id,date:a.issueDate,currency:a.currency,amount:c-d,clientId:a.clientId}),d>0&&await (0,h.C)({costKey:"cost_tickets",sourceType:"tickets",sourceId:e.id,date:a.issueDate,currency:a.currency,amount:d,supplierId:a.supplierId}),{success:!0,newBooking:{id:e.id,...a}}}async function m(a){return[]}async function n(a,b){return{success:!1,error:"Not implemented"}}async function o(a,b,c){return{success:!1,error:"Not implemented"}}async function p(a,b,c){return{success:!1,error:"Not implemented"}}async function q(a,b,c){return{success:!1,error:"Not implemented"}}async function r(a){return{success:!1,count:0,error:"Not implemented"}}async function s(a){return{success:!1,error:"Not implemented"}}async function t(a){return{success:!1,error:"Not implemented"}}async function u(a){return{success:!1,error:"Not implemented"}}(0,j.D)([v,l,m,n,o,p,q,r,s,t,u]),(0,e.A)(v,"7ffb585af41918dddb19e9e747514fc75eda9f07ca",null),(0,e.A)(l,"40ca4bf9958b6d1d26e411af5f72ad73b881d7ffc2",null),(0,e.A)(m,"40d0a9025cfae5e19ff9bfb1d8c43204722c4febb5",null),(0,e.A)(n,"60186e37473393f3008b2a76484829f65c2825bc22",null),(0,e.A)(o,"70cfe727250a23b23d98bdaa484b32a157baabef97",null),(0,e.A)(p,"7057bd85393d69e4688037e9bf4c49ca196efecf46",null),(0,e.A)(q,"70278708d5cbbc8d6310dcac5ed55f18c8eab7bbdd",null),(0,e.A)(r,"40894ff0ee9a14922c13beed18ea3d0c678338253d",null),(0,e.A)(s,"40dc0f099e7b5a731a230c5f6ba0d64c59c23245aa",null),(0,e.A)(t,"40cf063cd0996b5720c994376cff75a5921b27cb15",null),(0,e.A)(u,"40c0dccd0c2a8e67f36983065fa5432d130bc97c65",null),d()}catch(a){d(a)}})},10642:(a,b,c)=>{"use strict";c.d(b,{A:()=>l});var d=c(21124),e=c(38301),f=c(35284),g=c(40068),h=c(10656),i=c(60150),j=c(97802),k=c(49113);function l({onBookingAdded:a}){let[b,c]=(0,e.useState)(!1),{data:l,loaded:m}=(0,j.Z)();return(0,d.jsxs)(g.lG,{open:b,onOpenChange:c,children:[(0,d.jsx)(g.zM,{asChild:!0,children:(0,d.jsxs)(f.$,{children:[(0,d.jsx)(h.A,{className:"me-2 h-4 w-4"})," إضافة طلب فيزا"]})}),(0,d.jsxs)(g.Cf,{className:"sm:max-w-4xl p-0",children:[(0,d.jsxs)(g.c7,{className:"bg-primary text-primary-foreground p-4 rounded-t-lg",children:[(0,d.jsx)(g.L3,{children:"إضافة طلب فيزا جديد"}),(0,d.jsx)(g.rr,{className:"text-primary-foreground/80",children:"أدخل جميع تفاصيل طلب الفيزا هنا."})]}),(0,d.jsx)("div",{className:"max-h-[80vh] overflow-y-auto p-6",children:m?(0,d.jsx)(i.A,{onBookingAdded:b=>{a(b),c(!1)}}):(0,d.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,d.jsx)(k.A,{className:"animate-spin h-8 w-8"})})})]})]})}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11423:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},12019:(a,b,c)=>{"use strict";c.d(b,{o:()=>e});var d=c(42255);function e(a){let b=(0,d.a)(a);return b.setHours(0,0,0,0),b}},14276:a=>{"use strict";a.exports=import("firebase-admin/auth")},14891:(a,b,c)=>{Promise.resolve().then(c.bind(c,20448))},14985:a=>{"use strict";a.exports=require("dns")},16488:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{"0009c39889da94a8d7def59bd6759ed539ce956cf0":()=>e.Mn,"005154bc9c2a99d1af34841e9c12edbbd06602fe62":()=>e.vs,"005773e734ccf3535fa61ed9b34042d47625b1ede6":()=>g.O0,"0079928ff14026085419c5483c28b98ee3311389f6":()=>f.$E,"0084d26686615403d39adac4c095e2f442ed3af27d":()=>f.iS,"00876833d9af9a3517587b0b01d878099da86126f7":()=>e.BA,"009e84f93947e0a432e28675ea07a71949bfe66943":()=>f.Lf,"00afcee30c25fc6521aeaf596fabd0fef5e0ca707f":()=>g.qV,"40290c8e8678ea3c7dc08bc14a2b21bf84ced558a3":()=>g.lo,"406818275705b776627a9e14558eaa7857fbec9b73":()=>g.ht,"40d4790cf5bfe15d462399ad8c52d1baec8babf86f":()=>g.nu,"40e13d085ff779b8dfbb82e790ebb21702ce079192":()=>g.Cm,"40e95d5574ebe46d5479b45ed231c9bd784b1873f7":()=>e.wx,"40ef77a697a84cf599002575e6afc4c1de58c3cdab":()=>g.hG,"601532f3b7a46dae258a5ff32f14fb4b3e2e141e9f":()=>g.TK,"601838acb9f969bfd30fa9f583c86dd453b19524dd":()=>g.v_});var e=c(68420),f=c(43513),g=c(40776),h=a([e,f,g]);[e,f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:a=>{"use strict";a.exports=require("process")},20448:(a,b,c)=>{"use strict";c.d(b,{default:()=>aC});var d=c(21124),e=c(38301),f=c.n(e),g=c(23018),h=c(25730),i=c(80623),j=c(31338),k=c(11423),l=c(44043),m=c(52784);let n=({title:a,value:b,icon:c,currency:e,percentage:f,isPositive:g})=>(0,d.jsxs)("div",{className:"bg-card rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300 card-hover-effect",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-muted-foreground",children:a}),(0,d.jsxs)("h3",{className:"text-2xl font-bold mt-1",children:[b," ",(0,d.jsx)("span",{className:"text-sm",children:e})]})]}),(0,d.jsx)("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${g?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:(0,d.jsx)(c,{className:`h-6 w-6 ${g?"text-green-500":"text-red-500"}`})})]}),(0,d.jsxs)("div",{className:`mt-4 flex items-center text-sm ${g?"text-green-500":"text-red-500"}`,children:[g?(0,d.jsx)(h.A,{className:"ml-1 h-4 w-4"}):(0,d.jsx)(i.A,{className:"ml-1 h-4 w-4"}),(0,d.jsxs)("span",{children:[f," عن الشهر الماضي"]})]}),(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-border",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-muted-foreground",children:"الهدف الشهري"}),(0,d.jsx)("span",{className:"font-medium",children:"75%"})]}),(0,d.jsx)("div",{className:"mt-2 w-full bg-secondary rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-primary h-2 rounded-full",style:{width:"75%"}})})]})]}),o=(a,b)=>{if(0===b)return a>0?{percentage:"زيادة",isPositive:!0}:{percentage:"0%",isPositive:!0};let c=(a-b)/b*100;return{percentage:`${Math.abs(c).toFixed(0)}%`,isPositive:c>=0}};function p({currentStats:a,prevStats:b}){let c=o(a.revenue,b.revenue),e=o(a.profit,b.profit),f=o(a.bookingsCount,b.bookingsCount),g=o(a.activeSubscriptions,b.activeSubscriptions);return(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,d.jsx)(n,{title:"إجمالي الإيرادات",value:a.revenue.toLocaleString(),icon:j.A,currency:a.currency,percentage:c.percentage,isPositive:c.isPositive}),(0,d.jsx)(n,{title:"صافي الربح",value:a.profit.toLocaleString(),icon:k.A,currency:a.currency,percentage:e.percentage,isPositive:e.isPositive}),(0,d.jsx)(n,{title:"الحجوزات الجديدة",value:a.bookingsCount.toLocaleString(),icon:l.A,currency:"حجزًا",percentage:f.percentage,isPositive:f.isPositive}),(0,d.jsx)(n,{title:"الاشتراكات النشطة",value:a.activeSubscriptions.toLocaleString(),icon:m.A,currency:"اشتراكًا",percentage:g.percentage,isPositive:g.isPositive})]})}var q=c(62186),r=c(6077),s=c(37957),t=c(45862),u=c.n(t),v=c(64214),w=c(22688),x=c(72677),y=c(26776),z=c(93970),A=c(69890),B=c(8882),C=["x1","y1","x2","y2","key"],D=["offset"];function E(a){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function F(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function G(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?F(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=E(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=E(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==E(b)?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):F(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function H(){return(H=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function I(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var J=function(a){var b=a.fill;if(!b||"none"===b)return null;var c=a.fillOpacity,d=a.x,e=a.y,g=a.width,h=a.height,i=a.ry;return f().createElement("rect",{x:d,y:e,ry:i,width:g,height:h,stroke:"none",fill:b,fillOpacity:c,className:"recharts-cartesian-grid-bg"})};function K(a,b){var c;if(f().isValidElement(a))c=f().cloneElement(a,b);else if(u()(a))c=a(b);else{var d=b.x1,e=b.y1,g=b.x2,h=b.y2,i=b.key,j=I(b,C),k=(0,x.J9)(j,!1),l=(k.offset,I(k,D));c=f().createElement("line",H({},l,{x1:d,y1:e,x2:g,y2:h,fill:"none",key:i}))}return c}function L(a){var b=a.x,c=a.width,d=a.horizontal,e=void 0===d||d,g=a.horizontalPoints;if(!e||!g||!g.length)return null;var h=g.map(function(d,f){return K(e,G(G({},a),{},{x1:b,y1:d,x2:b+c,y2:d,key:"line-".concat(f),index:f}))});return f().createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function M(a){var b=a.y,c=a.height,d=a.vertical,e=void 0===d||d,g=a.verticalPoints;if(!e||!g||!g.length)return null;var h=g.map(function(d,f){return K(e,G(G({},a),{},{x1:d,y1:b,x2:d,y2:b+c,key:"line-".concat(f),index:f}))});return f().createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function N(a){var b=a.horizontalFill,c=a.fillOpacity,d=a.x,e=a.y,g=a.width,h=a.height,i=a.horizontalPoints,j=a.horizontal;if(!(void 0===j||j)||!b||!b.length)return null;var k=i.map(function(a){return Math.round(a+e-e)}).sort(function(a,b){return a-b});e!==k[0]&&k.unshift(0);var l=k.map(function(a,i){var j=k[i+1]?k[i+1]-a:e+h-a;if(j<=0)return null;var l=i%b.length;return f().createElement("rect",{key:"react-".concat(i),y:a,x:d,height:j,width:g,stroke:"none",fill:b[l],fillOpacity:c,className:"recharts-cartesian-grid-bg"})});return f().createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},l)}function O(a){var b=a.vertical,c=a.verticalFill,d=a.fillOpacity,e=a.x,g=a.y,h=a.width,i=a.height,j=a.verticalPoints;if(!(void 0===b||b)||!c||!c.length)return null;var k=j.map(function(a){return Math.round(a+e-e)}).sort(function(a,b){return a-b});e!==k[0]&&k.unshift(0);var l=k.map(function(a,b){var j=k[b+1]?k[b+1]-a:e+h-a;if(j<=0)return null;var l=b%c.length;return f().createElement("rect",{key:"react-".concat(b),x:a,y:g,width:j,height:i,stroke:"none",fill:c[l],fillOpacity:d,className:"recharts-cartesian-grid-bg"})});return f().createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},l)}var P=function(a,b){var c=a.xAxis,d=a.width,e=a.height,f=a.offset;return(0,y.PW)((0,z.f)(G(G(G({},A.u.defaultProps),c),{},{ticks:(0,y.Rh)(c,!0),viewBox:{x:0,y:0,width:d,height:e}})),f.left,f.left+f.width,b)},Q=function(a,b){var c=a.yAxis,d=a.width,e=a.height,f=a.offset;return(0,y.PW)((0,z.f)(G(G(G({},A.u.defaultProps),c),{},{ticks:(0,y.Rh)(c,!0),viewBox:{x:0,y:0,width:d,height:e}})),f.top,f.top+f.height,b)},R={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function S(a){var b,c,d,e,g,h,i=(0,B.yi)(),j=(0,B.rY)(),k=(0,B.hj)(),l=G(G({},a),{},{stroke:null!=(b=a.stroke)?b:R.stroke,fill:null!=(c=a.fill)?c:R.fill,horizontal:null!=(d=a.horizontal)?d:R.horizontal,horizontalFill:null!=(e=a.horizontalFill)?e:R.horizontalFill,vertical:null!=(g=a.vertical)?g:R.vertical,verticalFill:null!=(h=a.verticalFill)?h:R.verticalFill,x:(0,w.Et)(a.x)?a.x:k.left,y:(0,w.Et)(a.y)?a.y:k.top,width:(0,w.Et)(a.width)?a.width:k.width,height:(0,w.Et)(a.height)?a.height:k.height}),m=l.x,n=l.y,o=l.width,p=l.height,q=l.syncWithTicks,r=l.horizontalValues,s=l.verticalValues,t=(0,B.pj)(),x=(0,B.$G)();if(!(0,w.Et)(o)||o<=0||!(0,w.Et)(p)||p<=0||!(0,w.Et)(m)||m!==+m||!(0,w.Et)(n)||n!==+n)return null;var y=l.verticalCoordinatesGenerator||P,z=l.horizontalCoordinatesGenerator||Q,A=l.horizontalPoints,C=l.verticalPoints;if((!A||!A.length)&&u()(z)){var D=r&&r.length,F=z({yAxis:x?G(G({},x),{},{ticks:D?r:x.ticks}):void 0,width:i,height:j,offset:k},!!D||q);(0,v.R)(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(E(F),"]")),Array.isArray(F)&&(A=F)}if((!C||!C.length)&&u()(y)){var I=s&&s.length,K=y({xAxis:t?G(G({},t),{},{ticks:I?s:t.ticks}):void 0,width:i,height:j,offset:k},!!I||q);(0,v.R)(Array.isArray(K),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(E(K),"]")),Array.isArray(K)&&(C=K)}return f().createElement("g",{className:"recharts-cartesian-grid"},f().createElement(J,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),f().createElement(L,H({},l,{offset:k,horizontalPoints:A,xAxis:t,yAxis:x})),f().createElement(M,H({},l,{offset:k,verticalPoints:C,xAxis:t,yAxis:x})),f().createElement(N,H({},l,{horizontalPoints:A})),f().createElement(O,H({},l,{verticalPoints:C})))}S.displayName="CartesianGrid";var T=c(59296),U=c(16803),V=c(11767),W=c(17149),X=c(90333),Y=c(83043);function Z({data:a}){return(0,d.jsxs)(q.Zp,{className:"h-full",children:[(0,d.jsxs)(q.aR,{children:[(0,d.jsx)(q.ZB,{children:"نظرة عامة على الإيرادات والأرباح"}),(0,d.jsx)(q.BT,{children:"عرض للأشهر الستة الماضية."})]}),(0,d.jsx)(q.Wu,{children:(0,d.jsx)(r.u,{width:"100%",height:350,children:(0,d.jsxs)(s.X,{data:a,children:[(0,d.jsx)(S,{strokeDasharray:"3 3"}),(0,d.jsx)(T.W,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,d.jsx)(U.h,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:a=>`$${a}`}),(0,d.jsx)(V.m,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),(0,d.jsx)(W.s,{}),(0,d.jsx)(X.y,{dataKey:"revenue",name:"الإيرادات",fill:"hsl(var(--primary))",radius:[4,4,0,0]}),(0,d.jsx)(Y.N,{type:"monotone",dataKey:"profit",name:"الأرباح",stroke:"hsl(var(--accent))",strokeWidth:2})]})})})]})}var $=c(91842),_=c(10642),aa=c(31407),ab=c(49845),ac=c(97802),ad=c(49589),ae=c(91779),af=c(32957),ag=c(77249),ah=c(63198),ai=c(19335),aj=c(49113),ak=c(3991),al=c.n(ak);let am=[{id:"add_booking",label:"حجز جديد",icon:l.A,DialogComponent:$.A},{id:"add_visa",label:"فيزا جديدة",icon:ad.A,DialogComponent:_.A},{id:"add_subscription",label:"اشتراك جديد",icon:m.A,DialogComponent:aa.A},{id:"add_remittance",label:"حوالة جديدة",icon:ae.A,href:"/accounts/remittances"},{id:"add_client",label:"عميل جديد",icon:af.A,DialogComponent:ab.A},{id:"new_invoice",href:"/accounts/vouchers",label:"فاتورة جديدة",icon:ag.A},{id:"new_report",href:"/reports",label:"تقرير جديد",icon:ah.A}];function an(){let{data:a,loaded:b}=(0,ac.Z)(),c=()=>{};return(0,d.jsxs)(q.Zp,{className:"h-full shadow-sm",children:[(0,d.jsx)(q.aR,{children:(0,d.jsxs)(q.ZB,{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{children:"إجراءات سريعة"}),(0,d.jsx)(ai.A,{})]})}),(0,d.jsx)(q.Wu,{children:(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:am.map(a=>{let e=(0,d.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg flex flex-col items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors card-hover-effect",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 bg-primary/10",children:(0,d.jsx)(a.icon,{className:"h-6 w-6 text-primary"})}),(0,d.jsx)("span",{className:"text-sm font-medium text-center",children:a.label})]});if(!b&&a.DialogComponent)return(0,d.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex flex-col items-center justify-center",children:(0,d.jsx)(aj.A,{className:"h-5 w-5 animate-spin"})},a.id);if(a.href)return(0,d.jsx)(al(),{href:a.href,className:"block h-full",children:e},a.id);let f=a.DialogComponent;return f?(0,d.jsx)(f,{onBookingAdded:c,onClientAdded:c,onSubscriptionAdded:c,children:(0,d.jsx)("div",{className:"w-full h-full text-right cursor-pointer",children:e})},a.id):(0,d.jsx)("div",{className:"cursor-pointer",children:e},a.id)})})})]})}var ao=c(63009),ap=c(23727),aq=c(8808);let ar=(0,aq.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),as=(0,aq.A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var at=c(66782),au=c(41454),av=c(38692),aw=c(63822),ax=c(25054),ay=c(24515);let az={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08}}},aA={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:"easeOut"}}},aB=()=>{let{user:a}=(0,ao.A)();return(0,d.jsxs)("div",{className:"bg-gradient-to-r from-primary to-blue-500 rounded-2xl p-6 md:p-8 text-white shadow-glow-lg relative overflow-hidden",children:[(0,d.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[(0,d.jsx)("div",{className:"absolute top-20 left-20 w-40 h-40 rounded-full bg-white/20 animate-pulse-slow"}),(0,d.jsx)("div",{className:"absolute bottom-10 right-10 w-60 h-60 rounded-full bg-white/10 animate-pulse-slow"})]}),(0,d.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between",children:[(0,d.jsxs)("div",{className:"md:mr-8 text-right",children:[(0,d.jsxs)("h1",{className:"text-2xl md:text-4xl font-bold mb-2 animate__animated animate__fadeIn",children:["مرحباً بعودتك، ",a?.name||"المستخدم","!"]}),(0,d.jsx)("p",{className:"opacity-90 mb-6 text-lg",children:"هنا يمكنك إدارة أعمالك ومتابعة أداء شركتك بكل سهولة"}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 justify-end",children:[(0,d.jsxs)("button",{className:"bg-white text-primary-600 hover:bg-gray-100 px-6 py-3 rounded-lg font-medium transition-all hover:shadow-lg flex items-center tilt-effect",children:["بدء الجولة ",(0,d.jsx)(ar,{className:"mr-2 h-4 w-4 wave-element"})]}),(0,d.jsxs)("button",{className:"bg-white/10 hover:bg-white/20 px-6 py-3 rounded-lg font-medium transition-all hover:shadow-lg flex items-center border border-white/20 tilt-effect",children:["مشاهدة الفيديو التعريفي ",(0,d.jsx)(as,{className:"mr-2 h-4 w-4"})]})]})]}),(0,d.jsx)("div",{className:"mt-8 md:mt-0 floating-element",children:(0,d.jsx)(ay.default,{src:"/logo.png",width:256,height:256,className:"w-48 h-48 md:w-64 md:h-64 object-contain",alt:"شعار المشروع"})})]})]})};function aC({stats:a,prevStats:b,recentBookings:c,upcomingInstallments:e,chartData:f,users:h}){return(0,d.jsxs)(g.P.div,{className:"space-y-8",variants:az,initial:"hidden",animate:"visible",children:[(0,d.jsx)(g.P.section,{variants:aA,className:"slide-in-element",children:(0,d.jsx)(aB,{})}),(0,d.jsx)(g.P.section,{variants:aA,children:(0,d.jsx)(p,{currentStats:a,prevStats:b})}),(0,d.jsxs)(g.P.section,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsx)(Z,{data:f})}),(0,d.jsx)("div",{children:(0,d.jsx)(an,{})})]}),(0,d.jsxs)(g.P.section,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsx)("div",{children:(0,d.jsxs)(q.Zp,{className:"h-full shadow-sm",children:[(0,d.jsx)(q.aR,{children:(0,d.jsx)(q.ZB,{children:"آخر الحجوزات"})}),(0,d.jsx)(q.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[c.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mr-3",children:(0,d.jsx)(l.A,{className:"h-5 w-5 text-blue-500"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("h4",{className:"font-medium",children:[a.passengers[0]?.name," ",a.passengers.length>1&&`و ${a.passengers.length-1} آخرون`]}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.route})]}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("span",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:a.pnr}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.issueDate?(0,aw.GP)((0,ax.H)(a.issueDate),"yyyy-MM-dd"):"-"})]})]},a.id||b)),0===c.length&&(0,d.jsx)("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد حجوزات حديثة."})]})})]})}),(0,d.jsx)("div",{children:(0,d.jsxs)(q.Zp,{className:"h-full shadow-sm",children:[(0,d.jsx)(q.aR,{children:(0,d.jsx)(q.ZB,{children:"الدفعات القادمة"})}),(0,d.jsx)(q.Wu,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[e.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center mr-3",children:(0,d.jsx)("i",{className:"fas fa-money-bill-wave text-orange-500"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h4",{className:"font-medium",children:a.clientName}),(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.serviceName})]}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsxs)("span",{className:"font-medium text-orange-600",children:[a.amount.toLocaleString()," ",a.currency]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,aw.GP)((0,ax.H)(a.dueDate),"yyyy-MM-dd")})]})]},a.id||b)),0===e.length&&(0,d.jsx)("p",{className:"text-center text-muted-foreground p-4",children:"لا توجد أقساط مستحقة قريبا."})]})})]})})]}),(0,d.jsx)("section",{className:"mt-8",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 shadow-sm",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold",children:"فريق العمل"}),(0,d.jsxs)(al(),{href:"/users",className:"text-primary-600 dark:text-primary-400 text-sm flex items-center",children:["عرض الكل ",(0,d.jsx)(at.A,{className:"ms-1 h-4 w-4"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[h.slice(0,5).map(a=>(0,d.jsxs)("div",{className:"flex flex-col items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect",children:[(0,d.jsxs)("div",{className:"relative mb-3",children:[(0,d.jsxs)(ap.eu,{className:"w-16 h-16 rounded-full border-2 border-primary-500",children:[(0,d.jsx)(ap.BK,{src:a.avatarUrl,alt:a.name}),(0,d.jsx)(ap.q5,{children:(0,d.jsx)(au.A,{className:"h-8 w-8"})})]}),(0,d.jsx)("span",{className:`absolute bottom-0 right-0 w-3 h-3 ${"active"===a.status?"bg-green-500":"bg-gray-400"} rounded-full border-2 border-white dark:border-gray-700`})]}),(0,d.jsx)("h4",{className:"font-medium text-center",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:a.position||"موظف"})]},a.uid)),(0,d.jsxs)(al(),{href:"/users",className:"flex flex-col items-center justify-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg transition-colors card-hover-effect border-2 border-dashed border-gray-300 dark:border-gray-600",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-3",children:(0,d.jsx)(av.A,{className:"text-gray-400 text-xl"})}),(0,d.jsx)("h4",{className:"font-medium text-center",children:"إضافة عضو"})]})]})]})})]})}},21820:a=>{"use strict";a.exports=require("os")},23626:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{"0004c295195cb02aa74b7e03b9ab47835262f651f3":()=>h._u,"00454095f373f8afcf3cd8b88a3e9643ba6181edb6":()=>e.y4,"006a7d18b222ac9fd27f636e3f60be09c88c550762":()=>k.ib,"00b878a0ae60d2d2540f863a4367bd50a6144d83f1":()=>s.P2,"00d790a9c67325f46e1dda5ba33e59ecfd95062466":()=>e.HW,"4000af43939789af61ade174f4258f9348ff45dc8b":()=>r.Mo,"4003d79e56aa7f3ece852d1ba7ff3516e60cce27d6":()=>r.PL,"400839afac1c721e8a0733096582359b8356e40214":()=>s.UB,"400c0115434cd29d4eca4428f9840cb7a074049ed1":()=>m.EZ,"400c84b00cbc18181ec896b17d3329ab44688122ee":()=>p.q,"400e621b7f78c4800cffc85d668ca10cd73eb6853c":()=>f.Lf,"4013135d45b93942093eced825516b1e20941831b7":()=>o.d,"401b140032a44590c12253e287a8d7d0383408525e":()=>g.lc,"40211bb4321aca8530a09b81e44f46cc59da30c2c4":()=>m.KB,"40213622e57351942781ff52345df063ded4056884":()=>e.Sm,"40274c0e2d9380168c8904f238346316bf9eb85c5d":()=>r.Op,"403331dfc341d9a7f9cbe156b5d10cfd49a20be531":()=>f.d5,"40341251e8d632597ecf83a7ab87f3793a83f06b51":()=>n.r,"4037c6ea7b2487342669aecdc2a7174064cd6c84fe":()=>s.Sw,"403853799c99974381aed2d752ac232c7cabeb7c0b":()=>s.hO,"403921c096e7cdc87c12bd704541e2db9fad4db939":()=>s.j_,"403c01bdb267219d16430eb023611daabec8b63ec8":()=>i.nX,"404ea7d8eef7c5fae0a7015cbd83317df47c440b3b":()=>r.SD,"405181b3416ca6fb6435ab9096a0a68342e5255501":()=>j.u,"405872236907704344162aca1c38160d1eac727fe8":()=>f.DI,"405ce651eeff5dd6c93f3965b62049b45a42e5a7d4":()=>i.LD,"406c8a5fa8b6f219b1d6c0d2ed6d4215e348e5c534":()=>m.Lf,"407ad343a0d07dddd296d749ab0d60ad67dfc5bb39":()=>i.rC,"4085652545b10cc37283ef55992935bd43a8ce947e":()=>f.zZ,"4085aac590f12a4a641b5bc7fff47d5353af49510e":()=>e.S,"40894ff0ee9a14922c13beed18ea3d0c678338253d":()=>q.eA,"408c54ad33973364b68d8475849f76b4a4ca590722":()=>f.EP,"408c94c431661ae65070856bc4a78d84f2cbfcba1c":()=>f.EZ,"408d4523c5fa8dbd353900a15d896d0ebee083358b":()=>e.X7,"40939e0ffddd5729906956a18bd5a10b991b0ccc8b":()=>m.d5,"409ab5f3a1d5afb4b4634875b66bd6864afda3323f":()=>r.C4,"409ba91156ff082c07d90f218ef67bfea8be50f67c":()=>m.DI,"409ee2d098a25e0103bd4e5cbd3c84c821bce98df9":()=>g.fW,"40ab8ba6feefb8bef18a049b39c08ecc0f412b245a":()=>r.rQ,"40b3f399476b2e0c0084bb235048022f7151d8d61a":()=>k.Qt,"40bd3493b6cd183a3f75aa7b2dffe9f325b07a2b9d":()=>h.Xx,"40c0dccd0c2a8e67f36983065fa5432d130bc97c65":()=>q.N2,"40c15e87ca74d3ad5ae09fdc0c6d9616384469f25f":()=>l._,"40c58d0bc8d4f91d67a942b18e51dcb1bf43076f6e":()=>m.zZ,"40ca4bf9958b6d1d26e411af5f72ad73b881d7ffc2":()=>q.Bx,"40cf063cd0996b5720c994376cff75a5921b27cb15":()=>q.sN,"40d0448bacb32a373d23394258f9e7de4aa7fd38a9":()=>m.EP,"40d0a9025cfae5e19ff9bfb1d8c43204722c4febb5":()=>q.xu,"40d6d1ef497e31912306b58c3358994aab72657361":()=>r.Vo,"40dc0f099e7b5a731a230c5f6ba0d64c59c23245aa":()=>q.li,"40f4619201eea9704cbf15357e730e9458fc66e834":()=>f.KB,"40f8aa2891259d90b9487e388b3405df3c3e200aeb":()=>s.hf,"40fb273cfe11e3acbfaa3953430203de2db167f95f":()=>s.Lm,"40fc6757a7ed8ba6cf86a7bf30e6bf0934f153f439":()=>e.Lx,"6011fc1c38056bdf4ffec77b46cde7479e7bed0ffe":()=>i.vL,"60186e37473393f3008b2a76484829f65c2825bc22":()=>q.vq,"6023146a7bfefc423ba02712c56694a31432de707c":()=>f.zO,"6052254d233f0ea6b36992b2b81ce07178dee95ad7":()=>k.oS,"60562fa6e2acf835f7f484086ad9e3f76c9be2ca55":()=>r.EL,"6073e98acf09f5000817ebcdd05234acc9c4d29f85":()=>g.rj,"60ac99fd5fe70fb62fed80f68193cb25204f5a2c28":()=>s._$,"60e34f9cbe57141cf2262bc166578e2d558a98e99f":()=>m.zO,"60eed12072721bc1c2c48214672b423b5d4cc8a6f3":()=>l.L,"7003bafa516cae88838b2870c227bb8f7b1ef595ec":()=>i.Nb,"70278708d5cbbc8d6310dcac5ed55f18c8eab7bbdd":()=>q.Uo,"70303f32e5ed8b56558bdc328a329d038fd2e61ace":()=>i.I0,"7036a92c4c51de937e481f7c0d6bc541b735f99157":()=>i.k5,"704baf0749912d6e636a66524e43f80ce5c8454d38":()=>i.xo,"7057bd85393d69e4688037e9bf4c49ca196efecf46":()=>q.T2,"709feea95dd92012fa4ddb7ae17c30c3338b04e65a":()=>s.BT,"70a1966b164872145df93c00584df7a0b9768aea98":()=>s.hv,"70a2ee919f2d86ac514a326d140a0804c759a4d955":()=>i.Kq,"70cfe727250a23b23d98bdaa484b32a157baabef97":()=>q.yF,"7ea99aecbe6da08b740bfa589a23855143625f516a":()=>s.bY,"7efe1f798361b3ef301fd7b48f8f3206292a2cecba":()=>i.AZ,"7f085acd10c7b589563e59e7e18d605a9cf6eb6b56":()=>g.cl,"7f156258846f24d01f7193780d90bff0896769f3dc":()=>s.Ie,"7f29b1f619814d2bb347b7568d9fef0db3672866b7":()=>s.tg,"7f33ef79ae72de1c2db1340cf81f1c0a0a525a8033":()=>e.kl,"7f33fcd02c8b1dfc136d21fd7035ce40fe2d48b135":()=>e.ht,"7f4fa596b78e1050be57bd23eeef63bf754e59a5c8":()=>k.xi,"7f56b7b077f6ef503c674aaefafd2b7951d91adaa8":()=>i.LQ,"7f59f3075656a91b7ed27ed0deb8f239c13fb4a30e":()=>s.cJ,"7f7228b058474be00c09729ab715fa20e010333dfa":()=>s.X4,"7f7cc5ac28f76953e580388c96325185bdb57f592c":()=>e.EZ,"7faf63d9d8686c0ff053833c82fd60b3e9c6fa0bff":()=>e.$T,"7fbd1d6bc63ebe1b1eeb689b35afc9c8cba834559f":()=>i.f9,"7fbd1dd6c8c8f0af7b61f3a67d5d04b01b5dd3fc37":()=>s.GB,"7fc073ecd1a2a3a687a33b240d39c28a9944119247":()=>k.Z7,"7fe3cedf8b5b39f6ca6561f08402f1ad7a82ecff97":()=>h.mt,"7ffb585af41918dddb19e9e747514fc75eda9f07ca":()=>q.dJ,"7fff34be9ad53d22bcedbe289fd19cffbcbb61a920":()=>i.ro});var e=c(62641),f=c(95378),g=c(94762),h=c(54756),i=c(24799),j=c(28541),k=c(18210),l=c(87965),m=c(39661),n=c(13732),o=c(40982),p=c(33875),q=c(10087),r=c(41163),s=c(98411),t=a([e,f,g,h,i,j,k,l,m,n,o,p,q,r,s]);[e,f,g,h,i,j,k,l,m,n,o,p,q,r,s]=t.then?(await t)():t,d()}catch(a){d(a)}})},24803:a=>{"use strict";a.exports=import("firebase-admin/storage")},25008:(a,b,c)=>{"use strict";c.d(b,{f:()=>f});var d=c(42255),e=c(58435);function f(a,b){let c=(0,d.a)(a);return isNaN(b)?(0,e.w)(a,NaN):(b&&c.setDate(c.getDate()+b),c)}},25730:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},26295:(a,b,c)=>{"use strict";c.d(b,{Cg:()=>f,my:()=>d,s0:()=>g,w4:()=>e});let d=6048e5,e=864e5,f=6e4,g=36e5},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29559:(a,b,c)=>{"use strict";c.d(b,{R:()=>d});let d={projectId:"fly4all-78277122-3cbd0",privateKey:"-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC62eIaOJqkBGL/\nIvxqOzN8/etbwsVKx8vNMRXVQ4RbS2/jB2JBJhonNWHf0Lll36QFnnfM0v1sGzz3\nck3eCAxT4snkbI0nb71u6tLff1YSur7p7GmCOeq1LKsc6uI5sFC3G0PJLZFYj2hG\n0djgQobNoVmLFfi9m1DhReDSFvk1PpJt1hxMhKKq11KR9ER90IUE2L6vuDR0Fa1Z\n9Y72htITxAq7Wd9zAlwlt7vcK5cQAbLBYrQVqPDrrmwNS5JPyDLhiEY6fbGeyiFE\nXdFNhktEsazoFN6w/V5NQ/aJH04fn3V36lBdc9sO7+wRufWRBaeoBs1FurPhpY1q\nxKorBLllAgMBAAECggEAFjzZrby4XNZf0NUhXOREVbcjpHVbBTIfpYFWw52oOjRR\ncd/eV/oYqTtvdVNySTdTXk7Um7YtrojUWe/K6CaljvNCC3NG3l9sWG/OnoZZYFvE\n3nLCQNszPZI+IDAtMefzx0MRr3cCohtZMfqGGPSZ9g2iqky4YJqERvdJ0T8mNCmU\n8GB6+qoKUGMt2O5DzVO250CGgIcgfqFd1dqvC+8PD3S2FL1dqwEgxpHeXhg+7NUU\n78+SmNRxcCTdqlgx5V9ihqgGaajVHWmGEMfDS+XatG+BAoc+Fi/ubOHPXH9Iniwd\njJcJ9CaSyZPFz0N+sY5uFB/wk2cYIKCdjzHTrJPzmQKBgQDgm8UI7Q3GScdbv29p\nQX++BOzqJKMiO7d0nOsW/7AobFVsSpXTsU0RovAkCtYY+P67qxQDwK3RSDs36YQE\nUyRwJhHnzJOKf5zj2nVFKgHgSSJdZEolMTM1KVicESDer6knsT7EN8M+iVGXl0JO\nz277bJ5hhNMkPnB1e7dOh6zq+QKBgQDU9zLg30dvNXNwSHv0QDZqADomi9U9nkZ+\nJhgJDmi+VMUxWfb61U0W/azewShL7YIsOHdTLensrAPBj5xzuB2OftKnEuaO3Nsv\nzJeQ3jOM5wXnqHpl9EXYVvlJTzM7tCyRJuiDFyhBmezCxikLjsjxWjwlcEGhc84Z\n+7E1IAUQzQKBgBVL78TG5VV1zWdPoXqzcS9NPEF/M9CdJOnzrv7BQ6yxiO/5qncm\nCo6vimGAfYhko5KbyAwLCvAbDzJf+9qFH6FamrwF07+AFhosro3eS8s+Y/nC9pzM\nK3TQ9Mvne9xhf4J59d+ZAfQ+BPSArRLX7Ef+po3MkFCRcwxQrLLPfn/RAoGBAL1f\nuBF42sfMSwOsoPTYaMqnuw3tyEhLxzmD3FmpQ4EEVnmFG3d/V1a7aw6FyrSB1gBG\nke0YZew8JfboImJQdY/xvJYu23Bsekgt8RU0UbjY8kpGadjhd35iELicwd00YXEN\nnTJ81CJJotysY3FQneTorZVJFkNgfARk6PZpq7d9AoGBAJVxFwblg6SQ+QZMUqaU\n5dXAESNOHv08DkYd0o/LmwfX1/odY9VwkR0unwMY3NncAWVSNh7u/C3DjLciaHzJ\nJr2o/GSZ2p1HxUsUa0aqN/q4BFTkO7ryFeCFcN3AO6hfgzKnoFUFYBD4iSHPkgX/\nfrErRvbecpYKP5V4y0awUggt\n-----END PRIVATE KEY-----\n".replace(/\\n/g,"\n"),clientEmail:"firebase-adminsdk-fbsvc@fly4all-78277122-3cbd0.iam.gserviceaccount.com"}},30984:(a,b,c)=>{"use strict";c.d(b,{H:()=>e});var d=c(26295);function e(a,b){let c,e,n=b?.additionalDigits??2,o=function(a){let b,c={},d=a.split(f.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],f.timeZoneDelimiter.test(c.date)&&(c.date=a.split(f.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=f.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(o.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(o.date,n);c=function(a,b){var c,d,e,f,h,i,k;if(null===b)return new Date(NaN);let n=a.match(g);if(!n)return new Date(NaN);let o=!!n[4],p=j(n[1]),q=j(n[2])-1,r=j(n[3]),s=j(n[4]),t=j(n[5])-1;if(o){return(c=s,d=t,c>=1&&c<=53&&d>=0&&d<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,s,t):new Date(NaN)}{let a=new Date(0);return(e=b,f=q,h=r,f>=0&&f<=11&&h>=1&&h<=(l[f]||(m(e)?29:28))&&(i=b,(k=p)>=1&&k<=(m(i)?366:365)))?(a.setUTCFullYear(b,q,Math.max(p,r)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!c||isNaN(c.getTime()))return new Date(NaN);let p=c.getTime(),q=0;if(o.time&&isNaN(q=function(a){var b,c,e;let f=a.match(h);if(!f)return NaN;let g=k(f[1]),i=k(f[2]),j=k(f[3]);return(b=g,c=i,e=j,24===b?0===c&&0===e:e>=0&&e<60&&c>=0&&c<60&&b>=0&&b<25)?g*d.s0+i*d.Cg+1e3*j:NaN}(o.time)))return new Date(NaN);if(o.timezone){if(isNaN(e=function(a){var b;if("Z"===a)return 0;let c=a.match(i);if(!c)return 0;let e="+"===c[1]?-1:1,f=parseInt(c[2]),g=c[3]&&parseInt(c[3])||0;return(b=g)>=0&&b<=59?e*(f*d.s0+g*d.Cg):NaN}(o.timezone)))return new Date(NaN)}else{let a=new Date(p+q),b=new Date(0);return b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),b.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),b}return new Date(p+q+e)}let f={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j(a){return a?parseInt(a):1}function k(a){return a&&parseFloat(a.replace(",","."))||0}let l=[31,null,31,30,31,30,31,31,30,31,30,31];function m(a){return a%400==0||a%4==0&&a%100!=0}},32957:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},40776:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Cm:()=>u,O0:()=>t,TK:()=>r,hG:()=>s,ht:()=>o,lo:()=>p,nu:()=>q,qV:()=>w,v_:()=>v});var e=c(75879);c(68633);var f=c(14276),g=c(43513),h=c(16780),i=c(12019),j=c(70598),k=c(30984),l=c(55511),m=c(51669),n=a([f,g]);[f,g]=n.then?(await n)():n;let x=a=>{if(!a)return null;let b=JSON.parse(JSON.stringify(a));for(let a in b)b[a]&&(b[a].hasOwnProperty("_seconds")||"function"==typeof b[a].toDate)&&(b[a]=new Date(1e3*b[a]._seconds||b[a].toDate()).toISOString());return b};async function o(a){let b=await (0,g.Lf)();if(!b)return null;try{let c=b.collection("users"),d=await c.where("email","==",a).limit(1).get();if(d.empty)return null;let e=d.docs[0];return{...x(e.data()),uid:e.id}}catch(a){return console.error("Error getting user by email:",String(a)),null}}async function p({includeHrData:a=!1,all:b=!1,from:c,to:d}={}){try{let b=await (0,g.Lf)(),e=(0,f.getAuth)(),[h,l]=await Promise.all([e.listUsers(),b.collection("users").get()]),m=new Map(l.docs.map(a=>[a.id,x(a.data())])),n=h.users.map(a=>{let b=m.get(a.uid)||{};return{uid:a.uid,name:a.displayName||b.name||"No Name",username:b.username||"",email:a.email||b.email||"",phone:a.phoneNumber||b.phone||"",avatarUrl:a.photoURL||b.avatarUrl,status:b.status||(a.disabled?"blocked":"pending"),role:b.role||"viewer",department:b.department,position:b.position,boxId:b.boxId,baseSalary:b.baseSalary||0,bonuses:b.bonuses||0,deductions:b.deductions||0,notes:b.notes,attendance:b.attendance||[],ticketProfit:b.ticketProfit,visaProfit:b.visaProfit,groupProfit:b.groupProfit,changeProfit:b.changeProfit,segmentProfit:b.segmentProfit,preferences:b.preferences||{},calculatedTotalProfit:0,calculatedNetSalary:0}});if(a){let a=c?(0,i.o)(c):void 0,e=d?(0,j.D)(d):void 0,f=await b.collection("journal-vouchers").get(),g={};f.forEach(b=>{let c=b.data(),d=c.officer,f=(0,k.H)(c.date);if(d&&(!a||!e||f>=a&&f<=e)){g[d]||(g[d]=0);let a=c.originalData?.salePrice||(c.originalData?.passengers||[]).reduce((a,b)=>a+(b.salePrice||0),0),b=c.originalData?.purchasePrice||(c.originalData?.passengers||[]).reduce((a,b)=>a+(b.purchasePrice||0),0);g[d]+=a-b}}),n.forEach(a=>{a.calculatedTotalProfit=g[a.name]||0,a.calculatedNetSalary=(a.baseSalary||0)+(a.bonuses||0)-(a.deductions||0)+a.calculatedTotalProfit})}return n}catch(a){return console.error("Error fetching users:",String(a)),[]}}async function q(a){let b=await (0,f.getAuth)(),c=await (0,g.Lf)(),{email:d,password:e,name:i,phone:j,...k}=a,m=e&&e.length>=6?e:(0,l.randomBytes)(16).toString("hex"),n=j;n&&!n.startsWith("+")&&(n=n.startsWith("0")?`+964${j.substring(1)}`:`+964${j}`);let o=await b.createUser({email:d,password:m,displayName:i,phoneNumber:n,disabled:"blocked"===a.status});return await c.collection("users").doc(o.uid).set({...k,name:i,email:d,phone:n}),(0,h.revalidatePath)("/users"),{success:!0,newUser:{uid:o.uid,...a}}}async function r(a,b){let c=await (0,f.getAuth)(),d=await (0,g.Lf)(),{email:e,name:i,phone:j,password:k,status:l,avatarUrl:m,...n}=b,o={};e&&(o.email=e),i&&(o.displayName=i),j&&(o.phoneNumber=j),m&&(o.photoURL=m),k&&k.length>=6&&(o.password=k),l&&(o.disabled="blocked"===l),Object.keys(o).length>0&&await c.updateUser(a,o);let p={...n,email:e,name:i,phone:j,status:l,avatarUrl:m};Object.keys(p).forEach(a=>void 0===p[a]&&delete p[a]),Object.keys(p).length>0&&await d.collection("users").doc(a).set(p,{merge:!0}),(0,h.revalidatePath)("/users");let q=await d.collection("users").doc(a).get(),r=x(q.data());return{success:!0,updatedUser:{...r,uid:a}}}async function s(a){let b=await (0,f.getAuth)(),c=await (0,g.Lf)();return await b.deleteUser(a),await c.collection("users").doc(a).delete(),(0,h.revalidatePath)("/users"),{success:!0}}async function t(){let a=await (0,g.Lf)();return(await a.collection("roles").get()).docs.map(a=>({id:a.id,...a.data()}))}async function u(a){let b=await (0,g.Lf)(),c=a.name.toLowerCase().replace(/\s+/g,"_");return await b.collection("roles").doc(c).set(a),(0,h.revalidatePath)("/users"),{success:!0,newRole:{id:c,...a}}}async function v(a,b){let c=await (0,g.Lf)();return await c.collection("roles").doc(a).update(b),(0,h.revalidatePath)("/users"),{success:!0}}async function w(){try{let a=await (0,f.getAuth)(),b=(await a.listUsers()).users.map(a=>({uid:a.uid,email:a.email,displayName:a.displayName,creationTime:new Date(a.metadata.creationTime).toLocaleDateString()}));return{success:!0,users:b}}catch(a){return console.error("Error listing all auth users:",String(a)),{success:!1,error:a.message}}}(0,m.D)([o,p,q,r,s,t,u,v,w]),(0,e.A)(o,"406818275705b776627a9e14558eaa7857fbec9b73",null),(0,e.A)(p,"40290c8e8678ea3c7dc08bc14a2b21bf84ced558a3",null),(0,e.A)(q,"40d4790cf5bfe15d462399ad8c52d1baec8babf86f",null),(0,e.A)(r,"601532f3b7a46dae258a5ff32f14fb4b3e2e141e9f",null),(0,e.A)(s,"40ef77a697a84cf599002575e6afc4c1de58c3cdab",null),(0,e.A)(t,"005773e734ccf3535fa61ed9b34042d47625b1ede6",null),(0,e.A)(u,"40e13d085ff779b8dfbb82e790ebb21702ce079192",null),(0,e.A)(v,"601838acb9f969bfd30fa9f583c86dd453b19524dd",null),(0,e.A)(w,"00afcee30c25fc6521aeaf596fabd0fef5e0ca707f",null),d()}catch(a){d(a)}})},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},41236:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>n});var e=c(75338),f=c(74515),g=c(68420),h=c(55242),i=c(62159),j=c(40776),k=c(1661),l=a([g,j]);async function m(){let[a,b,c,d,f,i]=await Promise.all([(0,g.wx)(),(0,g.wx)((0,k.a)(new Date,1)),(0,g.Mn)(),(0,g.BA)(),(0,g.vs)(),(0,j.lo)()]);return(0,e.jsx)(h.default,{stats:a,prevStats:b,recentBookings:c,upcomingInstallments:d,chartData:f,users:i})}async function n(){return(0,e.jsx)("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-dark-900 dark:to-gray-800 text-gray-800 dark:text-gray-200 transition-colors duration-300 min-h-screen",children:(0,e.jsx)(f.Suspense,{fallback:(0,e.jsxs)("div",{className:"space-y-8 p-4 md:p-6",children:[(0,e.jsx)(i.E,{className:"h-48 w-full rounded-2xl"}),(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((a,b)=>(0,e.jsx)(i.E,{className:"h-36 w-full rounded-xl"},b))}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,e.jsx)(i.E,{className:"lg:col-span-2 h-96 rounded-xl"}),(0,e.jsx)(i.E,{className:"h-96 rounded-xl"})]})]}),children:(0,e.jsx)("div",{className:"p-4 md:p-6",children:(0,e.jsx)(m,{})})})})}[g,j]=l.then?(await l)():l,d()}catch(a){d(a)}})},42255:(a,b,c)=>{"use strict";function d(a){let b=Object.prototype.toString.call(a);return a instanceof Date||"object"==typeof a&&"[object Date]"===b?new a.constructor(+a):new Date("number"==typeof a||"[object Number]"===b||"string"==typeof a||"[object String]"===b?a:NaN)}c.d(b,{a:()=>d})},43513:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{$E:()=>q,Lf:()=>o,iS:()=>p});var e=c(75879);c(68633);var f=c(9801),g=c(14276),h=c(7879),i=c(24803),j=c(29559),k=c(51669),l=a([f,g,h,i]);[f,g,h,i]=l.then?(await l)():l;let r=null,s=null;async function m(){if((0,f.getApps)().length>0)return r=(0,f.getApp)();if(!j.R||!j.R.projectId||!j.R.privateKey||!j.R.clientEmail)throw console.error("Firebase Admin SDK Service Account object is not valid."),s=Error("Default Firebase service account is not valid in firebase-service-account.ts.");try{console.log("Initializing Firebase Admin SDK...");let a=(0,f.initializeApp)({credential:(0,f.cert)(j.R),storageBucket:`${j.R.projectId}.appspot.com`});return r=a,console.log("Firebase Admin SDK initialized successfully."),a}catch(a){throw console.error("Failed to initialize Firebase Admin SDK:",String(a)),s=a instanceof Error?a:Error(String(a))}}async function n(){if(r)return r;if(s)throw s;return await m()}async function o(){let a=await n();return(0,h.getFirestore)(a)}async function p(){let a=await n();return(0,g.getAuth)(a)}async function q(){let a=await n();return(0,i.getStorage)(a)}(0,k.D)([o,p,q]),(0,e.A)(o,"009e84f93947e0a432e28675ea07a71949bfe66943",null),(0,e.A)(p,"0084d26686615403d39adac4c095e2f442ed3af27d",null),(0,e.A)(q,"0079928ff14026085419c5483c28b98ee3311389f6",null),d()}catch(a){d(a)}})},44043:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},55242:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/dashboard/components/dashboard-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/dashboard/components/dashboard-client.tsx","default")},55511:a=>{"use strict";a.exports=require("crypto")},62159:(a,b,c)=>{"use strict";c.d(b,{E:()=>f});var d=c(75338),e=c(70673);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("animate-pulse rounded-md bg-muted",a),...b})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68420:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{BA:()=>s,Mn:()=>r,vs:()=>t,wx:()=>q});var e=c(75879);c(68633);var f=c(43513),g=c(12019),h=c(70598),i=c(25008),j=c(99318),k=c(30984),l=c(1661),m=c(2467),n=c(51669),o=a([f]);f=(o.then?(await o)():o)[0];let u=a=>{let b=a.data();if(!b)return null;let c=JSON.parse(JSON.stringify({...b,id:a.id})),d=a=>{for(let b in a)a[b]&&"object"==typeof a[b]&&(a[b].hasOwnProperty("_seconds")&&a[b].hasOwnProperty("nanoseconds")?a[b]=new Date(1e3*a[b]._seconds).toISOString():a[b]instanceof Date?a[b]=a[b].toISOString():d(a[b]))};return d(c),c};function p(a){return`${a.getFullYear()}-${("0"+(a.getMonth()+1)).slice(-2)}`}async function q(a=new Date){let b=await (0,f.Lf)();if(!b)return{revenue:0,profit:0,bookingsCount:0,activeSubscriptions:0,currency:"USD"};try{let c=p(a),d=`default_revenue_${c}`,e=(await b.collection("aggregates").doc(d).get()).data()||{},f=await b.collection("subscriptions").where("status","==","Active").count().get(),g={revenue:e.totalRevenue||0,profit:e.totalProfit||0,bookingsCount:e.bookingsCount||0,activeSubscriptions:f.data().count,currency:"USD"};return JSON.parse(JSON.stringify(g))}catch(a){return console.error("Error getting dashboard stats:",String(a)),{revenue:0,profit:0,bookingsCount:0,activeSubscriptions:0,currency:"USD"}}}async function r(){let a=await (0,f.Lf)();if(!a)return[];try{let b=await a.collection("journal-vouchers").where("voucherType","==","booking").orderBy("createdAt","desc").limit(7).get();if(b.empty)return[];let c=b.docs.map(a=>u(a).originalData);return JSON.parse(JSON.stringify(c))}catch(a){return console.error("Error getting recent bookings:",String(a)),[]}}async function s(){let a=await (0,f.Lf)();if(!a)return[];try{let b=(0,g.o)(new Date),c=(0,h.D)((0,i.f)(b,7)),d=await a.collection("subscription_installments").where("status","==","Unpaid").where("dueDate",">=",b.toISOString().split("T")[0]).orderBy("dueDate","asc").limit(100).get();if(d.empty)return[];let e=d.docs.map(a=>u(a)).filter(a=>(0,j.v)((0,k.H)(a.dueDate),{start:b,end:c})).slice(0,7);return JSON.parse(JSON.stringify(e))}catch(a){return console.error("Error getting upcoming installments:",String(a)),[]}}async function t(){let a=await (0,f.Lf)();if(!a)return[];let b=new Date,c={},d=[];for(let e=5;e>=0;e--){let f=(0,l.a)(b,e);c[(0,m.GP)(f,"MMM")]={revenue:0,profit:0};let g=p(f),h=`default_revenue_${g}`;d.push(a.collection("aggregates").doc(h).get())}try{(await Promise.all(d)).forEach((a,b)=>{let d=Object.keys(c)[b];if(a.exists){let b=a.data();c[d].revenue=b?.totalRevenue||0,c[d].profit=b?.totalProfit||0}});let a=Object.entries(c).map(([a,b])=>({name:a,...b}));return JSON.parse(JSON.stringify(a))}catch(b){console.error("Error getting revenue chart data:",String(b));let a=Object.keys(c).map(a=>({name:a,revenue:0,profit:0}));return JSON.parse(JSON.stringify(a))}}(0,n.D)([q,r,s,t]),(0,e.A)(q,"40e95d5574ebe46d5479b45ed231c9bd784b1873f7",null),(0,e.A)(r,"0009c39889da94a8d7def59bd6759ed539ce956cf0",null),(0,e.A)(s,"00876833d9af9a3517587b0b01d878099da86126f7",null),(0,e.A)(t,"005154bc9c2a99d1af34841e9c12edbbd06602fe62",null),d()}catch(a){d(a)}})},68895:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(75338);function e({children:a}){return(0,d.jsx)(d.Fragment,{children:a})}},70598:(a,b,c)=>{"use strict";c.d(b,{D:()=>e});var d=c(42255);function e(a){let b=(0,d.a)(a);return b.setHours(23,59,59,999),b}},70673:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(81171),e=c(11167);function f(...a){return(0,e.QP)((0,d.$)(a))}},70893:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,41236)),"/home/user/studio/src/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,68895)),"/home/user/studio/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"/home/user/studio/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["/home/user/studio/src/app/dashboard/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/dashboard/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},73496:a=>{"use strict";a.exports=require("http2")},74075:a=>{"use strict";a.exports=require("zlib")},77939:(a,b,c)=>{Promise.resolve().then(c.bind(c,55242))},78335:()=>{},79551:a=>{"use strict";a.exports=require("url")},80623:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},91779:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(8808).A)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]])},94735:a=>{"use strict";a.exports=require("events")},96487:()=>{},99318:(a,b,c)=>{"use strict";c.d(b,{v:()=>e});var d=c(42255);function e(a,b){let c=+(0,d.a)(a),[e,f]=[+(0,d.a)(b.start),+(0,d.a)(b.end)].sort((a,b)=>a-b);return c>=e&&c<=f}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,8298,3103,9664,7180,6153,4515,7944,2740,3043,2467,9422,4154,4799,232,1842,2430],()=>b(b.s=70893));module.exports=c})();