"use strict";exports.id=4384,exports.ids=[4384],exports.modules={17715:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(8808).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},44384:(a,b,c)=>{c.d(b,{A:()=>A});var d=c(21124),e=c(38301),f=c.n(e),g=c(32842),h=c(62186),i=c(92754),j=c(66566),k=c(35284),l=c(93758),m=c(40822),n=c(10656),o=c(22874),p=c(17715),q=c(49113),r=c(49566),s=c(65409),t=c(37448),u=c(72001),v=c(12439),w=c(73902);let x=({title:a,keywords:b,onKeywordsChange:c})=>(0,d.jsxs)(h.Zp,{children:[(0,d.jsx)(h.aR,{children:(0,d.jsx)(h.ZB,{className:"text-base",children:a})}),(0,d.jsxs)(h.Wu,{className:"flex flex-wrap gap-2",children:[b.map((a,e)=>(0,d.jsxs)("div",{className:"flex items-center gap-1 p-1 pl-2 rounded-md bg-muted border",children:[(0,d.jsx)(l.p,{value:a,onChange:a=>c((0,u.jM)(b,b=>{b[e]=a.target.value})),className:"h-7 text-sm border-none shadow-none focus-visible:ring-1 bg-transparent"}),(0,d.jsx)(k.$,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:()=>c(b.filter((a,b)=>b!==e)),children:(0,d.jsx)(m.A,{className:"h-4 w-4"})})]},e)),(0,d.jsx)(k.$,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>c([...b.filter(Boolean),""]),children:(0,d.jsx)(n.A,{className:"h-4 w-4"})})]})]});function y({settings:a,onSettingsChanged:b}){let[c,g]=(0,e.useState)({}),[i,j]=(0,e.useState)({creditKeywords:[],cashKeywords:[]}),[y,z]=(0,e.useState)(!1),{toast:A}=(0,t.dj)(),B=f().useMemo(()=>a.relationSections?.flatMap(a=>a.fields)||[],[a.relationSections]),C=async()=>{let a=(0,u.jM)(c,a=>{for(let b in a)a[b].aliases=a[b].aliases.filter(Boolean)}),d=(0,u.jM)(i,a=>{a.creditKeywords=a.creditKeywords.filter(Boolean),a.cashKeywords=a.cashKeywords.filter(Boolean)});z(!0),(await (0,s.X)({importFieldsSettings:a,importLogicSettings:d})).success?(A({title:"تم حفظ المرادفات بنجاح"}),b()):A({title:"خطأ",description:"لم يتم حفظ المرادفات",variant:"destructive"}),z(!1)},D=(a,b)=>{j((0,u.jM)(c=>{c&&(c[a]=b)}))},E=async()=>{z(!0),(await (0,s.X)({importFieldsSettings:w.xd.importFieldsSettings,importLogicSettings:w.xd.importLogicSettings})).success?(b(),A({title:"تمت إعادة التعيين للإعدادات الافتراضية"})):A({title:"خطأ",description:"لم يتم إعادة التعيين.",variant:"destructive"}),z(!1)};return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold",children:"مرادفات حقول الاستيراد"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"إدارة الكلمات التي يتعرف عليها النظام لربط الأعمدة وتفسير قيمها عند استيراد ملف Excel."})]}),(0,d.jsxs)(v.Lt,{children:[(0,d.jsx)(v.tv,{asChild:!0,children:(0,d.jsxs)(k.$,{variant:"ghost",children:[(0,d.jsx)(o.A,{className:"me-2 h-4 w-4"}),"إعادة للوضع الافتراضي"]})}),(0,d.jsxs)(v.EO,{children:[(0,d.jsxs)(v.wd,{children:[(0,d.jsx)(v.r7,{children:"هل أنت متأكد؟"}),(0,d.jsx)(v.$v,{children:"سيؤدي هذا إلى حذف جميع المرادفات المخصصة والعودة إلى القائمة الافتراضية."})]}),(0,d.jsxs)(v.ck,{children:[(0,d.jsx)(v.Zr,{children:"إلغاء"}),(0,d.jsx)(v.Rx,{onClick:E,children:"نعم، قم بإعادة التعيين"})]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)(h.Zp,{children:[(0,d.jsxs)(h.aR,{children:[(0,d.jsxs)(h.ZB,{className:"flex items-center gap-2 text-base",children:[(0,d.jsx)(p.A,{className:"h-5 w-5"}),'إعدادات منطق "نوع التعامل"']}),(0,d.jsx)(h.BT,{children:'هنا يمكنك تحديد الكلمات التي سيتم تفسيرها على أنها "نقدي" أو "آجل" عند استيراد البيانات.'})]}),(0,d.jsxs)(h.Wu,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,d.jsx)(x,{title:"كلمات تعني (نقدي)",keywords:i.cashKeywords,onKeywordsChange:a=>D("cashKeywords",a)}),(0,d.jsx)(x,{title:"كلمات تعني (آجل)",keywords:i.creditKeywords,onKeywordsChange:a=>D("creditKeywords",a)})]})]}),B.map(a=>(0,d.jsxs)(h.Zp,{children:[(0,d.jsxs)(h.aR,{children:[(0,d.jsxs)(h.ZB,{children:["مرادفات حقل: ",a.label]}),(0,d.jsx)(h.BT,{children:"هذه المرادفات تستخدم لمساعدة النظام في العثور على عنوان العمود الصحيح في ملفك."})]}),(0,d.jsxs)(h.Wu,{className:"flex flex-wrap gap-2",children:[(c[a.id]?.aliases||[]).map((b,c)=>(0,d.jsxs)("div",{className:"flex items-center gap-1 p-1 pl-2 rounded-md bg-muted border",children:[(0,d.jsx)(l.p,{value:b,onChange:b=>{var d,e;return d=a.id,e=b.target.value,void g((0,u.jM)(a=>{a?.[d]&&(a[d].aliases[c]=e)}))},className:"h-7 text-sm border-none shadow-none focus-visible:ring-1 bg-transparent"}),(0,d.jsx)(k.$,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:()=>{var b;return b=a.id,void g((0,u.jM)(a=>{a?.[b]&&a[b].aliases.splice(c,1)}))},children:(0,d.jsx)(m.A,{className:"h-4 w-4"})})]},c)),(0,d.jsx)(k.$,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{var b;return b=a.id,void g((0,u.jM)(a=>{if(a?.[b]){let c=a[b].aliases.filter(Boolean);a[b].aliases=[...c,""]}}))},children:(0,d.jsx)(n.A,{className:"h-4 w-4"})})]})]},a.id))]}),(0,d.jsx)("div",{className:"flex justify-end mt-6",children:(0,d.jsxs)(k.$,{onClick:C,disabled:y,children:[y&&(0,d.jsx)(q.A,{className:"me-2 h-4 w-4 animate-spin"}),(0,d.jsx)(r.A,{className:"me-2 h-4 w-4"}),"حفظ كل التغييرات"]})})]})}var z=c(7730);function A({settings:a,onSettingsChanged:b}){return(0,d.jsxs)(g.tU,{defaultValue:"fields",children:[(0,d.jsxs)(g.j7,{className:"grid w-full grid-cols-2",children:[(0,d.jsxs)(g.Xi,{value:"fields",children:[(0,d.jsx)(i.A,{className:"me-2 h-4 w-4"}),"إدارة الحقول"]}),(0,d.jsxs)(g.Xi,{value:"import",children:[(0,d.jsx)(j.A,{className:"me-2 h-4 w-4"}),"استيراد Excel"]})]}),(0,d.jsx)(g.av,{value:"fields",className:"mt-4",children:(0,d.jsx)(h.Zp,{children:(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsx)(y,{settings:a,onSettingsChanged:b})})})}),(0,d.jsx)(g.av,{value:"import",className:"mt-4",children:(0,d.jsxs)(h.Zp,{children:[(0,d.jsxs)(h.aR,{children:[(0,d.jsx)(h.ZB,{children:"أداة استيراد Excel"}),(0,d.jsx)(h.BT,{children:"اتبع الخطوات لاستيراد بيانات العملاء أو الموردين من ملف."})]}),(0,d.jsx)(h.Wu,{children:(0,d.jsx)(z.A,{settings:a})})]})})]})}},66566:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(8808).A)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])}};